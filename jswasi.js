if(typeof window==="undefined"){
var i="wash-cache",c=["./jswasi.js"];self.addEventListener("install",async()=>{await(await caches.open(i)).addAll(c)});async function n(e){return caches.match(e).then(async t=>{if(t===void 0&&(e.mode==="no-cors"&&(e=new Request(e.url,{cache:e.cache,credentials:"omit",headers:e.headers,integrity:e.integrity,destination:e.destination,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy,signal:e.signal})),t=await fetch(e)),t.status===0)return t;let a=new Headers(t.headers);return a.set("Cross-Origin-Embedder-Policy","require-corp"),a.set("Cross-Origin-Opener-Policy","same-origin"),new Response(t.body,{status:t.status,statusText:t.statusText,headers:a})})}self.addEventListener("fetch",e=>{let t=e,a=t.request;t.respondWith(n(a))});
}else{
var l_=Object.defineProperty;var d_=(r,e,t)=>e in r?l_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var xr=(r,e,t)=>(d_(r,typeof e!="symbol"?e+"":e,t),t);var bf=URL.createObjectURL(new Blob([function(){var r=BigInt(1),e=BigInt(2),t=BigInt(4),n=BigInt(8),i=BigInt(16),s=BigInt(32),a=BigInt(64),o=BigInt(128),c=BigInt(256),u=BigInt(512),f=BigInt(1024),h=BigInt(2048),p=BigInt(4096),g=BigInt(8192),y=BigInt(16384),A=BigInt(32768),H=BigInt(65536),$=BigInt(131072),X=BigInt(262144),z=BigInt(524288),se=BigInt(1048576),pe=BigInt(2097152),We=BigInt(4194304),nt=BigInt(8388608),bn=BigInt(16777216),Tn=BigInt(33554432),Qt=BigInt(67108864),Jt=BigInt(134217728),ti=BigInt(268435456),ri=BigInt(536870911),Zt=r|e|i|o|pe|Jt,Xr=r|a|i|o|pe|Jt,Ht=0,Cn=1,Xe=2,me=3,On=0,qa=1,Ee=2,Qa=0,Ja=1,ni=2,Za=0,ii=2,rf=1<<0,nf=1<<1,eo=0,to=1,rs=2,ns=3,qr=4,ro=5,no=6,Wn=7;function is(ge){let te=[],ht="",$e=ge,_t="",Tt=0;for(;$e!=="";)$e.indexOf("/")!==-1?_t=$e.substr(0,$e.indexOf("/")):_t=$e,$e=$e.substr(_t.length+1),_t===".."?Tt>0&&(Tt-=1):_t==="."||_t!=""&&(te[Tt]=_t,Tt+=1);return ht=`/${te.slice(0,Tt).join("/")}`,ht=ht.replace("/./","/"),ht}function or(ge){let te=Math.trunc(ge),ht=BigInt(Math.round((ge-te)*1e6));return BigInt(te)*BigInt(1e6)+ht}function ss(ge,te){switch(ge){case Cn:return or(performance.now());case Ht:return or(Date.now());case Xe:case me:return or(performance.now())-te;default:return or(performance.now())-te}}var io=0xc0000000n,as=30n,xn=0x3fff0000n,Qr=16n,so=0x0000ff00n,ao=8n,oo=0x000000ffn,si=0n;function ai(ge){return{rw:Number((ge&io)>>as),size:Number((ge&xn)>>Qr),func:Number((ge&oo)>>si),driver:Number((ge&so)>>ao)}}var Jr=or(performance.now()),Vt,Ve,os,br,qe;onmessage=async ge=>{if(!Vt&&ge.data[0]==="start"){Vt=!0,[,Ve,os,br,qe]=ge.data;try{await Tr()}catch(te){ie(["console",`Worker failed: ${te}`])}}};function ie(ge){postMessage([os,...ge])}function V(ge){qe.DEBUG&&!(qe.DEBUG==="0"||qe.DEBUG==="false"||qe.DEBUG==="")&&ie(["console",ge])}function cr(ge){V("calling close()"),ie(["proc_exit",ge]),self.close()}var cs={0:Ja,1:ni,2:Qa};function co(ge=!1){let te;function ht(N){te=N.exports}function $e(N,O){V(`environ_sizes_get(0x${N.toString(16)}, 0x${O.toString(16)})`);let L=new DataView(te.memory.buffer),Y=Object.keys(qe).length;L.setUint32(N,Y,!0);let B=Object.entries(qe).reduce((P,[W,k])=>P+new TextEncoder().encode(`${W}=${k}\0`).byteLength,0);return L.setUint32(O,B,!0),0}function _t(N,O){V(`environ_get(${N.toString(16)}, ${O.toString(16)})`);let L=new DataView(te.memory.buffer),Y=new Uint8Array(te.memory.buffer);return Object.entries(qe).forEach(([B,P],W)=>{L.setUint32(N+W*4,O,!0);let k=new TextEncoder().encode(`${B}=${P}\0`);Y.set(k,O),O+=k.byteLength}),0}function Tt(N,O){V(`args_sizes_get(${N.toString(16)}, ${O.toString(16)})`);let L=new DataView(te.memory.buffer);return L.setUint32(N,br.length,!0),L.setUint32(O,new TextEncoder().encode(br.join("")).byteLength+br.length,!0),0}function fs(N,O){V(`args_get(${N}, 0x${O.toString(16)})`);let L=new DataView(te.memory.buffer),Y=new Uint8Array(te.memory.buffer);return br.forEach((B,P)=>{L.setUint32(N+P*4,O,!0);let W=new TextEncoder().encode(`${B}\0`);Y.set(W,O),O+=W.byteLength}),0}function ls(N,O){V(`fd_fdstat_get(${N}, 0x${O.toString(16)})`);let L=new DataView(te.memory.buffer),Y=new SharedArrayBuffer(4+24),B=new Int32Array(Y,0,1);B[0]=-1;let P=new Uint8Array(Y,4,1),W=new BigUint64Array(Y,8,1),k=new BigUint64Array(Y,16,1),M=new Uint8Array(Y,24,1);ie(["fd_fdstat_get",{sharedBuffer:Y,fd:N}]),Atomics.wait(B,0,-1);let G=Atomics.load(B,0);return G!==0?(V(`fd_fdstat_get returned ${G}`),G):(L.setUint8(O,P[0]),L.setUint32(O+2,M[0],!0),L.setBigUint64(O+8,W[0],!0),L.setBigUint64(O+16,k[0],!0),V(`fd_fdstat_get returned ${G} {file_type: ${P[0]} file_flags: 0 rights_base: ${W[0]} rights_inheriting: ${k}}`),0)}function uo(N,O,L,Y){V(`fd_write(${N}, ${O}, ${L}, ${Y})`);let B=new DataView(te.memory.buffer),P=0,W=[];for(let ae=0;ae<L;ae+=1){let he=O+ae*8,Se=B.getUint32(he,!0),xe=B.getUint32(he+4,!0),De=new Uint8Array(te.memory.buffer,Se,xe);for(let be=0;be<De.byteLength;be+=1)W.push(De[be]);P+=De.byteLength}let k=new SharedArrayBuffer(4+4+P),M=new Int32Array(k,0,1),G=new Int32Array(k,4,1);M[0]=-1;let j=Uint8Array.from(W);ie(["fd_write",{sharedBuffer:k,fd:N,content:j}]),Atomics.wait(M,0,-1);let J=Atomics.load(M,0);return J===0?(V(`fd_write written ${G} bytes.`),B.setUint32(Y,G[0],!0)):V(`fd_write returned ${J}.`),J}function oi(N){V(`proc_exit(${N})`),cr(N)}function ci(N,O){V(`random_get(${N}, ${O})`);let L=new Uint8Array(te.memory.buffer),Y=new Uint8Array(O);return crypto.getRandomValues(Y),L.set(Y,N),0}function ds(N){return Ge()}function ui(N,O,L){return V(`clock_time_get(${N}, ${O}, ${L})`),new DataView(te.memory.buffer).setBigUint64(L,ss(N,Jr),!0),0}function fo(N){V(`fd_close(${N})`);let O=new SharedArrayBuffer(4),L=new Int32Array(O,0,1);return L[0]=-1,ie(["fd_close",{sharedBuffer:O,fd:N}]),Atomics.wait(L,0,-1),Atomics.load(L,0)}function lo(N,O){V(`fd_filestat_get(${N}, 0x${O.toString(16)})`);let L=new DataView(te.memory.buffer),Y=new SharedArrayBuffer(4+64),B=new Int32Array(Y,0,1);B[0]=-1;let P=new DataView(Y,4);ie(["fd_filestat_get",{sharedBuffer:Y,fd:N}]),Atomics.wait(B,0,-1);let W=Atomics.load(B,0);if(W!==0)return V(`fd_filestat_get returned ${W}`),W;let k=P.getBigUint64(0,!0),M=P.getBigUint64(8,!0),G=P.getUint8(16),j=P.getBigUint64(24,!0),J=P.getBigUint64(32,!0),ae=P.getBigUint64(40,!0),he=P.getBigUint64(48,!0),Se=P.getBigUint64(56,!0);return ge?(L.setBigUint64(O,k,!0),L.setBigUint64(O+8,M,!0),L.setUint8(O+16,G),L.setUint32(O+20,Number(j),!0),L.setBigUint64(O+24,J,!0),L.setBigUint64(O+32,ae,!0),L.setBigUint64(O+40,he,!0),L.setBigUint64(O+48,Se,!0)):(L.setBigUint64(O,k,!0),L.setBigUint64(O+8,M,!0),L.setUint8(O+16,G),L.setBigUint64(O+24,j,!0),L.setBigUint64(O+32,J,!0),L.setBigUint64(O+40,ae,!0),L.setBigUint64(O+48,he,!0),L.setBigUint64(O+56,Se,!0)),V(`fd_filestat_get returned ${W} {dev: ${k} ino: ${M} fileType: ${G} nlink: ${j} size: ${J} atim: ${ae} mtim: ${he} ctim: ${Se}}`),0}function ho(N,O,L,Y){V(`fd_read(${N}, ${O}, ${L}, ${Y})`);let B=new DataView(te.memory.buffer),P=new Uint8Array(te.memory.buffer),W=0;for(let k=0;k<L;k+=1){let M=B.getUint32(O+8*k,!0),G=B.getUint32(O+8*k+4,!0),j=new SharedArrayBuffer(4+4+G),J=new Int32Array(j,0,1);J[0]=-1;let ae=new Int32Array(j,4,1),he=new Uint8Array(j,8,G);ie(["fd_read",{sharedBuffer:j,fd:N,len:G,offset:void 0}]),Atomics.wait(J,0,-1);let Se=Atomics.load(J,0);if(Se!==0)return Se;P.set(he,M),W+=ae[0]}return N>2&&V(`fd_read read ${W} bytes.`),B.setUint32(Y,W,!0),0}function _o(N,O,L,Y,B){N>2&&V(`fd_pread(${N}, ${O}, ${L}, ${B})`);let P=new DataView(te.memory.buffer),W=new Uint8Array(te.memory.buffer),k=0;for(let M=0;M<L;M+=1){let G=P.getUint32(O+8*M,!0),j=P.getUint32(O+8*M+4,!0),J=new SharedArrayBuffer(4+4+j),ae=new Int32Array(J,0,1);ae[0]=-1;let he=new Int32Array(J,4,1),Se=new Uint8Array(J,8,j);ie(["fd_pread",{sharedBuffer:J,fd:N,len:j,offset:Y}]),Atomics.wait(ae,0,-1);let xe=Atomics.load(ae,0);if(xe!==0)return xe;W.set(Se,G),k+=he[0]}return N>2&&V(`fd_pread read ${k} bytes.`),P.setUint32(B,k,!0),0}function po(N,O,L,Y,B){V(`fd_readdir(${N}, ${O}, ${L}, ${Y}, ${B})`);let P=new DataView(te.memory.buffer),W=new Uint8Array(te.memory.buffer),k=new SharedArrayBuffer(4+4+L),M=new Int32Array(k,0,1);M[0]=-1;let G=new Uint32Array(k,4,1),j=new Uint8Array(k,8);ie(["fd_readdir",{sharedBuffer:k,fd:N,cookie:Y,bufLen:L}]),Atomics.wait(M,0,-1);let J=Atomics.load(M,0);return J!==0?J:(W.set(j,O),P.setUint32(B,G[0],!0),0)}function hs(N,O,L,Y){V(`fd_seek(${N}, ${O}, ${L}, ${Y})`);let B=new DataView(te.memory.buffer),P=new SharedArrayBuffer(4+4+8),W=new Int32Array(P,0,1);W[0]=-1;let k=new BigUint64Array(P,8,1),M=ge?cs[L]:L;ie(["fd_seek",{sharedBuffer:P,fd:N,offset:O,whence:M}]),Atomics.wait(W,0,-1);let G=Atomics.load(W,0);return V(`fd_seek returned ${G}, file_pos = ${k[0]}`),G!==0?G:(B.setBigUint64(Y,k[0],!0),0)}function So(N,O,L){let Y=new Uint8Array(te.memory.buffer),B=new TextDecoder().decode(Y.slice(O,O+L));V(`path_create_directory(${N}, ${B}, ${L}) [path=${B}]`);let P=new SharedArrayBuffer(4),W=new Int32Array(P,0,1);return W[0]=-1,ie(["path_create_directory",{sharedBuffer:P,fd:N,path:B}]),Atomics.wait(W,0,-1),Atomics.load(W,0)}function vo(N,O,L,Y,B){let P=new DataView(te.memory.buffer),W=new Uint8Array(te.memory.buffer),k=new TextDecoder().decode(W.slice(L,L+Y));V(`path_filestat_get(${N}, ${O}, ${k}, ${Y}, 0x${B.toString(16)}) [path=${k}]`);let M=new SharedArrayBuffer(4+64),G=new Int32Array(M,0,1);G[0]=-1;let j=new DataView(M,4);ie(["path_filestat_get",{sharedBuffer:M,fd:N,path:k,lookupFlags:O}]),Atomics.wait(G,0,-1);let J=Atomics.load(G,0);if(V(`path_filestat_get returned ${J}`),J!==0)return J;let ae=j.getBigUint64(0,!0),he=j.getBigUint64(8,!0),Se=j.getUint8(16),xe=j.getBigUint64(24,!0),De=j.getBigUint64(32,!0),be=j.getBigUint64(40,!0),pt=j.getBigUint64(48,!0),it=j.getBigUint64(56,!0);return ge?(P.setBigUint64(B,ae,!0),P.setBigUint64(B+8,he,!0),P.setUint8(B+16,Se),P.setUint32(B+20,Number(xe),!0),P.setBigUint64(B+24,De,!0),P.setBigUint64(B+32,be,!0),P.setBigUint64(B+40,pt,!0),P.setBigUint64(B+48,it,!0)):(P.setBigUint64(B,ae,!0),P.setBigUint64(B+8,he,!0),P.setUint8(B+16,Se),P.setBigUint64(B+24,xe,!0),P.setBigUint64(B+32,De,!0),P.setBigUint64(B+40,be,!0),P.setBigUint64(B+48,pt,!0),P.setBigUint64(B+56,it,!0)),0}function go(N,O,L,Y,B,P,W,k,M){let G=new DataView(te.memory.buffer),j=new Uint8Array(te.memory.buffer),J=new TextDecoder().decode(j.slice(L,L+Y));V(`path_open(dirFd=${N}, lookupFlags=${O}, pathPtr=0x${L.toString(16)}, pathLen=${Y}, openFlags=${B}, fsRightsBase=${P}, fsRightsInheriting=${W}, fdFlags=${k}, openedFdPtr=0x${M.toString(16)}) [path=${J}]`);let ae=new SharedArrayBuffer(4+4),he=new Int32Array(ae,0,1);he[0]=-1;let Se=new Int32Array(ae,4,1);ie(["path_open",{sharedBuffer:ae,dirFd:N,path:J,lookupFlags:O,openFlags:B,fsRightsBase:P,fsRightsInheriting:W,fdFlags:k}]),Atomics.wait(he,0,-1);let xe=Atomics.load(he,0);return V(`path_open returned ${xe}`),xe!==0?xe:(G.setUint32(M,Se[0],!0),0)}function _s(N,O){let{command:L,buf_len:Y,buf_ptr:B}=JSON.parse(N),P=new TextDecoder().decode(new Uint8Array(te.memory.buffer,B,Y));switch(L){case"spawn":{if(O.byteLength<8)return{exitStatus:42,outputSize:0};let W=new SharedArrayBuffer(4+4),k=new Int32Array(W,0,1);k[0]=-1;let{path:M,args:G,extended_env:j,redirects_ptr:J,n_redirects:ae,background:he}=JSON.parse(P);V(`${M} ${G} ${j} ${he} ${J}, ${ae}`);let Se=new DataView(te.memory.buffer),xe=[],De=J;for(let zt=0;zt<ae;zt++){let Ct=De,Rn=Se.getUint32(De+8,!0),en=Se.getUint32(De+8+4,!0);De+=8+4+4;let fr={type:en,fd_dst:Rn,path:void 0,fd_src:void 0};switch(en){case eo:case to:case rs:case ns:{let tn=Se.getUint32(Ct,!0),lr=Se.getUint32(Ct+4,!0),ys=new TextDecoder().decode(Se.buffer.slice(tn,tn+lr));fr.path=ys;break}case qr:case ro:case no:{let tn=Se.getUint32(Ct,!0);fr.fd_src=tn;break}case Wn:break;default:return V(`Spawn: redirect type ${en} not found.`),{exitStatus:28,outputSize:0}}xe.push(fr),V(`Redirect[${zt}] = type: ${fr.type}, fd_dst: ${fr.fd_dst}, path: ${fr.path}, fd_src: ${fr.fd_src}`)}ie(["spawn",{path:M,args:G,env:{...qe,...j},sharedBuffer:W,background:he,redirects:xe}]),Atomics.wait(k,0,-1);let be=Atomics.load(k,0),pt=new Int32Array(W,4,1),it=new Uint32Array(2),Yt=0;it[0]=0,it[1]=Atomics.load(pt,0),be!==0&&(V(`error: spawned process returned ${be}`),be===45?(it[0]=45,Yt=1):Yt=be);let ur=new Uint8Array(it.buffer,0,8);return O.set(ur,0),{exitStatus:Yt,outputSize:8}}case"chdir":{let W=new SharedArrayBuffer(4),k=new Int32Array(W,0,1);k[0]=-1;let{dir:M}=JSON.parse(P);V(`chdir(${M})`);let G=is(M);ie(["chdir",{dir:G,sharedBuffer:W}]),Atomics.wait(k,0,-1);let j=Atomics.load(k,0);return V(`chdir returned ${j}`),{exitStatus:j,outputSize:0}}case"getcwd":{let{buf_len:W}=JSON.parse(P);V(`getcwd(${W})`);let k=new SharedArrayBuffer(4+4+W),M=new Int32Array(k,0,1),G=new Uint32Array(k,4,1),j=new Uint8Array(k,8,W);M[0]=-1,ie(["getcwd",{bufLen:W,sharedBuffer:k}]),Atomics.wait(M,0,-1);let J=Atomics.load(M,0),ae=J===0?new TextDecoder().decode(j.slice(0,G[0])):void 0;return V(`getcwd returned ${ae}`),O.byteLength<=G[0]?{exitStatus:42,outputSize:0}:(O.set(j.slice(0,G[0]),0),O.set([0],G[0]),{exitStatus:J,outputSize:G[0]})}case"set_env":{let W=new SharedArrayBuffer(4),k=new Int32Array(W,0,1);k[0]=-1;let{key:M,value:G}=JSON.parse(P);return V(`set_env(${M}, ${G})`),ie(["set_env",{key:M,value:G,sharedBuffer:W}]),Atomics.wait(k,0,-1),Atomics.load(k,0)===0&&(G===void 0?delete qe[M]:qe[M]=G),{exitStatus:0,outputSize:0}}case"set_echo":{let W=new SharedArrayBuffer(4),k=new Int32Array(W,0,1);k[0]=-1;let{echo:M}=JSON.parse(P);return V(`set_echo(${M})`),ie(["set_echo",{shouldEcho:M,sharedBuffer:W}]),Atomics.wait(k,0,-1),{exitStatus:0,outputSize:0}}case"isatty":{if(O.byteLength<4)return{exitStatus:42,outputSize:0};let W=new SharedArrayBuffer(8),k=new Int32Array(W,0,1);k[0]=-1;let{fd:M}=JSON.parse(P);V(`isatty(${M})`),ie(["isatty",{sharedBuffer:W,fd:M}]),Atomics.wait(k,0,-1);let G=Atomics.load(k,0),j=new Uint8Array(W,4,4);return O.set(j.slice(0,4),0),{exitStatus:G,outputSize:4}}case"getpid":{if(O.byteLength<4)return{exitStatus:42,outputSize:0};let W=new SharedArrayBuffer(8),k=new Int32Array(W,0,1),M=new Int32Array(W,4,1);k[0]=-1,M[0]=-1,V("getpid()"),ie(["getpid",{sharedBuffer:W}]),Atomics.wait(k,0,-1);let G=new Uint8Array(W,4,4);return O.set(G,0),{exitStatus:0,outputSize:4}}case"event_source_fd":{if(O.byteLength<4)return{exitStatus:42,outputSize:0};let{event_mask:W}=JSON.parse(P),k=new SharedArrayBuffer(4+4),M=new Int32Array(k,0,1);if(V(`event_source_fd(${W})`),W===Za||W>=1<<ii)return{exitStatus:28,outputSize:0};M[0]=-1,ie(["event_source_fd",{sharedBuffer:k,eventMask:W}]),Atomics.wait(M,0,-1);let G=Atomics.load(M,0),j=new Uint8Array(k,4,4);return O.set(j,0),{exitStatus:G,outputSize:4}}case"attach_sigint":{let{event_source_fd:W}=JSON.parse(P),k=new SharedArrayBuffer(4+4),M=new Int32Array(k,0,1);return M[0]=-1,V(`attach_sigint(${W})`),ie(["attach_sigint",{sharedBuffer:k,fd:W}]),Atomics.wait(M,0,-1),{exitStatus:Atomics.load(M,0),outputSize:0}}case"clean_inodes":{let W=new SharedArrayBuffer(4),k=new Int32Array(W,0,1);return V("clean_inodes()"),k[0]=-1,ie(["clean_inodes",{sharedBuffer:W}]),Atomics.wait(k,0,-1),{exitStatus:Atomics.load(k,0),outputSize:0}}case"kill":{let{process_id:W,signal:k}=JSON.parse(P),M=new SharedArrayBuffer(4),G=new Int32Array(M,0,1);return G[0]=-1,V(`kill(${W}, ${k})`),ie(["kill",{sharedBuffer:M,processId:W,signalNumber:k}]),Atomics.wait(G,0,-1),{exitStatus:Atomics.load(G,0),outputSize:0}}case"ioctl":{let{fd:W,cmd:k}=JSON.parse(P),{size:M,rw:G,func:j}=ai(BigInt(k)),J=new SharedArrayBuffer(4+M),ae=new Int32Array(J,0,1),he=new Uint8Array(J,4,M);V(`ioctl(${W}, ${k})`),ae[0]=-1,(G===3||G===1)&&he.set(O),ie(["ioctl",{sharedBuffer:J,fd:W,command:j}]),Atomics.wait(ae,0,-1);let Se=0;return(G===3||G===2)&&(O.set(he),Se=M),{exitStatus:Atomics.load(ae,0),outputSize:Se}}case"mount":{let{source_fd:W,source:k,source_len:M,target_fd:G,target:j,target_len:J,filesystemtype:ae,filesystemtype_len:he,mountflags:Se,data:xe,data_len:De}=JSON.parse(P),be=new Uint8Array(te.memory.buffer),pt=new TextDecoder().decode(be.slice(k,k+M)),it=new TextDecoder().decode(be.slice(j,j+J)),Yt=new TextDecoder().decode(be.slice(ae,ae+he)),ur=new TextDecoder().decode(be.slice(xe,xe+De));V(`mount(${W}, "${pt}", ${M}, ${G}, "${it}", ${J}, "${Yt}", ${he}, ${Se}, "${ur}", ${De})`);let zt=new SharedArrayBuffer(4),Ct=new Int32Array(zt,0,1);Ct[0]=-1,ie(["mount",{sharedBuffer:zt,sourceFd:W,sourcePath:pt,targetFd:G,targetPath:it,filesystemType:Yt,mountFlags:Se,data:ur}]),Atomics.wait(Ct,0,-1);let Rn=Atomics.load(Ct,0);return V(`mount returned ${Rn}`),{exitStatus:Rn,outputSize:0}}case"umount":{let{path:W,path_len:k}=JSON.parse(P),M=new Uint8Array(te.memory.buffer),G=new TextDecoder().decode(M.slice(W,W+k));V(`umount("${G}", ${k}`);let j=new SharedArrayBuffer(4),J=new Int32Array(j,0,1);J[0]=-1,ie(["umount",{path:G,sharedBuffer:j}]),Atomics.wait(J,0,-1);let ae=Atomics.load(J,0);return V(`umount returned ${ae}`),{exitStatus:ae,outputSize:0}}case"mknod":{let{path:W,dev:k}=JSON.parse(P);V(`mknod("${W}", ${k})`);let M=new SharedArrayBuffer(4),G=new Int32Array(M,0,1);G[0]=-1,ie(["mknod",{sharedBuffer:M,path:W,dev:k}]),Atomics.wait(G,0,-1);let j=Atomics.load(G,0);return V(`mknod returned ${j}`),{exitStatus:j,outputSize:0}}case"uname":{let{buf_len:W,name_type:k}=JSON.parse(P);V(`uname(${W})`);let M=new SharedArrayBuffer(4+4+W),G=new Int32Array(M,0,1),j=new Uint32Array(M,4,1),J=new Uint8Array(M,8,W);G[0]=-1,ie(["uname",{sharedBuffer:M,bufLen:W,nameType:k}]),Atomics.wait(G,0,-1);let ae=Atomics.load(G,0),he=ae===0?new TextDecoder().decode(J.slice(0,j[0])):void 0;return V(`uname returned ${he}`),O.byteLength<=j[0]?{exitStatus:42,outputSize:0}:(O.set(J.slice(0,j[0]),0),O.set([0],j[0]),{exitStatus:ae,outputSize:j[0]})}default:throw V(`Special command ${L} not found.`),Error(`Special command '${L} not found.`)}}function mo(N,O,L,Y,B,P){V(`path_readlink(${N}, ${O}, ${L}, ${Y}, ${B}, ${P})`);let W=new Uint8Array(te.memory.buffer),k=new DataView(te.memory.buffer),M=new TextDecoder().decode(W.slice(O,O+L));if(V(`path is ${M}, buffer_len = ${B}, fd = ${N}`),M[0]==="!"){let Se=Y!==0?new Uint8Array(te.memory.buffer,Y,B):new Uint8Array,{exitStatus:xe,outputSize:De}=_s(M.slice(1),Se);return xe!==42&&Y!==0&&k.setUint32(P,De,!0),xe}let G=new SharedArrayBuffer(4+B+4),j=new Int32Array(G,0,1);j[0]=-1;let J=new Int32Array(G,4,1),ae=new Uint8Array(G,8,B);ie(["path_readlink",{sharedBuffer:G,fd:N,path:M,bufferLen:B}]),Atomics.wait(j,0,-1);let he=Atomics.load(j,0);return he!==0?he:(W.set(ae,Y),k.setUint32(P,J[0],!0),0)}function ps(N,O,L){V(`path_remove_directory(${N}, ${O}, ${L})`);let Y=new Uint8Array(te.memory.buffer),B=new TextDecoder().decode(Y.slice(O,O+L)),P=new SharedArrayBuffer(4),W=new Int32Array(P,0,1);return W[0]=-1,ie(["path_remove_directory",{sharedBuffer:P,fd:N,path:B}]),Atomics.wait(W,0,-1),Atomics.load(W,0)}function Eo(N,O,L,Y,B,P){let W=new Uint8Array(te.memory.buffer),k=new TextDecoder().decode(W.slice(O,O+L)),M=new TextDecoder().decode(W.slice(B,B+P));V(`path_rename(${N}, ${k}, ${L}, ${Y}, ${M}, ${P})`);let G=new SharedArrayBuffer(4),j=new Int32Array(G,0,1);return j[0]=-1,ie(["path_rename",{sharedBuffer:G,oldFd:N,oldPath:k,newFd:Y,newPath:M}]),Atomics.wait(j,0,-1),Atomics.load(j,0)}function yo(N,O,L){V(`path_unlink_file(${N}, ${O}, ${L})`);let Y=new Uint8Array(te.memory.buffer),B=new TextDecoder().decode(Y.slice(O,O+L)),P=new SharedArrayBuffer(4),W=new Int32Array(P,0,1);return W[0]=-1,ie(["path_unlink_file",{sharedBuffer:P,fd:N,path:B}]),Atomics.wait(W,0,-1),Atomics.load(W,0)}function Ss(){return Ge()}function Io(N,O){V(`fd_prestat_get(${N}, 0x${O.toString(16)})`);let L=new DataView(te.memory.buffer),Y=new SharedArrayBuffer(4+4+1),B=new Int32Array(Y,0,1);B[0]=-1;let P=new Int32Array(Y,4,1),W=new Uint8Array(Y,8,1);ie(["fd_prestat_get",{sharedBuffer:Y,fd:N}]),Atomics.wait(B,0,-1);let k=Atomics.load(B,0);return k===0?(L.setUint8(O,W[0]),L.setUint32(O+4,P[0],!0),V(`fd_prestat_get returned filetype type ${W[0]} of size ${P[0]}`)):V(`fd_prestat_get returned ${k}`),k}function Cr(N,O,L){V(`fd_prestat_dir_name(${N}, 0x${O.toString(16)}, ${L})`);let Y=new Uint8Array(te.memory.buffer),B=new SharedArrayBuffer(4+L),P=new Int32Array(B,0,1);P[0]=-1;let W=new Uint8Array(B,4,L);ie(["fd_prestat_dir_name",{sharedBuffer:B,fd:N,pathLen:L}]),Atomics.wait(P,0,-1);let k=Atomics.load(P,0);k===0&&Y.set(W,O);let M=new TextDecoder().decode(Y.slice(O,O+L));return V(`prestat returned ${k}, "${M}" of size ${L}`),k}function wo(){return Ge()}function Zr(){return Ge()}function Ao(){return Ge()}function bo(N,O,L,Y,B){V(`path_symlink(0x${N.toString(16)}, ${O}, ${L}, 0x${Y.toString(16)}, ${B})`);let P=new Uint8Array(te.memory.buffer),W=new TextDecoder().decode(P.slice(N,N+O)),k=new TextDecoder().decode(P.slice(Y,Y+B));V(`path_symlink: ${k} --> ${W}`);let M=new SharedArrayBuffer(4),G=new Int32Array(M,0,1);G[0]=-1,ie(["path_symlink",{sharedBuffer:M,targetPath:W,linkFd:L,linkPath:k}]),Atomics.wait(G,0,-1);let j=Atomics.load(G,0);return V(`path_symlink returned ${j}`),j}function vs(N,O,L,Y,B,P,W){V(`path_link(${N}, ${O}, ${L}, ${Y}, ${B}, ${P}, ${W})`);let k=new Uint8Array(te.memory.buffer),M=new TextDecoder().decode(k.slice(L,L+Y)),G=new TextDecoder().decode(k.slice(P,P+W));V(`path_link: ${G} -> ${M}`);let j=new SharedArrayBuffer(4),J=new Int32Array(j,0,1);return J[0]=-1,ie(["path_link",{sharedBuffer:j,oldFd:N,oldFlags:O,oldPath:M,newFd:B,newPath:G}]),Atomics.wait(J,0,-1),Atomics.load(J,0)}function To(N,O,L,Y){V(`poll_oneoff(${N}, ${O}, ${L}, ${Y})`);let B=new DataView(te.memory.buffer),P=new SharedArrayBuffer(32*L);var W=BigInt(Number.MAX_SAFE_INTEGER);let k=new Array,M,G;for(let he=0;he<L;he+=1){let Se=B.getBigUint64(N,!0);N+=8;let xe=B.getUint8(N);N+=1;let De;switch(xe){case On:{N+=7;let be=B.getUint32(N,!0);N+=8;let pt=B.getBigUint64(N,!0);N+=8;let it=B.getBigUint64(N,!0);N+=8;let Yt=B.getUint16(N,!0);N+=8;let ur=Yt===1;V(`clockId = ${be}, timeout = ${pt}, precision = ${it}, absolute = ${ur}`);let zt=ss(be,Jr),Ct=ur?pt:zt+pt;W>Ct&&(W=Ct,G={clockId:be,timeout:pt,precision:it,flags:Yt},M=Se);continue}case Ee:case qa:{N+=7;let be=B.getUint32(N,!0);N+=32,V(`read data from fd = ${be}`),De={fd:be};break}default:return 28}De&&k.push({userdata:Se,eventType:xe,event:De})}G&&k.push({userdata:M,eventType:On,event:G});let j=new SharedArrayBuffer(4+4),J=new Int32Array(j,0,2);J[0]=-1,J[1]=0,k.length>0&&(ie(["poll_oneoff",{sharedBuffer:j,subs:k,eventBuf:P,timeout:W}]),Atomics.wait(J,0,-1));let ae=J[1];return new Uint8Array(te.memory.buffer,O,ae*32).set(new Uint8Array(P,0,ae*32)),B.setInt32(Y,ae,!0),0}let Ge=()=>(V(`> Entering stub ${new Error().stack.split(`
`)[2].trim().split(" ")[1]}`),0);function fi(){return Ge()}function li(){return Ge()}function di(){return Ge()}function gs(N,O){V(`fd_fdstat_set_flags(${N}, ${O})`);let L=new SharedArrayBuffer(4),Y=new Int32Array(L,0,1);Y[0]=-1,ie(["fd_fdstat_set_flags",{sharedBuffer:L,fd:N,flags:O}]),Atomics.wait(Y,0,-1);let B=Atomics.load(Y,0);return V(`fd_fdstat_set_flags returned error: ${B}`),B}function Co(){return Ge()}function Oo(N,O){V(`fd_renumber(${N}, ${O})`);let L=new SharedArrayBuffer(4),Y=new Int32Array(L,0,1);Y[0]=-1,ie(["fd_renumber",{sharedBuffer:L,fd:N,newFd:O}]),Atomics.wait(Y,0,-1);let B=Atomics.load(Y,0);return V(`fd_renumber returned error: ${B}`),B}function Wo(N,O){V(`fd_tell(${N}, 0x${O.toString(16)})`);let L=new DataView(te.memory.buffer),Y=new SharedArrayBuffer(8+4),B=new BigInt64Array(Y,0,1),P=new Int32Array(Y,8,1);P[0]=-1,ie(["fd_tell",{sharedBuffer:Y,fd:N}]),Atomics.wait(P,0,-1);let W=Atomics.load(P,0);return W===0?(L.setBigUint64(O,B[0],!0),V(`fd_tell returned offset: ${B[0]}`)):V(`fd_tell returned error: ${W}`),W}function xo(N,O,L,Y,B,P,W){V(`path_filestat_set_times(${N}, ${O}, ${L}, ${Y}, ${B}, ${P}, ${W})`);let k=new Uint8Array(te.memory.buffer),M=new TextDecoder().decode(k.slice(L,L+Y)),G=new SharedArrayBuffer(4),j=new Int32Array(G,0,1);j[0]=-1,ie(["path_filestat_set_times",{sharedBuffer:G,fd:N,flags:O,path:M,st_atim:B,st_mtim:P,fst_flags:W}]),Atomics.wait(j,0,-1);let J=Atomics.load(j,0);return V(`path_filestat_set_times returned ${J}`),J}function Ro(){return Ge()}function ms(){return Ge()}function Fo(){return Ge()}function hi(){return Ge()}function ko(){return Ge()}function Es(){return Ge()}function er(N,O,L,Y){V(`fd_filestat_set_times(${N}, ${O}, ${L}, ${Y})`);let B=new SharedArrayBuffer(4),P=new Int32Array(B,0,1);P[0]=-1,ie(["fd_filestat_set_times",{sharedBuffer:B,fd:N,st_atim:O,st_mtim:L,fst_flags:Y}]),Atomics.wait(P,0,-1);let W=Atomics.load(P,0);return V(`fd_filestat_set_times returned ${W}`),W}return{setModuleInstance:ht,environ_sizes_get:$e,args_sizes_get:Tt,fd_prestat_get:Io,fd_fdstat_get:ls,fd_filestat_get:lo,fd_read:ho,fd_write:uo,fd_prestat_dir_name:Cr,environ_get:_t,args_get:fs,poll_oneoff:To,proc_exit:oi,fd_close:fo,fd_seek:hs,random_get:ci,clock_time_get:ui,fd_readdir:po,path_create_directory:So,path_filestat_get:vo,path_link:vs,path_open:go,path_readlink:mo,path_remove_directory:ps,path_rename:Eo,path_unlink_file:yo,sched_yield:Ss,fd_datasync:wo,fd_filestat_set_size:Zr,fd_sync:Ao,path_symlink:bo,clock_res_get:ds,fd_advise:Es,fd_allocate:li,fd_fdstat_set_flags:gs,fd_fdstat_set_rights:di,fd_tell:Wo,fd_filestat_set_times:er,fd_pread:_o,fd_advice:fi,fd_pwrite:Co,fd_renumber:Oo,path_filestat_set_times:xo,proc_raise:Ro,sock_accept:ms,sock_recv:Fo,sock_send:hi,sock_shutdown:ko}}async function us(ge,te){let ht=WebAssembly.Module.imports(ge),$e;if(ht[0].module==="wasi_unstable")$e=te(!0);else if(ht[0].module==="wasi_snapshot_preview1")$e=te(!1);else throw Error("Unsupported wasm format");let _t={wasi_snapshot_preview1:$e,wasi_unstable:$e};if(WebAssembly.instantiate){V("WebAssembly.instantiate");let Tt=await WebAssembly.instantiate(ge,_t);$e.setModuleInstance(Tt);try{Tt.exports._start(),cr(0)}catch(fs){V(`error: ${fs}`),cr(255)}}else V("WebAssembly.instantiate is not supported")}async function Tr(){if(Vt&&Ve){V("Loading a module");try{await us(Ve,co)}catch(ge){V(`Failed instantiating WASM module: ${ge}`),cr(255)}V("done.")}else setTimeout(()=>{Tr()},0)}}.toString().slice(11,-1)],{type:"text/javascript"}));var Tf=BigInt(1),hr=BigInt(2),Cf=BigInt(4),Bg=BigInt(8),Of=BigInt(16),Wf=BigInt(32),_r=BigInt(64),xf=BigInt(128),Mg=BigInt(256),$g=BigInt(512),Gg=BigInt(1024),Hg=BigInt(2048),Vg=BigInt(4096),Yg=BigInt(8192),zg=BigInt(16384),jg=BigInt(32768),Kg=BigInt(65536),Xg=BigInt(131072),Yo=BigInt(262144),qg=BigInt(524288),Qg=BigInt(1048576),gi=BigInt(2097152),Jg=BigInt(4194304),Rf=BigInt(8388608),Zg=BigInt(16777216),em=BigInt(33554432),tm=BigInt(67108864),Ff=BigInt(134217728),rm=BigInt(268435456),ze=BigInt(536870911),Rr=Tf|hr|Of|xf|gi|Ff,Fr=Tf|_r|Of|xf|gi|Ff;var kf=0,jt=1,Dn=2;var je=1,st=2,sn=4,Nn=8,Df=0;var Nf=2,Ln=0,kr=1,Un=2,zo=1,jo=2,Ko=4,Xo=8;var Ze=0;var Lf=1<<0,Kt=1<<1,qo=0,Qo=1,Jo=2,Zo=3,Uf=4,Pf=5,Bf=6,Mf=7;var mi=class{fdstat;path;getFdstat(){return this.fdstat}async initialize(e){return this.path=e,0}getPath(){return this.path}async setFdstatFlags(e){return this.fdstat.fs_flags=e,0}async setFdstatRights(e,t){return this.fdstat.fs_rights_base=e,this.fdstat.fs_rights_inheriting=t,0}async ioctl(e,t){return 59}async mountFs(e){return{err:58,fs:void 0}}duplicateFd(){}},Dr=class extends mi{isatty(){return!1}async readdir(e){return{err:54,dirents:void 0}}},Nr=class extends mi{async close(){return 31}async read(e,t){return{err:31,buffer:void 0}}async read_str(){return{err:31,content:void 0}}async pread(e,t){return{err:31,buffer:void 0}}async arrayBuffer(){return{err:31,buffer:void 0}}async write(e){return{err:31,written:-1n}}async pwrite(e,t){return{err:31,written:-1n}}async seek(e,t){return{err:31,offset:-1n}}async writableStream(){return{err:31,stream:void 0}}isatty(){return!1}async truncate(e){return 31}addPollSub(e,t,n){return Promise.resolve({userdata:e,error:58,eventType:t,nbytes:0n})}},Pn=class extends mi{constructor(e,t,n){super(),this.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:n,fs_filetype:2}}async getFilestat(){return{err:8,filestat:void 0}}async setFilestatTimes(e,t){return 8}async close(){return 8}async read(e,t){return{err:8,buffer:void 0}}async read_str(){return{err:8,content:void 0}}async pread(e,t){return{err:8,buffer:void 0}}async arrayBuffer(){return{err:8,buffer:void 0}}async write(e){return{err:8,written:-1n}}async pwrite(e,t){return{err:8,written:-1n}}async seek(e,t){return{err:8,offset:-1n}}async readdir(e){return{err:8,dirents:void 0}}async writableStream(){return{err:8,stream:void 0}}async truncate(e){return 8}addPollSub(e,t,n){return Promise.resolve({userdata:e,error:58,eventType:t,nbytes:0n})}};var on=class extends Pn{eventMask;signalSub;events;stopResolver;constructor(e,t,n,i){super(e,t,n),this.eventMask=i,this.events=Ze,this.stopResolver=void 0,this.signalSub=void 0}getFilestat(){return Promise.resolve({err:0,filestat:{dev:0n,ino:0n,filetype:this.fdstat.fs_filetype,nlink:0n,size:0n,mtim:0n,atim:0n,ctim:0n}})}async setFilestatTimes(e,t){return 0}async close(){return this.stopResolver&&this.stopResolver.resolve(this),0}async read(e,t){if(e<4)return{err:42,buffer:void 0};let n=new ArrayBuffer(4),i=new Uint32Array(n);return i[0]=this.events,this.events=Ze,Promise.resolve({err:0,buffer:n})}isatty(){return!1}addPollSub(e,t,n){return new Promise(i=>{this.events!==Ze?i({userdata:e,eventType:this.events,nbytes:4n,error:0}):this.signalSub={pid:n,userdata:e,tag:t,resolve:i}})}sendEvents(e){this.events|=e&this.eventMask,this.events!==Ze&&this.signalSub!==void 0&&(this.signalSub.resolve({userdata:this.signalSub.userdata,error:0,eventType:jt,nbytes:4n}),this.signalSub=void 0)}obtainEvents(e){let t=this.events&e;return this.events^=t,t}makeNotifier(e){return this.eventMask&Kt?(this.stopResolver!==void 0&&this.stopResolver.resolve(this),this.stopResolver=e,0):(e.reject(),28)}};function $f(r){let e=[],t="",n=r,i="",s=0;for(;n!=="";)n.indexOf("/")!==-1?i=n.substr(0,n.indexOf("/")):i=n,n=n.substr(i.length+1),i===".."?s>0&&(s-=1):i==="."||i!=""&&(e[s]=i,s+=1);return t=`/${e.slice(0,s).join("/")}`,t=t.replace("/./","/"),t}function tc(r){let e=Math.trunc(r),t=BigInt(Math.round((r-e)*1e6));return BigInt(e)*BigInt(1e6)+t}function Me(r){return r=="/"?"/":r.slice(r.lastIndexOf("/")+1)}function Dt(r){let e=r.lastIndexOf("/");return e<1&&e++,r.slice(0,e)}function Os(r){switch(r.toLowerCase().trim()){case"yes":case"on":case"true":return!0;case"no":case"off":case"false":return!1;default:return}}function Gf(r){return`[${String((window.performance.now()/1e3).toFixed(6)).padStart(12," ")}] ${r}`}function Ws(r){let e=["B","kB","MB","GB","TB","PB"],t=r,n=0;for(;t>=1024&&n+1<e.length;)t/=1024,n+=1;return`${t.toFixed(1)}${e[n]}`}async function Hf(r,e,t,n,i){let s=i.getDesc(1),a=`  PID TTY          TIME CMD\r
`;for(let[c,u]of Object.entries(r.processInfos)){let f=new Date,h=Math.floor(f.getTime()/1e3)-u.timestamp,p=h%60,g=(h-p)/60%60,y=(h-p-g*60)/60/60;a+=`${`     ${c}`.slice(-5)} pts/0    ${`00${y}`.slice(-2)}:${`00${g}`.slice(-2)}:${`00${p}`.slice(-2)} ${u.cmd.split("/").slice(-1)[0]}\r
`}a+=`-1 pts/0    00:00:00 ps\r
`;let o=new TextEncoder().encode(a);return await s.write(o.buffer),s.close(),0}async function Vf(r,e,t,n,i){let s=i.getDesc(1),a=performance.memory.jsHeapSizeLimit,o=performance.memory.usedJSHeapSize,c="",u="",f="";t.length>1&&t[1]==="-h"?(c=Ws(a),u=Ws(o),f=Ws(a-o)):(c=`${Math.round(a/1024)}`,u=`${Math.round(o/1024)}`,f=`${Math.round((a-o)/1024)}`);let h=`               total        used   available\r
`;h+=`Mem:      ${`          ${c}`.slice(-10)}  ${`          ${u}`.slice(-10)}  ${`          ${f}`.slice(-10)}\r
`;let p=new TextEncoder().encode(h);return await s.write(p.buffer),0}async function Yf(r,e,t,n,i){return location.reload(),0}function Ei(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function p_(r,e){let t=Promise.resolve().then(()=>{let n=indexedDB.open(r);return n.onupgradeneeded=()=>n.result.createObjectStore(e),Ei(n)});return(n,i)=>t.then(s=>i(s.transaction(e,n).objectStore(e)))}var rc;function xs(){return rc||(rc=p_("keyval-store","keyval")),rc}function zf(r,e=xs()){return e("readonly",t=>Ei(t.get(r)))}function jf(r,e,t=xs()){return t("readwrite",n=>(n.put(e,r),Ei(n.transaction)))}function Kf(r,e=xs()){return e("readwrite",t=>(t.delete(r),Ei(t.transaction)))}function S_(r,e){return r("readonly",t=>(t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ei(t.transaction)))}function Xf(r=xs()){let e=[];return S_(r,t=>e.push(t.key)).then(()=>e)}async function nc(r){Kf(r)}async function pr(r){return zf(r)}async function Ur(r,e){jf(r,e)}async function qf(){return Xf()}async function un(r){return(await(await navigator.storage.getDirectory()).resolve(r)).join("/")}async function Qf(r,e){return navigator.storage.getDirectory().then(async t=>await t.getDirectoryHandle(r,{create:e}))}async function Jf(){try{let r=await showDirectoryPicker();return{err:0,handle:r}}catch{return{err:44,handle:void 0}}}function fn(r,e){switch(r.name){case"NotAllowedError":return 2;case"TypeMismatchError":return e?54:31;case"NotFoundError":return 44;case"InvalidModificationError":return 55;case"QuotaExceededError":return 19;default:return 28}}function Zf(r,e,t,n,i){r.keepMetadata=i,r.keepMetadata&&(r.metadataPath=""),r.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:n,fs_filetype:void 0}}async function wi(r){r.keepMetadata&&r.metadataPath===""&&(r.metadataPath=await un(r.handle))}async function el(r,e,t){if(r.keepMetadata){let n=await pr(r.metadataPath);e!==void 0&&(n.atim=e),t!==void 0&&(n.mtim=t),(e!==void 0||t!==void 0)&&await Ur(r.metadataPath,n)}return 0}function Ai(){return BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))}var Ot=class extends Dr{handle;static get defaultFilestat(){return{dev:1n,ino:Ai(),filetype:4,nlink:1n,size:0n,atim:0n,mtim:0n,ctim:0n}}metadataPath;keepMetadata;cursor;writer;file;constructor(e,t,n,i,s){super(),this.handle=e,this.cursor=0n,Zf(this,t,n,i,s),this.file=void 0}async initialize(e){let t=await super.initialize(e);if(t!==0)return t;await wi(this);let n=BigInt((await this.__getFile()).file?.size),i;if(this.keepMetadata){let s=await pr(this.metadataPath);if(s==null)return 44;i=s.filetype}else i=Ot.defaultFilestat.filetype;return this.fdstat.fs_filetype=i,this.fdstat.fs_flags&1&&(this.cursor=n),0}async getWriter(){return this.writer||(this.writer=await this.handle.createWritable({keepExistingData:!0})),this.writer}async __getFile(){if(!this.file)try{let e=await this.handle.getFile();return this.file=e,{err:0,file:e}}catch{return{err:2,file:void 0}}return{err:0,file:this.file}}async read(e){let{err:t,file:n}=await this.__getFile();if(t!==0)return{err:t,buffer:void 0};let i=Number(this.cursor)+e,s=await n.slice(Number(this.cursor),Number(i)).arrayBuffer();return this.cursor+=BigInt(s.byteLength),{err:0,buffer:s}}async read_str(){let{err:e,file:t}=await this.__getFile();return e!==0?{err:e,content:void 0}:{err:0,content:await t.text()}}async pread(e,t){let{err:n,file:i}=await this.__getFile();if(n!==0)return{err:n,buffer:void 0};let s=BigInt((await this.__getFile()).file?.size),a=s<t+BigInt(e)?s:this.cursor+BigInt(e);return{err:0,buffer:await i.slice(Number(t),Number(a)).arrayBuffer()}}async seek(e,t){let n=BigInt((await this.__getFile()).file?.size);switch(t){case kr:if(this.cursor+e<0n)return{offset:this.cursor,err:28};this.cursor+=e;break;case Ln:if(e<0n)return{offset:this.cursor,err:28};this.cursor=e;break;case Un:if(n<-e)return{offset:this.cursor,err:28};this.cursor=n+e;break;default:return{offset:this.cursor,err:28}}return{err:0,offset:this.cursor}}async setFilestatTimes(e,t){return el(this,e,t)}async write(e){await(await this.getWriter()).write({type:"write",position:Number(this.cursor),data:e});let t=BigInt(e.byteLength);return this.cursor+=t,{err:0,written:t}}async pwrite(e,t){await(await this.getWriter()).write({type:"write",position:Number(t),data:e});let n=BigInt(e.byteLength);return{err:0,written:n}}async writableStream(){return{err:0,stream:await this.getWriter()}}async truncate(e){try{await(await this.getWriter()).write({type:"truncate",size:Number(e)})}catch(t){return t instanceof DOMException?fn(t,!1):28}return await this.flush(),this.cursor=0n,0}async arrayBuffer(){let e=await(await this.handle.getFile()).arrayBuffer();return{err:0,buffer:e}}async flush(){if(this.writer){let e=this.writer;this.writer=null;try{await e?.close()}catch{}}}async close(){return await this.flush(),0}async getFilestat(){let e=this.keepMetadata?await pr(this.metadataPath):Ot.defaultFilestat;return e===void 0?{err:56,filestat:void 0}:(e.size=BigInt((await this.__getFile()).file?.size),{err:0,filestat:e})}async addPollSub(e,t,n){let i=BigInt(this.file?this.file.size:(await this.__getFile()).file.size);return{userdata:e,error:0,eventType:t,nbytes:i}}},Rs=class extends Nr{handle;metadataPath;keepMetadata;entries;constructor(e,t,n,i,s){super(),this.handle=e,Zf(this,t,n,i,s),this.fdstat.fs_filetype=3,this.entries=[]}async initialize(e){let t=await super.initialize(e);return t!==0?t:(await wi(this),0)}async getFilestat(){if(this.keepMetadata){let e=await pr(this.metadataPath);return e===void 0?{err:56,filestat:void 0}:{err:0,filestat:e}}else return{err:0,filestat:Rs.defaultFilestat}}async setFilestatTimes(e,t){return el(this,e,t)}async readdir(e){let t=0;if(e||this.entries.length===0){this.entries=[];var n=1n;for await(let[i,s]of this.handle.entries()){if(i.endsWith(".crswap"))continue;let a;this.keepMetadata?a=await pr(`${this.metadataPath}/${i}`):a=s instanceof FileSystemDirectoryHandle?Rs.defaultFilestat:Ot.defaultFilestat,a===void 0?t=56:this.entries.push({d_next:n++,d_ino:a.ino,name:i,d_type:a.filetype})}}return{err:t,dirents:this.entries}}},Nt=Rs;xr(Nt,"defaultFilestat",{dev:1n,ino:Ai(),filetype:3,nlink:1n,size:4096n,atim:0n,mtim:0n,ctim:0n});var Bn=class{rootHandle;keepMetadata;fsname(){return"FsaFilesystem"}getRootHandle(){return this.rootHandle}async getHandle(e,t,n){let i,s,a=!0,o=n===void 0?this.getRootHandle():n;try{for(e.startsWith("/")?s=1:s=0,i=e.indexOf("/",s);i!=-1;i=e.indexOf("/",s))o=await o.getDirectoryHandle(e.slice(s,i)),s=i+1;let c;a=t;let u=e.slice(s);return u===""?c=o:t?c=await o.getDirectoryHandle(u):c=await o.getFileHandle(u),{handle:c,err:0,index:-1}}catch(c){let u;try{u=fn(c,a)}catch{u=28}return{index:i,err:u,handle:o}}}async unlinkat(e,t,n){let i;if(e!==void 0)if(e instanceof Nt)i=e.handle;else return 28;let{err:s,handle:a}=await this.getHandle(Dt(t),!0,i);if(s!==0)return s;let o=Me(t);try{let c=(await this.getHandle(o,n,a)).err;return c!==0?c:(a.removeEntry(o,{recursive:!1}),await nc(`${await un(a)}/${t}`),0)}catch(c){let u=28;return c instanceof DOMException&&(u=fn(c,!0)),u}}async mkdirat(e,t){let n;if(e!==void 0)if(e instanceof Nt)n=e.handle;else return 28;let{err:i,handle:s}=await this.getHandle(Dt(t),!0,n);if(i!==0)return i;let a=Me(t);if({err:i}=await this.getHandle(a,!0,s),i===0)return 20;if(i!==44)return i;try{s=await s.getDirectoryHandle(t,{create:!0})}catch(o){if(o instanceof DOMException){let c=fn(o,!0);if(c!==0)return c}}return this.keepMetadata&&await Ur(await un(s),{dev:1n,ino:Ai(),filetype:3,nlink:1n,size:4096n,mtim:0n,atim:0n,ctim:0n}),0}async symlinkat(e,t,n){let i;if(t!==void 0)if(t instanceof Nt)i=t.handle;else return 28;let{err:s,handle:a}=await this.getHandle(Dt(n),!0,i);if(s!==0)return s;let o=Me(n);if({err:s}=await this.getHandle(o,!1,a),s===0||s===31)return 20;if(s!==44)return s;let c=await a.getFileHandle(n,{create:!0}),u=await c.createWritable();return await u.write(e),await u.close(),this.keepMetadata&&await Ur(await un(c),{dev:0n,ino:0n,filetype:7,nlink:1n,size:BigInt(e.length),mtim:0n,atim:0n,ctim:0n}),0}async getFilestat(e){if(this.keepMetadata){let t=this.getRootHandle().name+e,n=await pr(t);return{filestat:n,err:n?0:44}}else{let{err:t}=await this.getHandle(e,!0,void 0);switch(t){case 54:return{err:0,filestat:Nt.defaultFilestat};case 0:return{err:0,filestat:Ot.defaultFilestat};default:return{err:t,filestat:void 0}}}}async open(e,t,n,i,s,a,o){let c=await this.getHandle(e,!0,void 0),u=c.err,f=c.index,h;switch(u){case 0:{n&je?n&sn?u=20:u=31:u=c.err,f=c.index,h=new Nt(c.handle,a,i,s,this.keepMetadata);break}case 54:if(f===-1){if(n&st&&!(t&1))break;let p=await this.getHandle(Me(e),!1,c.handle);p.err===0&&(n&je&&n&sn?u=20:n&st||(u=p.err),h=new Ot(p.handle,a,i,s,this.keepMetadata));break}else if(t&1){let p=await this.getHandle(Me(e.slice(0,f)),!1,c.handle);p.err===0&&(h=new Ot(p.handle,a,i,s,this.keepMetadata));break}case 44:{if(n&je&&f===-1)try{let p=await c.handle.getFileHandle(Me(e),{create:!0});u=0,h=new Ot(p,a,i,s,this.keepMetadata),this.keepMetadata&&(h.metadataPath=await un(p),await Ur(h.metadataPath,{dev:1n,ino:Ai(),filetype:4,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n}))}catch(p){p instanceof DOMException?u=fn(p,!1):u=28}break}}return{err:u,index:f,desc:h}}async renameat(e,t,n,i){if(e!==void 0&&!(e instanceof Nt))return 28;let{handle:a,err:o}=await this.getHandle(t,!1,e.handle);if(o===31)return 75;if(o!==0)return o;let c=new Ot(a,0,ze,ze,this.keepMetadata);await wi(c);let u=await c.getFilestat();if(u.err!==0)return u.err;if(u.filestat.filetype===7)return 75;if(n!==void 0&&!(n instanceof Nt))return 28;let{handle:f,err:h}=await this.getHandle(Dt(i),!0,n.handle);if(h!==0)return h;let p=await f.getFileHandle(Me(i),{create:!0}),g=new Ot(p,0,ze,ze,this.keepMetadata);for(await wi(g);;){let{err:y,buffer:A}=await c.read(2048);if(y!==0)return y;if(A.byteLength===0)break;if((await g.write(A)).err!==0)return y}return await c.close(),await g.close(),await Ur(g.metadataPath,u.filestat),await this.unlinkat(e,t,!1),0}async initialize(e){let t=e;this.keepMetadata=t.keepMetadata===void 0?!1:Os(t.keepMetadata);let n=t.create===void 0?!1:Os(t.create);if(t.prompt===void 0?!1:Os(t.prompt)){if(this.keepMetadata||t.name!==void 0||n)return 28;let{err:s,handle:a}=await Jf();if(s===0)this.rootHandle=a;else return s}else if(t.name!==void 0)this.rootHandle=await Qf(t.name,n),this.keepMetadata&&await pr(t.name)===void 0&&await Ur(t.name,Nt.defaultFilestat);else return 28;return 0}async mknodat(e,t,n,i){return 28}async cleanup(){if(!this.keepMetadata)return;let e=this.rootHandle.name;await Promise.all((await qf()).map(async t=>{t.startsWith(e)&&(await this.open(t.replace(e,""),0,0,ze,ze,0,0)).err===44&&await nc(t)}))}};async function Ds(r,e){let[t,n,i]=r.data,s=e.processInfos[t].cmd,a=s.substr(s.lastIndexOf("/")+1);switch(n){case"console":{console.log(`%c [dbg (%c${a}:${t}%c)] %c ${i}`,"background:black; color: white;","background:black; color:yellow;","background: black; color:white;","background:default; color: default;");break}case"proc_exit":{e.processInfos[t].env.DEBUG==="1"&&console.log(`%c [dbg (%c${a}:${t}%c)] %c exited with result code ${i}`,"background:black; color: white;","background:black; color:yellow;","background: black; color:white;","background:default; color: default;"),await e.terminateProcess(t,i);break}case"chdir":{let{dir:c,sharedBuffer:u}=i,f=new Int32Array(u,0,1);e.processInfos[t].cwd=c,Atomics.store(f,0,0),Atomics.notify(f,0);break}case"getcwd":{let{bufLen:c,sharedBuffer:u}=i,f=new Int32Array(u,0,1),h=new Uint32Array(u,4,1),p=new Uint8Array(u,8,c),g=0,y=e.processInfos[t].cwd;c<y.length?(h[0]=c,g=42):(h[0]=y.length,p.set(new TextEncoder().encode(y),0)),Atomics.store(f,0,g),Atomics.notify(f,0);break}case"isatty":{let{sharedBuffer:c,fd:u}=i,f=new Int32Array(c,0,1),h=new Int32Array(c,4,1),p,{fds:g}=e.processInfos[t];g.getDesc(u)!==void 0?(h[0]=Number(g.getDesc(u).isatty()),p=0):p=8,Atomics.store(f,0,p),Atomics.notify(f,0);break}case"getpid":{let{sharedBuffer:c}=i,u=new Int32Array(c,0,1),f=new Int32Array(c,4,1);f[0]=e.processInfos[t].id,Atomics.store(u,0,0),Atomics.notify(u,0);break}case"set_env":{let{key:c,value:u,sharedBuffer:f}=i,h=new Int32Array(f,0,1);e.processInfos[t].env[c]=u,Atomics.store(h,0,0),Atomics.notify(h,0);break}case"set_echo":{let{shouldEcho:c,sharedBuffer:u}=i,f=new Int32Array(u,0,1);e.processInfos[t].shouldEcho=c==="1",Atomics.store(f,0,0),Atomics.notify(f,0);break}case"spawn":{let{path:c,args:u,env:f,sharedBuffer:h,background:p,redirects:g}=i,y=new Int32Array(h,0,1),A=new Int32Array(h,4,1);A[0]=-1,u.splice(0,0,c.split("/").pop());let H=0,$=e.processInfos[t].fds.clone();for(let z=0;z<g.length&&H==0;z++){let se=g[z],pe=se.type,We=se.fd_dst;switch(pe){case qo:case Qo:case Jo:case Zo:{let nt=se.path,bn=je,Tn=0,Qt=0n;switch(pe){case qo:{bn=0,Qt|=Rr;break}case Qo:{bn|=Nn,Qt|=Fr;break}case Jo:{Tn|=1,Qt|=Fr;break}case Zo:{Qt|=Fr|Rr;break}default:{H=1,console.log(`Spawn: program should not enter here for redirect type ${se.type}.`);continue}}let{desc:Jt,err:ti}=await e.filesystem.open(nt,1,bn,Tn,Qt,Qt,t);if(ti!==0){console.log(`Spawn: cannot open file, error: ${ti}`),H=1;break}let ri=$.getDesc(We);ri!==void 0&&ri.close(),$.setFd(We,new Xt(Jt));break}case Uf:case Pf:case Bf:{if($.getDesc(se.fd_src)!==void 0){let nt=$.getDesc(We);nt!==void 0&&nt.close(),$.duplicateFd(se.fd_src,We)}else console.log(`Spawn: cannot duplicate fd=${se.fd_src}, it is closed.`),H=1;break}case Mf:{let nt=$.getDesc(We);nt!==void 0?(nt.close(),$.freeFd(We)):(console.log(`Spawn: cannot close fd=${se.fd_src}, it is already closed.`),H=1);break}default:console.log(`Spawn: redirect type ${se.type} not found.`),H=1}}if(H!=0){Atomics.store(y,0,H),Atomics.notify(y,0);break}let X=!0;switch(c){case"/usr/bin/ps":{let z=await Hf(e,t,u,f,$);Atomics.store(y,0,z),Atomics.notify(y,0);break}case"/usr/bin/free":{let z=await Vf(e,t,u,f,$);Atomics.store(y,0,z),Atomics.notify(y,0);break}case"/usr/bin/reset":{let z=await Yf(e,t,u,f,$);Atomics.store(y,0,z),Atomics.notify(y,0);break}default:{X=!1;let z=e.processInfos[t].terminationNotifier;if(z!==null?z.obtainEvents(Kt)!=0:!1){await $.tearDown(),Atomics.store(y,0,130),Atomics.notify(y,0);break}try{let pe=await e.spawnProcess(t,p?null:y,c,$,u,f,p,e.processInfos[t].cwd);if(Atomics.store(A,0,pe),f.DEBUG==="1"){let We=c.split("/").slice(-1)[0];console.log(`%c [dbg (%c${We}:${pe}%c)] %c spawned by ${a}:${t}`,"background:black; color: white;","background:black; color:yellow;","background: black; color:white;","background:default; color: default;")}}catch{console.log("Failed spawning process")}if(p){let pe=0;(z!==null?z.obtainEvents(Kt)!=0:!1)&&(pe=130),Atomics.store(y,0,pe),Atomics.notify(y,0)}}}X&&await $.tearDown();break}case"fd_prestat_get":{let{sharedBuffer:c,fd:u}=i,f=new Int32Array(c,0,1),h=new Int32Array(c,4,1),p=new Uint8Array(c,8,1),g,{fds:y}=e.processInfos[t];u>2&&u<4?(p[0]=Df,h[0]=Me(y.getDesc(u).getPath()).length,g=0):g=8,Atomics.store(f,0,g),Atomics.notify(f,0);break}case"path_symlink":{let{sharedBuffer:c,targetPath:u,linkFd:f,linkPath:h}=i,p=new Int32Array(c,0,1),{fds:g}=e.processInfos[t],y;g.getDesc(f)===void 0?y=8:y=await e.filesystem.addSymlink(u,h,g.getDesc(f),t),Atomics.store(p,0,y),Atomics.notify(p,0);break}case"path_link":{let{sharedBuffer:c,oldFd:u}=i,f=new Int32Array(c,0,1),h,{fds:p}=e.processInfos[t];if(p.getDesc(u)!==void 0){let g=new TextEncoder().encode("hard links are not supported");h=(await p.getDesc(Nf).write(g.buffer)).err}else h=8;Atomics.store(f,0,h),Atomics.notify(f,0);break}case"path_readlink":{let{sharedBuffer:c,fd:u,path:f,bufferLen:h}=i,p=new Int32Array(c,0,1),g=new Int32Array(c,4,1),y=new Uint8Array(c,8,h),A=0,{fds:H}=e.processInfos[t];if(H.getDesc(u)!==void 0){let $;({err:A,path:$}=await e.filesystem.readLink(H.getDesc(u),f,t)),A===0?$.length>h?g[0]=h:(y.set(new TextEncoder().encode($),0),g[0]=$.length):A=28}else A=8;Atomics.store(p,0,A),Atomics.notify(p,0);break}case"fd_prestat_dir_name":{let{sharedBuffer:c,fd:u,pathLen:f}=i,h=new Int32Array(c,0,1),p=new Uint8Array(c,4,f),g,{fds:y}=e.processInfos[t];y.getDesc(u)!==void 0?(p.set(new TextEncoder().encode(Me(y.getDesc(u).getPath())),0),g=0):g=8,Atomics.store(h,0,g),Atomics.notify(h,0);break}case"fd_write":{let{sharedBuffer:c,fd:u,content:f}=i,h=new Int32Array(c,0,1),p=new Int32Array(c,4,1),{fds:g}=e.processInfos[t],y,A;if(g.getDesc(u)!==void 0){let H=g.getDesc(u).getFdstat();if(A=H.fs_filetype,A===3)y=31;else if(A===7)y=28;else if((H.fs_rights_base&_r)===0n)y=2;else{let $=await g.getDesc(u).write(f.buffer);y=$.err,p[0]=Number($.written)}}else y=8;Atomics.store(h,0,y),Atomics.notify(h,0);break}case"fd_pread":case"fd_read":{let{sharedBuffer:c,fd:u,len:f,offset:h}=i,{fds:p}=e.processInfos[t],g=new Int32Array(c,0,1),y=new Uint8Array(c,8,f),A,H=new Int32Array(c,4,1),$;if(p.getDesc(u)===void 0)A=8;else if($=p.getDesc(u).getFdstat(),($.fs_rights_base&hr)==0n)A=2;else if($.fs_filetype===3)A=31;else if($.fs_filetype===7)A=28;else{let X;h?X=await p.getDesc(u).pread(f,h):X=await p.getDesc(u).read(f,t),A=X.err,y.set(new Uint8Array(X.buffer)),H[0]=X.buffer.byteLength}Atomics.store(g,0,A),Atomics.notify(g,0);break}case"path_open":{let{sharedBuffer:c,dirFd:u,path:f,lookupFlags:h,openFlags:p,fsRightsBase:g,fsRightsInheriting:y,fdFlags:A}=i,H=new Int32Array(c,0,1),$=new Int32Array(c,4,1),X,{fds:z}=e.processInfos[t];if(z.getDesc(u)!==void 0)if(p&je&&p&st)X=28;else{let se;({err:X,desc:se}=await e.filesystem.openat(z.getDesc(u),f,h,p,A,g,y,t)),X===0&&($[0]=z.addFile(se))}else X=8;Atomics.store(H,0,X),Atomics.notify(H,0);break}case"fd_close":{let{sharedBuffer:c,fd:u}=i,f=new Int32Array(c,0,1),h,{fds:p}=e.processInfos[t];p.getDesc(u)!==void 0?(await p.getDesc(u).close(),p.freeFd(u),h=0):h=8,Atomics.store(f,0,h),Atomics.notify(f,0);break}case"path_filestat_get":case"fd_filestat_get":{let{sharedBuffer:c,fd:u,path:f,lookupFlags:h}=i,p=new Int32Array(c,0,1),g=new DataView(c,4),y=0,{fds:A}=e.processInfos[t],H=A.getDesc(u);if(H===void 0)y=8;else{let $=H.getFdstat();if(f&&$.fs_rights_base&Yo||!f&&$.fs_rights_base&gi){let X;if(f!==void 0){let z=await e.filesystem.openat(H,f,h,0,0,0n,0n,t);y=z.err,z.err===0&&(X=z.desc)}else X=H;if(X!==void 0){if((f&&$.fs_rights_base&Yo||!f&&$.fs_rights_base&gi)&&y===0){let z=await X.getFilestat();z.err!=0?y=z.err:(g.setBigUint64(0,z.filestat.dev,!0),g.setBigUint64(8,z.filestat.ino,!0),g.setUint8(16,z.filestat.filetype),g.setBigUint64(24,z.filestat.nlink,!0),g.setBigUint64(32,z.filestat.size,!0),g.setBigUint64(40,z.filestat.atim,!0),g.setBigUint64(48,z.filestat.mtim,!0),g.setBigUint64(56,z.filestat.ctim,!0))}f!==void 0&&await X.close()}}else y=2}Atomics.store(p,0,y),Atomics.notify(p,0);break}case"fd_seek":{let{sharedBuffer:c,fd:u,offset:f,whence:h}=i,p=new Int32Array(c,0,1),g=new BigUint64Array(c,8,1),y,{fds:A}=e.processInfos[t];if(A.getDesc(u)===void 0)y=8;else{let H=A.getDesc(u).getFdstat();if((H.fs_rights_base&Cf)!==0n)if(H.fs_filetype!==3){let $=await A.getDesc(u).seek(f,h);g[0]=$.offset,y=$.err}else y=8;else y=2}Atomics.store(p,0,y),Atomics.notify(p,0);break}case"fd_readdir":{let{sharedBuffer:c,fd:u,cookie:f,bufLen:h}=i,p=new Int32Array(c,0,1),g=new Uint32Array(c,4,1),y=new DataView(c,8,h),A=0,H,{fds:$}=e.processInfos[t];if($.getDesc(u)!==void 0&&$.getDesc(u).getFdstat().fs_filetype===3){let X=(await $.getDesc(u).readdir(f===0n)).dirents;for(let z=Number(f);z<X.length;z+=1){let se=X[z],pe=new TextEncoder().encode(se.name);if(A+8>h){A+=8;break}if(y.setBigUint64(A,BigInt(z+1),!0),A+=8,A+8>=h){A+=8;break}if(y.setBigUint64(A,se.d_ino,!0),A+=8,A+4>=h){A+=4;break}if(y.setUint32(A,pe.byteLength,!0),A+=4,A+4>=h){A+=4;break}if(y.setUint8(A,se.d_type),A+=4,A+pe.byteLength>h){A+=pe.byteLength;break}new Uint8Array(c,8).set(pe,A),A+=pe.byteLength}g[0]=A>h?h:A,H=0}else H=8;Atomics.store(p,0,H),Atomics.notify(p,0);break}case"path_unlink_file":case"path_remove_directory":{let{sharedBuffer:c,fd:u,path:f}=i,h=new Int32Array(c,0,1),p,{fds:g}=e.processInfos[t];g.getDesc(u)!==void 0?p=await e.filesystem.removeEntry(f,n!=="path_unlink_file",g.getDesc(u),t):p=8,Atomics.store(h,0,p),Atomics.notify(h,0);break}case"path_create_directory":{let{sharedBuffer:c,fd:u,path:f}=i,h=new Int32Array(c,0,1),p,{fds:g}=e.processInfos[t];g.getDesc(u)!==void 0?p=await e.filesystem.createDir(f,g.getDesc(u),t):p=8,Atomics.store(h,0,p),Atomics.notify(h,0);break}case"fd_fdstat_get":{let{sharedBuffer:c,fd:u}=i,f=new Int32Array(c,0,1),h=new Uint8Array(c,4,1),p=new BigUint64Array(c,8,1),g=new BigUint64Array(c,16,1),y=new Uint8Array(c,24,1),A,{fds:H}=e.processInfos[t],$=H.getFdEntry(u);if($!==void 0){let X=$.desc.getFdstat();h[0]=X.fs_filetype,y[0]=X.fs_flags|$.fdFlags,p[0]=X.fs_rights_base,g[0]=X.fs_rights_inheriting,A=0}else A=8;Atomics.store(f,0,A),Atomics.notify(f,0);break}case"path_rename":{let{sharedBuffer:c,oldFd:u,oldPath:f,newFd:h,newPath:p}=i,g=new Int32Array(c,0,1),{fds:y}=e.processInfos[t],A=await e.filesystem.move(y.getDesc(u),f,y.getDesc(h),p,t);Atomics.store(g,0,A),Atomics.notify(g,0);break}case"fd_tell":{let{sharedBuffer:c,fd:u}=i,f=new BigInt64Array(c,0,1),h=new Int32Array(c,8,1),{fds:p}=e.processInfos[t],g;if(p.getDesc(u)!==void 0){let y=p.getDesc(u).getFdstat();(y.fs_rights_base&Wf)!==0n?y.fs_filetype===4||y.fs_filetype===7?(f[0]=BigInt((await p.getDesc(u).seek(0n,kr)).offset),g=0):g=8:g=2}else g=8;Atomics.store(h,0,g),Atomics.notify(h,0);break}case"path_filestat_set_times":case"fd_filestat_set_times":{let{sharedBuffer:c,st_atim:u,flags:f,st_mtim:h,fst_flags:p,fd:g,path:y}=i,A=8,H=new Int32Array(c,0,1),{fds:$}=e.processInfos[t],X=$.getDesc(g);if(X&&y!==void 0){let z=await e.filesystem.openat(X,y,f);X=z.desc,A=z.err}if(X)if(!(X.getFdstat().fs_rights_base&Rf))A=2;else if(p&jo&&p&zo||p&Xo&&p&Ko)A=28;else{let se,pe;p&zo?pe=u:p&jo&&(pe=tc(performance.now())),p&Ko?se=h:p&Xo&&(se=tc(performance.now())),A=await X.setFilestatTimes(pe,se)}Atomics.store(H,0,A),Atomics.notify(H,0);break}case"fd_fdstat_set_flags":{let{sharedBuffer:c,fd:u,flags:f}=i,h=new Int32Array(c,0,1),{fds:p}=e.processInfos[t],g=0,y=p.getFdEntry(u);if(y===void 0)g=8;else if(f&32)y.fdFlags=f&65472;else{let A=f&31;g=await y.desc.setFdstatFlags(A)}Atomics.store(h,0,g),Atomics.notify(h,0);break}case"fd_renumber":{let{sharedBuffer:c,fd:u,newFd:f}=i,h=new Int32Array(c,0,1),{fds:p}=e.processInfos[t],g=0,y=p.getFdEntry(u),A=p.getFdEntry(f);y===void 0?g=8:(A!==void 0&&(await A.desc.close(),p.freeFd(f)),p.duplicateFd(u,f)),Atomics.store(h,0,g),Atomics.notify(h,0);break}case"poll_oneoff":{let{sharedBuffer:c,subs:u,eventBuf:f}=i,h=new Int32Array(c,0,2),{fds:p}=e.processInfos[t],g=[];await Promise.any(u.map($=>{let X;switch($.eventType){case kf:X=new Promise(z=>{setTimeout(()=>{z({userdata:$.userdata,error:0,eventType:$.eventType,nbytes:0n})},Number($.event.timeout/1000000n))});break;case Dn:case jt:{let z=X=p.getDesc($.event.fd);z===void 0?X=Promise.resolve({userdata:$.userdata,error:8,eventType:$.eventType,nbytes:0n}):X=z.addPollSub($.userdata,$.eventType,t);break}default:X=new Promise(z=>{z({userdata:$.userdata,error:28,eventType:Ze,nbytes:0n})})}return X.then(z=>g.push(z))}));let y=new DataView(f,0),A=g.length,H=0;g.forEach($=>{y.setBigUint64(H,$.userdata,!0),H+=8,y.setUint16(H,$.error,!0),H+=2,y.setUint8(H,$.eventType),H+=6,y.setBigUint64(H,$.nbytes,!0),H+=8,H+=8}),Atomics.store(h,1,A),Atomics.store(h,0,0),Atomics.notify(h,0);break}case"event_source_fd":{let{sharedBuffer:c,eventMask:u}=i,f=new Int32Array(c,0,1),h=new Int32Array(c,4,1),p=new on(0,ze,ze,u),g=e.processInfos[t].fds;var o=g.addFile(p);g.fdt[o].fdFlags=64,Atomics.store(h,0,o),Atomics.store(f,0,0),Atomics.notify(f,0);break}case"attach_sigint":{let{sharedBuffer:c,fd:u}=i,f=e.attachSigint(u,t),h=new Int32Array(c,0,1);Atomics.store(h,0,f),Atomics.notify(h,0);break}case"clean_inodes":{let{sharedBuffer:c}=i,u=new Int32Array(c,0,1);await Promise.all(Object.values(e.filesystem.getMounts()).map(async f=>{f instanceof Bn&&f.cleanup()})),Atomics.store(u,0,0),Atomics.notify(u,0);break}case"kill":{let{sharedBuffer:c,processId:u,signalNumber:f}=i,h=new Int32Array(c,0,1),p=0;f!==9?(console.log(`Process=${u} send usupported singnal: ${f}!`),p=28):e.processInfos[u]===void 0?(console.log(`Process=${u} send singnal to process ${u} that does not exist!`),p=71):await e.terminateProcess(u,128+f),Atomics.store(h,0,p),Atomics.notify(h,0);break}case"ioctl":{let{sharedBuffer:c,fd:u,command:f}=i,h=new Int32Array(c,0,1),p=new Uint8Array(c,4),{fds:g}=e.processInfos[t],y=g.getDesc(u);if(u===void 0){Atomics.store(h,0,8),Atomics.notify(h,0);break}let A=await y.ioctl(f,p);Atomics.store(h,0,A),Atomics.notify(h,0);break}case"mount":{let{sharedBuffer:c,sourceFd:u,sourcePath:f,targetFd:h,targetPath:p,filesystemType:g,mountFlags:y,data:A}=i,H=0,$=new Int32Array(c,0,1),{fds:X}=e.processInfos[t],z;u>=0&&(z=X.getDesc(u),z===void 0&&(H=8));let se;h>=0&&(se=X.getDesc(h),se===void 0&&(H=8));let pe={};for(let We of A.split(",")){if(We==="")continue;let nt=We.split("=");if(nt.length!==2){H=28;break}pe[nt[0]]=nt[1]}H===0&&(H=await e.filesystem.addMount(z,f,se,p,g,y,pe,t)),Atomics.store($,0,H),Atomics.notify($,0);break}case"umount":{let{sharedBuffer:c,path:u}=i,f=new Int32Array(c,0,1);Atomics.store(f,0,e.filesystem.removeMount(u)),Atomics.notify(f,0);break}case"mknod":{let{sharedBuffer:c,path:u,dev:f}=i,h=new Int32Array(c,0,1);Atomics.store(h,0,await e.filesystem.mknodat(void 0,u,f,t)),Atomics.notify(h,0);break}case"uname":{let{sharedBuffer:c,bufLen:u,nameType:f}=i,h=new Int32Array(c,0,1),p=new Uint32Array(c,4,1),g=new Uint8Array(c,8,u),y=0,A="",H=!1;switch(f){case 0:A=window.location.href;break;case 1:A=window.location.protocol;break;case 2:A=window.location.host;break;case 3:A=window.location.port;break;case 4:A=window.location.pathname;break;case 5:A=window.location.search;break;case 6:A=window.location.hash;break;case 7:A=window.location.origin;break;case 8:A=window.navigator.userAgent;break;default:H=!0;break}H?(p[0]=0,y=28):u<A.length?(p[0]=u,y=42):(p[0]=A.length,g.set(new TextEncoder().encode(A),0)),Atomics.store(h,0,y),Atomics.notify(h,0);break}default:throw new Error(`Unhandled syscall: ${n}`)}}var dn="/home/ant",Ns={PATH:"/usr/bin:/usr/local/bin",PWD:dn,OLDPWD:dn,TMPDIR:"/tmp",TERM:"xterm-256color",HOME:dn,SHELL:"/usr/bin/wash",LANG:"en_US.UTF-8",USER:"ant",HOSTNAME:"browser",PYTHONHOME:"/",PS1:"\x1B[1;34m\\u@\\h \x1B[1;33m\\w$\x1B[0m ",PS2:"> "},Xt=class{desc;fdFlags;constructor(e){if(e===void 0)throw"DescriptorEntry must not contain undefined descriptor!";this.desc=e,this.fdFlags=e.getFdstat().fs_flags}},Pr=class{fdt={};freeFds=[];topFd;constructor(e){this.fdt={...e},this.topFd=Object.keys(e).length-1}clone(){var e=new Pr([]);e.freeFds=this.freeFds.slice(0);for(let t in this.fdt)this.fdt[t].fdFlags&64?e.freeFds.push(Number(t)):(e.fdt[t]=new Xt(this.fdt[t].desc),e.fdt[t].desc.duplicateFd());return e.freeFds.sort(),e.topFd=this.topFd,e}addFile(e){if(e===void 0)throw"Entry is undefined";let t=new Xt(e),n=this.freeFds.shift();if(n!==void 0)return this.fdt[n]=t,n;for(n=++this.topFd;this.fdt[n]!==void 0;)n=++this.topFd;return this.fdt[n]=t,n}freeFd(e){if(!(e in this.fdt))throw"descriptor not present in descriptor table";delete this.fdt[e],this.freeFds.push(e)}replaceFd(e,t){if(!(e in this.fdt))throw"descriptor not present in descriptor table";if(t===void 0)throw"Entry is undefined";this.fdt[e]=t}getFdEntry(e){return this.fdt[e]}getDesc(e){return this.fdt[e]!==void 0?this.fdt[e].desc:void 0}setFd(e,t){this.prepareToStoreFd(e),this.fdt[e]!==void 0&&console.log(`setFd: overwrite opened fd = ${e}`),this.fdt[e]=t}duplicateFd(e,t){this.prepareToStoreFd(t),this.fdt[t]!==void 0&&console.log(`duplicateFd: overwrite opened fd = ${t}`),this.fdt[t]=new Xt(this.fdt[e].desc),this.fdt[t].desc.duplicateFd()}prepareToStoreFd(e){let t=this.freeFds.findIndex(n=>n==e);t>=0&&this.freeFds.splice(t,1)}tearDown(){return Promise.all(Object.values(this.fdt).map(async e=>{e!==void 0?e.desc!==void 0?e.desc.close():console.error("Descriptor entry has undefined descriptor!"):console.error("Descriptor entry is undefined!")}))}},ac=class{id;cmd;worker;fds;parentId;parentLock;callback;env;cwd;isJob;foreground;shouldEcho=!0;terminationNotifier=null;timestamp;children;constructor(e,t,n,i,s,a,o,c,u,f,h){this.id=e,this.cmd=t,this.worker=n,this.fds=i,this.parentId=s,this.parentLock=a,this.callback=o,this.env=c,this.cwd=u,this.isJob=f,this.foreground=h,this.timestamp=Math.floor(new Date().getTime()/1e3),this.children=[]}},Ti=class{scriptName;filesystem;driverManager;processInfos;nextProcessId=0;compiledModules={};constructor(e,t,n,i={}){this.scriptName=e,this.filesystem=t,this.driverManager=n,this.processInfos=i}async syscallCallback(e,t){if(this.driverManager!==void 0){let n=this.driverManager.getDriver(1);if(n!==void 0){n.wrapCallback(async()=>{await Ds(e,t)});return}}Ds}async spawnProcess(e,t,n,i,s,a,o,c,u=null){let f=this.nextProcessId;this.nextProcessId+=1;let h=new Worker(this.scriptName,{type:"module"});if(u===null&&this.processInfos[e]!=null&&(u=this.processInfos[e].foreground),e!==null&&(this.processInfos[e].children.push(f),t!==null&&(this.processInfos[e].foreground=null)),this.processInfos[f]=new ac(f,n,h,i,e,t,this.syscallCallback,a,c,o,u),h.onmessage=p=>this.syscallCallback(p,this),u!==null){let g=this.driverManager.getDriver(u.maj).terminals[u.min];g!=null&&(g.foregroundPid=f)}try{if(!this.compiledModules[n]){let{err:p,desc:g}=await this.filesystem.open(n,1);if(p!==0)return console.error(`No such binary: ${n}`),await this.terminateProcess(f,p),p;this.compiledModules[n]=await WebAssembly.compile((await g.arrayBuffer()).buffer)}}catch(p){let g;throw p.message==="WebAssembly.compile(): BufferSource argument is empty"?g=0:g=45,await this.terminateProcess(f,g),Error("invalid binary")}return!o&&e!=null&&this.processInfos[e].terminationNotifier!==null&&this.processInfos[e].terminationNotifier.obtainEvents(Kt)!=Ze?this.terminateProcess(f,130):this.processInfos[f].worker.postMessage(["start",this.compiledModules[n],f,s,a]),f}async terminateProcess(e,t=0){let n=this.processInfos[e];if(this.processInfos[e].fds.tearDown(),n.parentId!==null&&(this.processInfos[this.processInfos[e].parentId].foreground=n.foreground,this.processInfos[n.parentId].children.splice(n.children.indexOf(e),1),n.foreground!==null)){let i=this.driverManager.getDriver(n.foreground.maj);i.terminals[n.foreground.min].foregroundPid=n.parentId}n.worker.terminate(),n.children.forEach(i=>this.terminateProcess(i,128+9)),e!==0&&n.parentLock!=null&&(Atomics.store(n.parentLock,0,t),Atomics.notify(n.parentLock,0)),e===0&&(window.alive=!1,window.exitCode=t),delete this.processInfos[e]}publishEvent(e,t){if(e&Kt&&!this.processInfos[t].terminationNotifier){this.terminateProcess(t,128+Kt);return}for(let n of Object.values(this.processInfos[t].fds.fdt))n.desc instanceof on&&n.desc.sendEvents(e)}attachSigint(e,t){let n=this.processInfos[t].fds.getDesc(e);if(n===void 0)return 8;if(!(n instanceof on))return 28;let i;return new Promise((s,a)=>{i=n.makeNotifier({resolve:s,reject:a}),i===0&&(this.processInfos[t].terminationNotifier=n)}).then(s=>{this.processInfos[t]!==void 0&&this.processInfos[t].terminationNotifier===s&&(this.processInfos[t].terminationNotifier=null)}),i}};var jn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},rr=[],Lt=[],w_=typeof Uint8Array<"u"?Uint8Array:Array,ru=!1;function Vl(){ru=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)rr[e]=r[e],Lt[r.charCodeAt(e)]=e;Lt["-".charCodeAt(0)]=62,Lt["_".charCodeAt(0)]=63}function A_(r){ru||Vl();var e,t,n,i,s,a,o=r.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=r[o-2]==="="?2:r[o-1]==="="?1:0,a=new w_(o*3/4-s),n=s>0?o-4:o;var c=0;for(e=0,t=0;e<n;e+=4,t+=3)i=Lt[r.charCodeAt(e)]<<18|Lt[r.charCodeAt(e+1)]<<12|Lt[r.charCodeAt(e+2)]<<6|Lt[r.charCodeAt(e+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=i&255;return s===2?(i=Lt[r.charCodeAt(e)]<<2|Lt[r.charCodeAt(e+1)]>>4,a[c++]=i&255):s===1&&(i=Lt[r.charCodeAt(e)]<<10|Lt[r.charCodeAt(e+1)]<<4|Lt[r.charCodeAt(e+2)]>>2,a[c++]=i>>8&255,a[c++]=i&255),a}function b_(r){return rr[r>>18&63]+rr[r>>12&63]+rr[r>>6&63]+rr[r&63]}function T_(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16)+(r[s+1]<<8)+r[s+2],i.push(b_(n));return i.join("")}function tl(r){ru||Vl();for(var e,t=r.length,n=t%3,i="",s=[],a=16383,o=0,c=t-n;o<c;o+=a)s.push(T_(r,o,o+a>c?c:o+a));return n===1?(e=r[t-1],i+=rr[e>>2],i+=rr[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=rr[e>>10],i+=rr[e>>4&63],i+=rr[e<<2&63],i+="="),s.push(i),s.join("")}function da(r,e,t,n,i){var s,a,o=i*8-n-1,c=(1<<o)-1,u=c>>1,f=-7,h=t?i-1:0,p=t?-1:1,g=r[e+h];for(h+=p,s=g&(1<<-f)-1,g>>=-f,f+=o;f>0;s=s*256+r[e+h],h+=p,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+r[e+h],h+=p,f-=8);if(s===0)s=1-u;else{if(s===c)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(g?-1:1)*a*Math.pow(2,s-n)}function Yl(r,e,t,n,i,s){var a,o,c,u=s*8-i-1,f=(1<<u)-1,h=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,y=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?e+=p/c:e+=p*Math.pow(2,1-h),e*c>=2&&(a++,c/=2),a+h>=f?(o=0,a=f):a+h>=1?(o=(e*c-1)*Math.pow(2,i),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;r[t+g]=o&255,g+=y,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;r[t+g]=a&255,g+=y,a/=256,u-=8);r[t+g-y]|=A*128}var C_={}.toString,zl=Array.isArray||function(r){return C_.call(r)=="[object Array]"};var O_=50;U.TYPED_ARRAY_SUPPORT=jn.TYPED_ARRAY_SUPPORT!==void 0?jn.TYPED_ARRAY_SUPPORT:!0;function kc(){return U.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Sr(r,e){if(kc()<e)throw new RangeError("Invalid typed array length");return U.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=U.prototype):(r===null&&(r=new U(e)),r.length=e),r}function U(r,e,t){if(!U.TYPED_ARRAY_SUPPORT&&!(this instanceof U))return new U(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return nu(this,r)}return jl(this,r,e,t)}U.poolSize=8192;U._augment=function(r){return r.__proto__=U.prototype,r};function jl(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?R_(r,e,t,n):typeof e=="string"?x_(r,e,t):F_(r,e)}U.from=function(r,e,t){return jl(null,r,e,t)};U.TYPED_ARRAY_SUPPORT&&(U.prototype.__proto__=Uint8Array.prototype,U.__proto__=Uint8Array);function Kl(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function W_(r,e,t,n){return Kl(e),e<=0?Sr(r,e):t!==void 0?typeof n=="string"?Sr(r,e).fill(t,n):Sr(r,e).fill(t):Sr(r,e)}U.alloc=function(r,e,t){return W_(null,r,e,t)};function nu(r,e){if(Kl(e),r=Sr(r,e<0?0:iu(e)|0),!U.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}U.allocUnsafe=function(r){return nu(null,r)};U.allocUnsafeSlow=function(r){return nu(null,r)};function x_(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!U.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=Xl(e,t)|0;r=Sr(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function Dc(r,e){var t=e.length<0?0:iu(e.length)|0;r=Sr(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function R_(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),U.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=U.prototype):r=Dc(r,e),r}function F_(r,e){if(ir(e)){var t=iu(e.length)|0;return r=Sr(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Q_(e.length)?Sr(r,0):Dc(r,e);if(e.type==="Buffer"&&zl(e.data))return Dc(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function iu(r){if(r>=kc())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kc().toString(16)+" bytes");return r|0}U.isBuffer=nd;function ir(r){return!!(r!=null&&r._isBuffer)}U.compare=function(e,t){if(!ir(e)||!ir(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,s=0,a=Math.min(n,i);s<a;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0};U.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};U.concat=function(e,t){if(!zl(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return U.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=U.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!ir(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i};function Xl(r,e){if(ir(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ta(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return rd(r).length;default:if(n)return ta(r).length;e=(""+e).toLowerCase(),n=!0}}U.byteLength=Xl;function k_(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return H_(this,e,t);case"utf8":case"utf-8":return Jl(this,e,t);case"ascii":return $_(this,e,t);case"latin1":case"binary":return G_(this,e,t);case"base64":return B_(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V_(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}U.prototype._isBuffer=!0;function pn(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}U.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)pn(this,t,t+1);return this};U.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)pn(this,t,t+3),pn(this,t+1,t+2);return this};U.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)pn(this,t,t+7),pn(this,t+1,t+6),pn(this,t+2,t+5),pn(this,t+3,t+4);return this};U.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Jl(this,0,e):k_.apply(this,arguments)};U.prototype.equals=function(e){if(!ir(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:U.compare(this,e)===0};U.prototype.inspect=function(){var e="",t=O_;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};U.prototype.compare=function(e,t,n,i,s){if(!ir(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,o=n-t,c=Math.min(a,o),u=this.slice(i,s),f=e.slice(t,n),h=0;h<c;++h)if(u[h]!==f[h]){a=u[h],o=f[h];break}return a<o?-1:o<a?1:0};function ql(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=U.from(e,n)),ir(e))return e.length===0?-1:rl(r,e,t,n,i);if(typeof e=="number")return e=e&255,U.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):rl(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function rl(r,e,t,n,i){var s=1,a=r.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,a/=2,o/=2,t/=2}function c(g,y){return s===1?g[y]:g.readUInt16BE(y*s)}var u;if(i){var f=-1;for(u=t;u<a;u++)if(c(r,u)===c(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===o)return f*s}else f!==-1&&(u-=u-f),f=-1}else for(t+o>a&&(t=a-o),u=t;u>=0;u--){for(var h=!0,p=0;p<o;p++)if(c(r,u+p)!==c(e,p)){h=!1;break}if(h)return u}return-1}U.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};U.prototype.indexOf=function(e,t,n){return ql(this,e,t,n,!0)};U.prototype.lastIndexOf=function(e,t,n){return ql(this,e,t,n,!1)};function D_(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(a*2,2),16);if(isNaN(o))return a;r[t+a]=o}return a}function N_(r,e,t,n){return pa(ta(e,r.length-t),r,t,n)}function Ql(r,e,t,n){return pa(X_(e),r,t,n)}function L_(r,e,t,n){return Ql(r,e,t,n)}function U_(r,e,t,n){return pa(rd(e),r,t,n)}function P_(r,e,t,n){return pa(q_(e,r.length-t),r,t,n)}U.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return D_(this,e,t,n);case"utf8":case"utf-8":return N_(this,e,t,n);case"ascii":return Ql(this,e,t,n);case"latin1":case"binary":return L_(this,e,t,n);case"base64":return U_(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P_(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};U.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B_(r,e,t){return e===0&&t===r.length?tl(r):tl(r.slice(e,t))}function Jl(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var s=r[i],a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o<=t){var c,u,f,h;switch(o){case 1:s<128&&(a=s);break;case 2:c=r[i+1],(c&192)===128&&(h=(s&31)<<6|c&63,h>127&&(a=h));break;case 3:c=r[i+1],u=r[i+2],(c&192)===128&&(u&192)===128&&(h=(s&15)<<12|(c&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:c=r[i+1],u=r[i+2],f=r[i+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(h=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=o}return M_(n)}var nl=4096;function M_(r){var e=r.length;if(e<=nl)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=nl));return t}function $_(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function G_(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function H_(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",s=e;s<t;++s)i+=K_(r[s]);return i}function V_(r,e,t){for(var n=r.slice(e,t),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}U.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(U.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=U.prototype;else{var s=t-e;i=new U(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i};function Je(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}U.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||Je(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return i};U.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||Je(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i};U.prototype.readUInt8=function(e,t){return t||Je(e,1,this.length),this[e]};U.prototype.readUInt16LE=function(e,t){return t||Je(e,2,this.length),this[e]|this[e+1]<<8};U.prototype.readUInt16BE=function(e,t){return t||Je(e,2,this.length),this[e]<<8|this[e+1]};U.prototype.readUInt32LE=function(e,t){return t||Je(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};U.prototype.readUInt32BE=function(e,t){return t||Je(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};U.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||Je(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};U.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||Je(e,t,this.length);for(var i=t,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a};U.prototype.readInt8=function(e,t){return t||Je(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};U.prototype.readInt16LE=function(e,t){t||Je(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};U.prototype.readInt16BE=function(e,t){t||Je(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};U.prototype.readInt32LE=function(e,t){return t||Je(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};U.prototype.readInt32BE=function(e,t){return t||Je(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};U.prototype.readFloatLE=function(e,t){return t||Je(e,4,this.length),da(this,e,!0,23,4)};U.prototype.readFloatBE=function(e,t){return t||Je(e,4,this.length),da(this,e,!1,23,4)};U.prototype.readDoubleLE=function(e,t){return t||Je(e,8,this.length),da(this,e,!0,52,8)};U.prototype.readDoubleBE=function(e,t){return t||Je(e,8,this.length),da(this,e,!1,52,8)};function At(r,e,t,n,i,s){if(!ir(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}U.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;At(this,e,t,n,s,0)}var a=1,o=0;for(this[t]=e&255;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n};U.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;At(this,e,t,n,s,0)}var a=n-1,o=1;for(this[t+a]=e&255;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n};U.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,1,255,0),U.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function ha(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(r.length-t,2);i<s;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}U.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,2,65535,0),U.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):ha(this,e,t,!0),t+2};U.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,2,65535,0),U.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):ha(this,e,t,!1),t+2};function _a(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(r.length-t,4);i<s;++i)r[t+i]=e>>>(n?i:3-i)*8&255}U.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,4,4294967295,0),U.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):_a(this,e,t,!0),t+4};U.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,4,4294967295,0),U.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):_a(this,e,t,!1),t+4};U.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*n-1);At(this,e,t,n,s-1,-s)}var a=0,o=1,c=0;for(this[t]=e&255;++a<n&&(o*=256);)e<0&&c===0&&this[t+a-1]!==0&&(c=1),this[t+a]=(e/o>>0)-c&255;return t+n};U.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*n-1);At(this,e,t,n,s-1,-s)}var a=n-1,o=1,c=0;for(this[t+a]=e&255;--a>=0&&(o*=256);)e<0&&c===0&&this[t+a+1]!==0&&(c=1),this[t+a]=(e/o>>0)-c&255;return t+n};U.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,1,127,-128),U.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};U.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,2,32767,-32768),U.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):ha(this,e,t,!0),t+2};U.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,2,32767,-32768),U.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):ha(this,e,t,!1),t+2};U.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,4,2147483647,-2147483648),U.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):_a(this,e,t,!0),t+4};U.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||At(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),U.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):_a(this,e,t,!1),t+4};function Zl(r,e,t,n,i,s){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ed(r,e,t,n,i){return i||Zl(r,e,t,4,34028234663852886e22,-34028234663852886e22),Yl(r,e,t,n,23,4),t+4}U.prototype.writeFloatLE=function(e,t,n){return ed(this,e,t,!0,n)};U.prototype.writeFloatBE=function(e,t,n){return ed(this,e,t,!1,n)};function td(r,e,t,n,i){return i||Zl(r,e,t,8,17976931348623157e292,-17976931348623157e292),Yl(r,e,t,n,52,8),t+8}U.prototype.writeDoubleLE=function(e,t,n){return td(this,e,t,!0,n)};U.prototype.writeDoubleBE=function(e,t,n){return td(this,e,t,!1,n)};U.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var s=i-n,a;if(this===e&&n<t&&t<i)for(a=s-1;a>=0;--a)e[a+t]=this[a+n];else if(s<1e3||!U.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s};U.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!U.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{var o=ir(e)?e:ta(new U(e,i).toString()),c=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%c]}return this};var Y_=/[^+\/0-9A-Za-z-_]/g;function z_(r){if(r=j_(r).replace(Y_,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function j_(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function K_(r){return r<16?"0"+r.toString(16):r.toString(16)}function ta(r,e){e=e||1/0;for(var t,n=r.length,i=null,s=[],a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function X_(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function q_(r,e){for(var t,n,i,s=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,s.push(i),s.push(n);return s}function rd(r){return A_(z_(r))}function pa(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Q_(r){return r!==r}function nd(r){return r!=null&&(!!r._isBuffer||id(r)||J_(r))}function id(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function J_(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&id(r.slice(0,0))}var vn=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function _e(r,e){return e={exports:{}},r(e,e.exports),e.exports}var Z_=Math.ceil,e0=Math.floor,su=function(r){return isNaN(r=+r)?0:(r>0?e0:Z_)(r)},au=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r},t0=function(r){return function(e,t){var n=String(au(e)),i=su(t),s=n.length,a,o;return i<0||i>=s?r?"":void 0:(a=n.charCodeAt(i),a<55296||a>56319||i+1===s||(o=n.charCodeAt(i+1))<56320||o>57343?r?n.charAt(i):a:r?n.slice(i,i+2):(a-55296<<10)+(o-56320)+65536)}},gn=!0,ue=_e(function(r){var e=r.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)}),Ae=_e(function(r){var e=r.exports={version:"2.6.12"};typeof __e=="number"&&(__e=e)}),Dm=Ae.version,mn=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r},Qe=function(r,e,t){if(mn(r),e===void 0)return r;switch(t){case 1:return function(n){return r.call(e,n)};case 2:return function(n,i){return r.call(e,n,i)};case 3:return function(n,i,s){return r.call(e,n,i,s)}}return function(){return r.apply(e,arguments)}},He=function(r){return typeof r=="object"?r!==null:typeof r=="function"},ot=function(r){if(!He(r))throw TypeError(r+" is not an object!");return r},Ir=function(r){try{return!!r()}catch{return!0}},wt=!Ir(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),Nc=ue.document,r0=He(Nc)&&He(Nc.createElement),ra=function(r){return r0?Nc.createElement(r):{}},sd=!wt&&!Ir(function(){return Object.defineProperty(ra("div"),"a",{get:function(){return 7}}).a!=7}),Mi=function(r,e){if(!He(r))return r;var t,n;if(e&&typeof(t=r.toString)=="function"&&!He(n=t.call(r))||typeof(t=r.valueOf)=="function"&&!He(n=t.call(r))||!e&&typeof(t=r.toString)=="function"&&!He(n=t.call(r)))return n;throw TypeError("Can't convert object to primitive value")},n0=Object.defineProperty,i0=wt?Object.defineProperty:function(e,t,n){if(ot(e),t=Mi(t,!0),ot(n),sd)try{return n0(e,t,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},Mt={f:i0},En=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}},gr=wt?function(r,e,t){return Mt.f(r,e,En(1,t))}:function(r,e,t){return r[e]=t,r},s0={}.hasOwnProperty,we=function(r,e){return s0.call(r,e)},Ls="prototype",at=function(r,e,t){var n=r&at.F,i=r&at.G,s=r&at.S,a=r&at.P,o=r&at.B,c=r&at.W,u=i?Ae:Ae[e]||(Ae[e]={}),f=u[Ls],h=i?ue:s?ue[e]:(ue[e]||{})[Ls],p,g,y;i&&(t=e);for(p in t)g=!n&&h&&h[p]!==void 0,!(g&&we(u,p))&&(y=g?h[p]:t[p],u[p]=i&&typeof h[p]!="function"?t[p]:o&&g?Qe(y,ue):c&&h[p]==y?function(A){var H=function($,X,z){if(this instanceof A){switch(arguments.length){case 0:return new A;case 1:return new A($);case 2:return new A($,X)}return new A($,X,z)}return A.apply(this,arguments)};return H[Ls]=A[Ls],H}(y):a&&typeof y=="function"?Qe(Function.call,y):y,a&&((u.virtual||(u.virtual={}))[p]=y,r&at.R&&f&&!f[p]&&gr(f,p,y)))};at.F=1;at.G=2;at.S=4;at.P=8;at.B=16;at.W=32;at.U=64;at.R=128;var Q=at,na=gr,mr={},a0={}.toString,yn=function(r){return a0.call(r).slice(8,-1)},ou=Object("z").propertyIsEnumerable(0)?Object:function(r){return yn(r)=="String"?r.split(""):Object(r)},ar=function(r){return ou(au(r))},o0=Math.min,Sa=function(r){return r>0?o0(su(r),9007199254740991):0},c0=Math.max,u0=Math.min,f0=function(r,e){return r=su(r),r<0?c0(r+e,0):u0(r,e)},l0=function(r){return function(e,t,n){var i=ar(e),s=Sa(i.length),a=f0(n,s),o;if(r&&t!=t){for(;s>a;)if(o=i[a++],o!=o)return!0}else for(;s>a;a++)if((r||a in i)&&i[a]===t)return r||a||0;return!r&&-1}},$i=_e(function(r){var e="__core-js_shared__",t=ue[e]||(ue[e]={});(r.exports=function(n,i){return t[n]||(t[n]=i!==void 0?i:{})})("versions",[]).push({version:Ae.version,mode:gn?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),d0=0,h0=Math.random(),va=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++d0+h0).toString(36))},il=$i("keys"),cu=function(r){return il[r]||(il[r]=va(r))},_0=l0(!1),p0=cu("IE_PROTO"),ad=function(r,e){var t=ar(r),n=0,i=[],s;for(s in t)s!=p0&&we(t,s)&&i.push(s);for(;e.length>n;)we(t,s=e[n++])&&(~_0(i,s)||i.push(s));return i},ia="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Di=Object.keys||function(e){return ad(e,ia)},S0=wt?Object.defineProperties:function(e,t){ot(e);for(var n=Di(t),i=n.length,s=0,a;i>s;)Mt.f(e,a=n[s++],t[a]);return e},sl=ue.document,Lc=sl&&sl.documentElement,v0=cu("IE_PROTO"),oc=function(){},Uc="prototype",qs=function(){var r=ra("iframe"),e=ia.length,t="<",n=">",i;for(r.style.display="none",Lc.appendChild(r),r.src="javascript:",i=r.contentWindow.document,i.open(),i.write(t+"script"+n+"document.F=Object"+t+"/script"+n),i.close(),qs=i.F;e--;)delete qs[Uc][ia[e]];return qs()},zr=Object.create||function(e,t){var n;return e!==null?(oc[Uc]=ot(e),n=new oc,oc[Uc]=null,n[v0]=e):n=qs(),t===void 0?n:S0(n,t)},Ke=_e(function(r){var e=$i("wks"),t=ue.Symbol,n=typeof t=="function",i=r.exports=function(s){return e[s]||(e[s]=n&&t[s]||(n?t:va)("Symbol."+s))};i.store=e}),g0=Mt.f,al=Ke("toStringTag"),In=function(r,e,t){r&&!we(r=t?r:r.prototype,al)&&g0(r,al,{configurable:!0,value:e})},od={};gr(od,Ke("iterator"),function(){return this});var m0=function(r,e,t){r.prototype=zr(od,{next:En(1,t)}),In(r,e+" Iterator")},Xn=function(r){return Object(au(r))},ol=cu("IE_PROTO"),E0=Object.prototype,cd=Object.getPrototypeOf||function(r){return r=Xn(r),we(r,ol)?r[ol]:typeof r.constructor=="function"&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?E0:null},Ci=Ke("iterator"),cc=!([].keys&&"next"in[].keys()),y0="@@iterator",cl="keys",Us="values",ul=function(){return this},uu=function(r,e,t,n,i,s,a){m0(t,e,n);var o=function(z){if(!cc&&z in h)return h[z];switch(z){case cl:return function(){return new t(this,z)};case Us:return function(){return new t(this,z)}}return function(){return new t(this,z)}},c=e+" Iterator",u=i==Us,f=!1,h=r.prototype,p=h[Ci]||h[y0]||i&&h[i],g=p||o(i),y=i?u?o("entries"):g:void 0,A=e=="Array"&&h.entries||p,H,$,X;if(A&&(X=cd(A.call(new r)),X!==Object.prototype&&X.next&&(In(X,c,!0),!gn&&typeof X[Ci]!="function"&&gr(X,Ci,ul))),u&&p&&p.name!==Us&&(f=!0,g=function(){return p.call(this)}),(!gn||a)&&(cc||f||!h[Ci])&&gr(h,Ci,g),mr[e]=g,mr[c]=ul,i)if(H={values:u?g:o(Us),keys:s?g:o(cl),entries:y},a)for($ in H)$ in h||na(h,$,H[$]);else Q(Q.P+Q.F*(cc||f),e,H);return H},I0=t0(!0);uu(String,"String",function(r){this._t=String(r),this._i=0},function(){var r=this._t,e=this._i,t;return e>=r.length?{value:void 0,done:!0}:(t=I0(r,e),this._i+=t.length,{value:t,done:!1})});var $r=function(r,e){return{value:e,done:!!r}},Nm=uu(Array,"Array",function(r,e){this._t=ar(r),this._i=0,this._k=e},function(){var r=this._t,e=this._k,t=this._i++;return!r||t>=r.length?(this._t=void 0,$r(1)):e=="keys"?$r(0,t):e=="values"?$r(0,r[t]):$r(0,[t,r[t]])},"values");mr.Arguments=mr.Array;var fl=Ke("toStringTag"),ll="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(Ps=0;Ps<ll.length;Ps++)Bs=ll[Ps],uc=ue[Bs],Ms=uc&&uc.prototype,Ms&&!Ms[fl]&&gr(Ms,fl,Bs),mr[Bs]=mr.Array;var Bs,uc,Ms,Ps,w0=Ke,fu={f:w0},A0=fu.f("iterator"),ud=_e(function(r){r.exports={default:A0,__esModule:!0}});Oe(ud);var Pt=_e(function(r){var e=va("meta"),t=Mt.f,n=0,i=Object.isExtensible||function(){return!0},s=!Ir(function(){return i(Object.preventExtensions({}))}),a=function(h){t(h,e,{value:{i:"O"+ ++n,w:{}}})},o=function(h,p){if(!He(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!we(h,e)){if(!i(h))return"F";if(!p)return"E";a(h)}return h[e].i},c=function(h,p){if(!we(h,e)){if(!i(h))return!0;if(!p)return!1;a(h)}return h[e].w},u=function(h){return s&&f.NEED&&i(h)&&!we(h,e)&&a(h),h},f=r.exports={KEY:e,NEED:!1,fastKey:o,getWeak:c,onFreeze:u}}),Lm=Pt.KEY,Um=Pt.NEED,Pm=Pt.fastKey,Bm=Pt.getWeak,Mm=Pt.onFreeze,b0=Mt.f,lu=function(r){var e=Ae.Symbol||(Ae.Symbol=gn?{}:ue.Symbol||{});r.charAt(0)!="_"&&!(r in e)&&b0(e,r,{value:fu.f(r)})},T0=Object.getOwnPropertySymbols,qn={f:T0},C0={}.propertyIsEnumerable,ga={f:C0},O0=function(r){var e=Di(r),t=qn.f;if(t)for(var n=t(r),i=ga.f,s=0,a;n.length>s;)i.call(r,a=n[s++])&&e.push(a);return e},Pc=Array.isArray||function(e){return yn(e)=="Array"},W0=ia.concat("length","prototype"),x0=Object.getOwnPropertyNames||function(e){return ad(e,W0)},fd={f:x0},ld=fd.f,R0={}.toString,dd=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],F0=function(r){try{return ld(r)}catch{return dd.slice()}},k0=function(e){return dd&&R0.call(e)=="[object Window]"?F0(e):ld(ar(e))},hd={f:k0},dl=Object.getOwnPropertyDescriptor,D0=wt?dl:function(e,t){if(e=ar(e),t=Mi(t,!0),sd)try{return dl(e,t)}catch{}if(we(e,t))return En(!ga.f.call(e,t),e[t])},ma={f:D0},N0=Pt.KEY,_d=ma.f,_n=Mt.f,pd=hd.f,It=ue.Symbol,sa=ue.JSON,$s=sa&&sa.stringify,Hr="prototype",yt=Ke("_hidden"),hl=Ke("toPrimitive"),L0={}.propertyIsEnumerable,Oi=$i("symbol-registry"),Er=$i("symbols"),Gi=$i("op-symbols"),Ut=Object[Hr],Qn=typeof It=="function"&&!!qn.f,fc=ue.QObject,Bc=!fc||!fc[Hr]||!fc[Hr].findChild,Mc=wt&&Ir(function(){return zr(_n({},"a",{get:function(){return _n(this,"a",{value:7}).a}})).a!=7})?function(r,e,t){var n=_d(Ut,e);n&&delete Ut[e],_n(r,e,t),n&&r!==Ut&&_n(Ut,e,n)}:_n,_l=function(r){var e=Er[r]=zr(It[Hr]);return e._k=r,e},$c=Qn&&typeof It.iterator=="symbol"?function(r){return typeof r=="symbol"}:function(r){return r instanceof It},Ea=function(e,t,n){return e===Ut&&Ea(Gi,t,n),ot(e),t=Mi(t,!0),ot(n),we(Er,t)?(n.enumerable?(we(e,yt)&&e[yt][t]&&(e[yt][t]=!1),n=zr(n,{enumerable:En(0,!1)})):(we(e,yt)||_n(e,yt,En(1,{})),e[yt][t]=!0),Mc(e,t,n)):_n(e,t,n)},Sd=function(e,t){ot(e);for(var n=O0(t=ar(t)),i=0,s=n.length,a;s>i;)Ea(e,a=n[i++],t[a]);return e},U0=function(e,t){return t===void 0?zr(e):Sd(zr(e),t)},pl=function(e){var t=L0.call(this,e=Mi(e,!0));return this===Ut&&we(Er,e)&&!we(Gi,e)?!1:t||!we(this,e)||!we(Er,e)||we(this,yt)&&this[yt][e]?t:!0},vd=function(e,t){if(e=ar(e),t=Mi(t,!0),!(e===Ut&&we(Er,t)&&!we(Gi,t))){var n=_d(e,t);return n&&we(Er,t)&&!(we(e,yt)&&e[yt][t])&&(n.enumerable=!0),n}},gd=function(e){for(var t=pd(ar(e)),n=[],i=0,s;t.length>i;)!we(Er,s=t[i++])&&s!=yt&&s!=N0&&n.push(s);return n},md=function(e){for(var t=e===Ut,n=pd(t?Gi:ar(e)),i=[],s=0,a;n.length>s;)we(Er,a=n[s++])&&(!t||we(Ut,a))&&i.push(Er[a]);return i};Qn||(It=function(){if(this instanceof It)throw TypeError("Symbol is not a constructor!");var e=va(arguments.length>0?arguments[0]:void 0),t=function(n){this===Ut&&t.call(Gi,n),we(this,yt)&&we(this[yt],e)&&(this[yt][e]=!1),Mc(this,e,En(1,n))};return wt&&Bc&&Mc(Ut,e,{configurable:!0,set:t}),_l(e)},na(It[Hr],"toString",function(){return this._k}),ma.f=vd,Mt.f=Ea,fd.f=hd.f=gd,ga.f=pl,qn.f=md,wt&&!gn&&na(Ut,"propertyIsEnumerable",pl,!0),fu.f=function(r){return _l(Ke(r))});Q(Q.G+Q.W+Q.F*!Qn,{Symbol:It});for(lc="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),dc=0;lc.length>dc;)Ke(lc[dc++]);var lc,dc;for(hc=Di(Ke.store),_c=0;hc.length>_c;)lu(hc[_c++]);var hc,_c;Q(Q.S+Q.F*!Qn,"Symbol",{for:function(r){return we(Oi,r+="")?Oi[r]:Oi[r]=It(r)},keyFor:function(e){if(!$c(e))throw TypeError(e+" is not a symbol!");for(var t in Oi)if(Oi[t]===e)return t},useSetter:function(){Bc=!0},useSimple:function(){Bc=!1}});Q(Q.S+Q.F*!Qn,"Object",{create:U0,defineProperty:Ea,defineProperties:Sd,getOwnPropertyDescriptor:vd,getOwnPropertyNames:gd,getOwnPropertySymbols:md});var P0=Ir(function(){qn.f(1)});Q(Q.S+Q.F*P0,"Object",{getOwnPropertySymbols:function(e){return qn.f(Xn(e))}});sa&&Q(Q.S+Q.F*(!Qn||Ir(function(){var r=It();return $s([r])!="[null]"||$s({a:r})!="{}"||$s(Object(r))!="{}"})),"JSON",{stringify:function(e){for(var t=[e],n=1,i,s;arguments.length>n;)t.push(arguments[n++]);if(s=i=t[1],!(!He(i)&&e===void 0||$c(e)))return Pc(i)||(i=function(a,o){if(typeof s=="function"&&(o=s.call(this,a,o)),!$c(o))return o}),t[1]=i,$s.apply(sa,t)}});It[Hr][hl]||gr(It[Hr],hl,It[Hr].valueOf);In(It,"Symbol");In(Math,"Math",!0);In(ue.JSON,"JSON",!0);lu("asyncIterator");lu("observable");var B0=Ae.Symbol,Ed=_e(function(r){r.exports={default:B0,__esModule:!0}});Oe(Ed);var du=_e(function(r,e){e.__esModule=!0;var t=s(ud),n=s(Ed),i=typeof n.default=="function"&&typeof t.default=="symbol"?function(a){return typeof a}:function(a){return a&&typeof n.default=="function"&&a.constructor===n.default&&a!==n.default.prototype?"symbol":typeof a};function s(a){return a&&a.__esModule?a:{default:a}}e.default=typeof n.default=="function"&&i(t.default)==="symbol"?function(a){return typeof a>"u"?"undefined":i(a)}:function(a){return a&&typeof n.default=="function"&&a.constructor===n.default&&a!==n.default.prototype?"symbol":typeof a>"u"?"undefined":i(a)}}),M0=Oe(du),Gs=Object.assign,yd=!Gs||Ir(function(){var r={},e={},t=Symbol(),n="abcdefghijklmnopqrst";return r[t]=7,n.split("").forEach(function(i){e[i]=i}),Gs({},r)[t]!=7||Object.keys(Gs({},e)).join("")!=n})?function(e,t){for(var n=Xn(e),i=arguments.length,s=1,a=qn.f,o=ga.f;i>s;)for(var c=ou(arguments[s++]),u=a?Di(c).concat(a(c)):Di(c),f=u.length,h=0,p;f>h;)p=u[h++],(!wt||o.call(c,p))&&(n[p]=c[p]);return n}:Gs;Q(Q.S+Q.F,"Object",{assign:yd});var $0=Ae.Object.assign,Id=_e(function(r){r.exports={default:$0,__esModule:!0}});Oe(Id);var G0=_e(function(r,e){e.__esModule=!0;var t=n(Id);function n(i){return i&&i.__esModule?i:{default:i}}e.default=t.default||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i}}),$n=Oe(G0),wd=function(r,e,t,n){try{return n?e(ot(t)[0],t[1]):e(t)}catch(s){var i=r.return;throw i!==void 0&&ot(i.call(r)),s}},H0=Ke("iterator"),V0=Array.prototype,Ad=function(r){return r!==void 0&&(mr.Array===r||V0[H0]===r)},Sl=function(r,e,t){e in r?Mt.f(r,e,En(0,t)):r[e]=t},Y0=Ke("toStringTag"),z0=yn(function(){return arguments}())=="Arguments",j0=function(r,e){try{return r[e]}catch{}},ya=function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=j0(e=Object(r),Y0))=="string"?t:z0?yn(e):(n=yn(e))=="Object"&&typeof e.callee=="function"?"Arguments":n},K0=Ke("iterator"),hu=Ae.getIteratorMethod=function(r){if(r!=null)return r[K0]||r["@@iterator"]||mr[ya(r)]},Gc=Ke("iterator"),bd=!1;try{vl=[7][Gc](),vl.return=function(){bd=!0}}catch{}var vl,Td=function(r,e){if(!e&&!bd)return!1;var t=!1;try{var n=[7],i=n[Gc]();i.next=function(){return{done:t=!0}},n[Gc]=function(){return i},r(n)}catch{}return t};Q(Q.S+Q.F*!Td(function(r){}),"Array",{from:function(e){var t=Xn(e),n=typeof this=="function"?this:Array,i=arguments.length,s=i>1?arguments[1]:void 0,a=s!==void 0,o=0,c=hu(t),u,f,h,p;if(a&&(s=Qe(s,i>2?arguments[2]:void 0,2)),c!=null&&!(n==Array&&Ad(c)))for(p=c.call(t),f=new n;!(h=p.next()).done;o++)Sl(f,o,a?wd(p,s,[h.value,o],!0):h.value);else for(u=Sa(t.length),f=new n(u);u>o;o++)Sl(f,o,a?s(t[o],o):t[o]);return f.length=o,f}});var X0=Ae.Array.from,Cd=_e(function(r){r.exports={default:X0,__esModule:!0}});Oe(Cd);var q0=_e(function(r,e){e.__esModule=!0;var t=n(Cd);function n(i){return i&&i.__esModule?i:{default:i}}e.default=function(i){if(Array.isArray(i)){for(var s=0,a=Array(i.length);s<i.length;s++)a[s]=i[s];return a}else return(0,t.default)(i)}}),Ne=Oe(q0),Q0=Ke("iterator"),J0=Ae.isIterable=function(r){var e=Object(r);return e[Q0]!==void 0||"@@iterator"in e||mr.hasOwnProperty(ya(e))},Z0=J0,Od=_e(function(r){r.exports={default:Z0,__esModule:!0}});Oe(Od);var ep=Ae.getIterator=function(r){var e=hu(r);if(typeof e!="function")throw TypeError(r+" is not iterable!");return ot(e.call(r))},tp=ep,Wd=_e(function(r){r.exports={default:tp,__esModule:!0}});Oe(Wd);var rp=_e(function(r,e){e.__esModule=!0;var t=i(Od),n=i(Wd);function i(s){return s&&s.__esModule?s:{default:s}}e.default=function(){function s(a,o){var c=[],u=!0,f=!1,h=void 0;try{for(var p=(0,n.default)(a),g;!(u=(g=p.next()).done)&&(c.push(g.value),!(o&&c.length===o));u=!0);}catch(y){f=!0,h=y}finally{try{!u&&p.return&&p.return()}finally{if(f)throw h}}return c}return function(a,o){if(Array.isArray(a))return a;if((0,t.default)(Object(a)))return s(a,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),gt=Oe(rp),np=_e(function(r,e){e.__esModule=!0,e.default=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}}),rt=Oe(np);Q(Q.S+Q.F*!wt,"Object",{defineProperty:Mt.f});var ip=Ae.Object,sp=function(e,t,n){return ip.defineProperty(e,t,n)},xd=_e(function(r){r.exports={default:sp,__esModule:!0}});Oe(xd);var ap=_e(function(r,e){e.__esModule=!0;var t=n(xd);function n(i){return i&&i.__esModule?i:{default:i}}e.default=function(){function i(s,a){for(var o=0;o<a.length;o++){var c=a[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),(0,t.default)(s,c.key,c)}}return function(s,a,o){return a&&i(s.prototype,a),o&&i(s,o),s}}()}),ct=Oe(ap);function Rd(){throw new Error("setTimeout has not been defined")}function Fd(){throw new Error("clearTimeout has not been defined")}var Br=Rd,Mr=Fd;typeof jn.setTimeout=="function"&&(Br=setTimeout);typeof jn.clearTimeout=="function"&&(Mr=clearTimeout);function kd(r){if(Br===setTimeout)return setTimeout(r,0);if((Br===Rd||!Br)&&setTimeout)return Br=setTimeout,setTimeout(r,0);try{return Br(r,0)}catch{try{return Br.call(null,r,0)}catch{return Br.call(this,r,0)}}}function op(r){if(Mr===clearTimeout)return clearTimeout(r);if((Mr===Fd||!Mr)&&clearTimeout)return Mr=clearTimeout,clearTimeout(r);try{return Mr(r)}catch{try{return Mr.call(null,r)}catch{return Mr.call(this,r)}}}var vr=[],Vn=!1,Sn,Qs=-1;function cp(){!Vn||!Sn||(Vn=!1,Sn.length?vr=Sn.concat(vr):Qs=-1,vr.length&&Dd())}function Dd(){if(!Vn){var r=kd(cp);Vn=!0;for(var e=vr.length;e;){for(Sn=vr,vr=[];++Qs<e;)Sn&&Sn[Qs].run();Qs=-1,e=vr.length}Sn=null,Vn=!1,op(r)}}function ut(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];vr.push(new Nd(r,e)),vr.length===1&&!Vn&&kd(Dd)}function Nd(r,e){this.fun=r,this.array=e}Nd.prototype.run=function(){this.fun.apply(null,this.array)};var up="browser",fp="browser",lp=!0,dp={},hp=[],_p="",pp={},Sp={},vp={};function wn(){}var gp=wn,mp=wn,Ep=wn,yp=wn,Ip=wn,wp=wn,Ap=wn;function bp(r){throw new Error("process.binding is not supported")}function Tp(){return"/"}function Cp(r){throw new Error("process.chdir is not supported")}function Op(){return 0}var Gn=jn.performance||{},Wp=Gn.now||Gn.mozNow||Gn.msNow||Gn.oNow||Gn.webkitNow||function(){return new Date().getTime()};function xp(r){var e=Wp.call(Gn)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return r&&(t=t-r[0],n=n-r[1],n<0&&(t--,n+=1e9)),[t,n]}var Rp=new Date;function Fp(){var r=new Date,e=r-Rp;return e/1e3}var Js={nextTick:ut,title:up,browser:lp,env:dp,argv:hp,version:_p,versions:pp,on:gp,addListener:mp,once:Ep,off:yp,removeListener:Ip,removeAllListeners:wp,emit:Ap,binding:bp,cwd:Tp,chdir:Cp,umask:Op,hrtime:xp,platform:fp,release:Sp,config:vp,uptime:Fp};function Ld(r,e){for(var t=0,n=r.length-1;n>=0;n--){var i=r[n];i==="."?r.splice(n,1):i===".."?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}var kp=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,_u=function(r){return kp.exec(r).slice(1)};function Hc(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;r=n+"/"+r,e=n.charAt(0)==="/"}return r=Ld(pu(r.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+r||"."}function Ud(r){var e=Pd(r),t=$p(r,-1)==="/";return r=Ld(pu(r.split("/"),function(n){return!!n}),!e).join("/"),!r&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r}function Pd(r){return r.charAt(0)==="/"}function Dp(){var r=Array.prototype.slice.call(arguments,0);return Ud(pu(r,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Np(r,e){r=Hc(r).substr(1),e=Hc(e).substr(1);function t(u){for(var f=0;f<u.length&&u[f]==="";f++);for(var h=u.length-1;h>=0&&u[h]==="";h--);return f>h?[]:u.slice(f,h-f+1)}for(var n=t(r.split("/")),i=t(e.split("/")),s=Math.min(n.length,i.length),a=s,o=0;o<s;o++)if(n[o]!==i[o]){a=o;break}for(var c=[],o=a;o<n.length;o++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")}var Lp="/",Up=":";function Pp(r){var e=_u(r),t=e[0],n=e[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)}function Bp(r,e){var t=_u(r)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function Mp(r){return _u(r)[3]}var pc={extname:Mp,basename:Bp,dirname:Pp,sep:Lp,delimiter:Up,relative:Np,join:Dp,isAbsolute:Pd,normalize:Ud,resolve:Hc};function pu(r,e){if(r.filter)return r.filter(e);for(var t=[],n=0;n<r.length;n++)e(r[n],n,r)&&t.push(r[n]);return t}var $p="ab".substr(-1)==="b"?function(r,e,t){return r.substr(e,t)}:function(r,e,t){return e<0&&(e=r.length+e),r.substr(e,t)},Gp=_e(function(r,e){(function(t,n){r.exports=n()})(vn,function(){function t(n,i){return new Proxy({},{getPrototypeOf:function(a){return Reflect.getPrototypeOf(n[i])},setPrototypeOf:function(a,o){return Reflect.setPrototypeOf(n[i],o)},isExtensible:function(a){return Reflect.isExtensible(n[i])},preventExtensions:function(a){return Reflect.preventExtensions(n[i])},getOwnPropertyDescriptor:function(a,o){return Reflect.getOwnPropertyDescriptor(n[i],o)},defineProperty:function(a,o,c){return Reflect.defineProperty(n[i],o,c)},get:function(a,o){var c=Reflect.get(n[i],o);return typeof c=="function"&&(c=c.bind(n[i])),c},set:function(a,o,c){return Reflect.set(n[i],o,c)},has:function(a,o){return Reflect.has(n[i],o)},deleteProperty:function(a,o){return Reflect.delete(n[i],o)},ownKeys:function(a){return Reflect.ownKeys(n[i])},apply:function(a,o,c){return Reflect.apply(n[i],o,c)},construct:function(a,o,c){return Reflect.construct(n[i],o,c)}})}return t})}),Su=function(r,e){var t=(Ae.Object||{})[r]||Object[r],n={};n[r]=e(t),Q(Q.S+Q.F*Ir(function(){t(1)}),"Object",n)},Hp=Pt.onFreeze;Su("freeze",function(r){return function(t){return r&&He(t)?r(Hp(t)):t}});var Vp=Ae.Object.freeze,Yp=_e(function(r){r.exports={default:Vp,__esModule:!0}}),zp=Oe(Yp),T=zp({O_RDONLY:0,O_WRONLY:1,O_RDWR:2,O_ACCMODE:3,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,COPYFILE_EXCL:1,SEEK_SET:0,SEEK_CUR:1,SEEK_END:2,MAP_SHARED:1,MAP_PRIVATE:2}),Zs=function(){function r(e){rt(this,r),this.dev=e.dev||0,this.ino=e.ino,this.mode=e.mode,this.nlink=e.nlink,this.uid=e.uid,this.gid=e.gid,this.rdev=e.rdev||0,this.size=e.size,this.blksize=void 0,this.blocks=void 0,this.atime=e.atime,this.mtime=e.mtime,this.ctime=e.ctime,this.birthtime=e.birthtime}return ct(r,[{key:"isFile",value:function(){return(this.mode&T.S_IFMT)==T.S_IFREG}},{key:"isDirectory",value:function(){return(this.mode&T.S_IFMT)==T.S_IFDIR}},{key:"isBlockDevice",value:function(){return(this.mode&T.S_IFMT)==T.S_IFBLK}},{key:"isCharacterDevice",value:function(){return(this.mode&T.S_IFMT)==T.S_IFCHR}},{key:"isSymbolicLink",value:function(){return(this.mode&T.S_IFMT)==T.S_IFLNK}},{key:"isFIFO",value:function(){return(this.mode&T.S_IFMT)==T.S_IFIFO}},{key:"isSocket",value:function(){return(this.mode&T.S_IFMT)==T.S_IFSOCK}}]),r}(),jp=function(){function r(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];rt(this,r),this._iNodeMgr=e,this._iNode=t,this._curPath=n,e.refINode(t)}return ct(r,[{key:"changeDir",value:function(t,n){this._iNodeMgr.refINode(t),this._iNodeMgr.unrefINode(this._iNode),this._iNode=t,this._curPath=n}},{key:"getINode",value:function(){return this._iNode}},{key:"getPathStack",value:function(){return[].concat(Ne(this._curPath))}},{key:"getPath",value:function(){return"/"+this._curPath.join("/")}}]),r}(),tr=0,Vc=0,Kp=T.S_IRWXU|T.S_IRGRP|T.S_IXGRP|T.S_IROTH|T.S_IXOTH,Et=T.S_IRUSR|T.S_IWUSR|T.S_IRGRP|T.S_IWGRP|T.S_IROTH|T.S_IWOTH,aa=T.S_IRWXU|T.S_IRWXG|T.S_IRWXO,vu=T.S_IRWXU|T.S_IRWXG|T.S_IRWXO;function Wi(r,e){return r&~e}function Xp(r,e,t){return r===t.uid?(t.mode&T.S_IRWXU)>>6:e===t.gid?(t.mode&T.S_IRWXG)>>3:t.mode&T.S_IRWXO}function qp(r,e,t,n){return(r&Xp(e,t,n))===r}var Ia=function(r,e,t){for(var n in e)t&&r[n]?r[n]=e[n]:gr(r,n,e[n]);return r},Ni=function(r,e,t,n){if(!(r instanceof e)||n!==void 0&&n in r)throw TypeError(t+": incorrect invocation!");return r},jr=_e(function(r){var e={},t={},n=r.exports=function(i,s,a,o,c){var u=c?function(){return i}:hu(i),f=Qe(a,o,s?2:1),h=0,p,g,y,A;if(typeof u!="function")throw TypeError(i+" is not iterable!");if(Ad(u)){for(p=Sa(i.length);p>h;h++)if(A=s?f(ot(g=i[h])[0],g[1]):f(i[h]),A===e||A===t)return A}else for(y=u.call(i);!(g=y.next()).done;)if(A=wd(y,f,g.value,s),A===e||A===t)return A};n.BREAK=e,n.RETURN=t}),gl=Ke("species"),Bd=function(r){var e=typeof Ae[r]=="function"?Ae[r]:ue[r];wt&&e&&!e[gl]&&Mt.f(e,gl,{configurable:!0,get:function(){return this}})},Rt=function(r,e){if(!He(r)||r._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return r},Qp=Mt.f,Md=Pt.fastKey,xi=wt?"_s":"size",Hs=function(r,e){var t=Md(e),n;if(t!=="F")return r._i[t];for(n=r._f;n;n=n.n)if(n.k==e)return n},Sc={getConstructor:function(r,e,t,n){var i=r(function(s,a){Ni(s,i,e,"_i"),s._t=e,s._i=zr(null),s._f=void 0,s._l=void 0,s[xi]=0,a!=null&&jr(a,t,s[n],s)});return Ia(i.prototype,{clear:function(){for(var a=Rt(this,e),o=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete o[c.i];a._f=a._l=void 0,a[xi]=0},delete:function(s){var a=Rt(this,e),o=Hs(a,s);if(o){var c=o.n,u=o.p;delete a._i[o.i],o.r=!0,u&&(u.n=c),c&&(c.p=u),a._f==o&&(a._f=c),a._l==o&&(a._l=u),a[xi]--}return!!o},forEach:function(a){Rt(this,e);for(var o=Qe(a,arguments.length>1?arguments[1]:void 0,3),c;c=c?c.n:this._f;)for(o(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!Hs(Rt(this,e),a)}}),wt&&Qp(i.prototype,"size",{get:function(){return Rt(this,e)[xi]}}),i},def:function(r,e,t){var n=Hs(r,e),i,s;return n?n.v=t:(r._l=n={i:s=Md(e,!0),k:e,v:t,p:i=r._l,n:void 0,r:!1},r._f||(r._f=n),i&&(i.n=n),r[xi]++,s!=="F"&&(r._i[s]=n)),r},getEntry:Hs,setStrong:function(r,e,t){uu(r,e,function(n,i){this._t=Rt(n,e),this._k=i,this._l=void 0},function(){for(var n=this,i=n._k,s=n._l;s&&s.r;)s=s.p;return!n._t||!(n._l=s=s?s.n:n._t._f)?(n._t=void 0,$r(1)):i=="keys"?$r(0,s.k):i=="values"?$r(0,s.v):$r(0,[s.k,s.v])},t?"entries":"values",!t,!0),Bd(e)}},Jp=Ke("species"),Zp=function(r){var e;return Pc(r)&&(e=r.constructor,typeof e=="function"&&(e===Array||Pc(e.prototype))&&(e=void 0),He(e)&&(e=e[Jp],e===null&&(e=void 0))),e===void 0?Array:e},eS=function(r,e){return new(Zp(r))(e)},wa=function(r,e){var t=r==1,n=r==2,i=r==3,s=r==4,a=r==6,o=r==5||a,c=e||eS;return function(u,f,h){for(var p=Xn(u),g=ou(p),y=Qe(f,h,3),A=Sa(g.length),H=0,$=t?c(u,A):n?c(u,0):void 0,X,z;A>H;H++)if((o||H in g)&&(X=g[H],z=y(X,H,p),r)){if(t)$[H]=z;else if(z)switch(r){case 3:return!0;case 5:return X;case 6:return H;case 2:$.push(X)}else if(s)return!1}return a?-1:i||s?s:$}},tS=Mt.f,rS=wa(0),$d=function(r,e,t,n,i,s){var a=ue[r],o=a,c=i?"set":"add",u=o&&o.prototype,f={};return!wt||typeof o!="function"||!(s||u.forEach&&!Ir(function(){new o().entries().next()}))?(o=n.getConstructor(e,r,i,c),Ia(o.prototype,t),Pt.NEED=!0):(o=e(function(h,p){Ni(h,o,r,"_c"),h._c=new a,p!=null&&jr(p,i,h[c],h)}),rS("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(h){var p=h=="add"||h=="set";h in u&&!(s&&h=="clear")&&gr(o.prototype,h,function(g,y){if(Ni(this,o,h),!p&&s&&!He(g))return h=="get"?void 0:!1;var A=this._c[h](g===0?0:g,y);return p?this:A})}),s||tS(o.prototype,"size",{get:function(){return this._c.size}})),In(o,r),f[r]=o,Q(Q.G+Q.W+Q.F,f),s||n.setStrong(o,r,i),o},vc="Map",$m=$d(vc,function(r){return function(){return r(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=Sc.getEntry(Rt(this,vc),e);return t&&t.v},set:function(e,t){return Sc.def(Rt(this,vc),e===0?0:e,t)}},Sc,!0),nS=function(r,e){var t=[];return jr(r,!1,t.push,t,e),t},iS=function(r){return function(){if(ya(this)!=r)throw TypeError(r+"#toJSON isn't generic");return nS(this)}};Q(Q.P+Q.R,"Map",{toJSON:iS("Map")});var Gd=function(r){Q(Q.S,r,{of:function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return new this(n)}})};Gd("Map");var Hd=function(r){Q(Q.S,r,{from:function(t){var n=arguments[1],i,s,a,o;return mn(this),i=n!==void 0,i&&mn(n),t==null?new this:(s=[],i?(a=0,o=Qe(n,arguments[2],2),jr(t,!1,function(c){s.push(o(c,a++))})):jr(t,!1,s.push,s),new this(s))}})};Hd("Map");var sS=Ae.Map,aS=_e(function(r){r.exports={default:sS,__esModule:!0}}),Li=Oe(aS);Su("getPrototypeOf",function(){return function(e){return cd(Xn(e))}});var oS=Ae.Object.getPrototypeOf,Vd=_e(function(r){r.exports={default:oS,__esModule:!0}}),Ce=Oe(Vd),cS=_e(function(r,e){e.__esModule=!0;var t=n(du);function n(i){return i&&i.__esModule?i:{default:i}}e.default=function(i,s){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&((typeof s>"u"?"undefined":(0,t.default)(s))==="object"||typeof s=="function")?s:i}}),wr=Oe(cS),ml=function(r,e){if(ot(r),!He(e)&&e!==null)throw TypeError(e+": can't set as prototype!")},uS={set:Object.setPrototypeOf||("__proto__"in{}?function(r,e,t){try{t=Qe(Function.call,ma.f(Object.prototype,"__proto__").set,2),t(r,[]),e=!(r instanceof Array)}catch{e=!0}return function(i,s){return ml(i,s),e?i.__proto__=s:t(i,s),i}}({},!1):void 0),check:ml};Q(Q.S,"Object",{setPrototypeOf:uS.set});var fS=Ae.Object.setPrototypeOf,Yd=_e(function(r){r.exports={default:fS,__esModule:!0}});Oe(Yd);Q(Q.S,"Object",{create:zr});var lS=Ae.Object,dS=function(e,t){return lS.create(e,t)},zd=_e(function(r){r.exports={default:dS,__esModule:!0}});Oe(zd);var hS=_e(function(r,e){e.__esModule=!0;var t=s(Yd),n=s(zd),i=s(du);function s(a){return a&&a.__esModule?a:{default:a}}e.default=function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof o>"u"?"undefined":(0,i.default)(o)));a.prototype=(0,n.default)(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(t.default?(0,t.default)(a,o):a.__proto__=o)}}),Ar=Oe(hS),_S=_e(function(r,e){(function(t,n){n(e)})(vn,function(t){var n=typeof window<"u"?window:typeof vn<"u"?vn:typeof self<"u"?self:{};function i(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function s(l,d){return d={exports:{}},l(d,d.exports),d.exports}var a=function(l,d){return{value:d,done:!!l}},o={},c={}.toString,u=function(l){return c.call(l).slice(8,-1)},f=Object("z").propertyIsEnumerable(0)?Object:function(l){return u(l)=="String"?l.split(""):Object(l)},h=function(l){if(l==null)throw TypeError("Can't call method on  "+l);return l},p=function(l){return f(h(l))},g=!0,y=s(function(l){var d=l.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=d)}),A=s(function(l){var d=l.exports={version:"2.4.0"};typeof __e=="number"&&(__e=d)}),H=A.version,$=function(l){if(typeof l!="function")throw TypeError(l+" is not a function!");return l},X=function(l,d,S){if($(l),d===void 0)return l;switch(S){case 1:return function(m){return l.call(d,m)};case 2:return function(m,I){return l.call(d,m,I)};case 3:return function(m,I,E){return l.call(d,m,I,E)}}return function(){return l.apply(d,arguments)}},z=function(l){return typeof l=="object"?l!==null:typeof l=="function"},se=function(l){if(!z(l))throw TypeError(l+" is not an object!");return l},pe=function(l){try{return!!l()}catch{return!0}},We=!pe(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),nt=y.document,bn=z(nt)&&z(nt.createElement),Tn=function(l){return bn?nt.createElement(l):{}},Qt=!We&&!pe(function(){return Object.defineProperty(Tn("div"),"a",{get:function(){return 7}}).a!=7}),Jt=function(l,d){if(!z(l))return l;var S,m;if(d&&typeof(S=l.toString)=="function"&&!z(m=S.call(l))||typeof(S=l.valueOf)=="function"&&!z(m=S.call(l))||!d&&typeof(S=l.toString)=="function"&&!z(m=S.call(l)))return m;throw TypeError("Can't convert object to primitive value")},ti=Object.defineProperty,ri=We?Object.defineProperty:function(d,S,m){if(se(d),S=Jt(S,!0),se(m),Qt)try{return ti(d,S,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported!");return"value"in m&&(d[S]=m.value),d},Zt={f:ri},Xr=function(l,d){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:d}},Ht=We?function(l,d,S){return Zt.f(l,d,Xr(1,S))}:function(l,d,S){return l[d]=S,l},Cn="prototype",Xe=function(l,d,S){var m=l&Xe.F,I=l&Xe.G,E=l&Xe.S,w=l&Xe.P,R=l&Xe.B,K=l&Xe.W,Z=I?A:A[d]||(A[d]={}),fe=Z[Cn],v=I?y:E?y[d]:(y[d]||{})[Cn],b,C,D;I&&(S=d);for(b in S)C=!m&&v&&v[b]!==void 0,!(C&&b in Z)&&(D=C?v[b]:S[b],Z[b]=I&&typeof v[b]!="function"?S[b]:R&&C?X(D,y):K&&v[b]==D?function(q){var re=function(oe,le,ne){if(this instanceof q){switch(arguments.length){case 0:return new q;case 1:return new q(oe);case 2:return new q(oe,le)}return new q(oe,le,ne)}return q.apply(this,arguments)};return re[Cn]=q[Cn],re}(D):w&&typeof D=="function"?X(Function.call,D):D,w&&((Z.virtual||(Z.virtual={}))[b]=D,l&Xe.R&&fe&&!fe[b]&&Ht(fe,b,D)))};Xe.F=1,Xe.G=2,Xe.S=4,Xe.P=8,Xe.B=16,Xe.W=32,Xe.U=64,Xe.R=128;var me=Xe,On=Ht,qa={}.hasOwnProperty,Ee=function(l,d){return qa.call(l,d)},Qa=Math.ceil,Ja=Math.floor,ni=function(l){return isNaN(l=+l)?0:(l>0?Ja:Qa)(l)},Za=Math.min,ii=function(l){return l>0?Za(ni(l),9007199254740991):0},rf=Math.max,nf=Math.min,eo=function(l,d){return l=ni(l),l<0?rf(l+d,0):nf(l,d)},to=function(l){return function(d,S,m){var I=p(d),E=ii(I.length),w=eo(m,E),R;if(l&&S!=S){for(;E>w;)if(R=I[w++],R!=R)return!0}else for(;E>w;w++)if((l||w in I)&&I[w]===S)return l||w||0;return!l&&-1}},rs="__core-js_shared__",ns=y[rs]||(y[rs]={}),qr=function(l){return ns[l]||(ns[l]={})},ro=0,no=Math.random(),Wn=function(l){return"Symbol(".concat(l===void 0?"":l,")_",(++ro+no).toString(36))},is=qr("keys"),or=function(l){return is[l]||(is[l]=Wn(l))},ss=to(!1),io=or("IE_PROTO"),as=function(l,d){var S=p(l),m=0,I=[],E;for(E in S)E!=io&&Ee(S,E)&&I.push(E);for(;d.length>m;)Ee(S,E=d[m++])&&(~ss(I,E)||I.push(E));return I},xn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Qr=Object.keys||function(d){return as(d,xn)},so=We?Object.defineProperties:function(d,S){se(d);for(var m=Qr(S),I=m.length,E=0,w;I>E;)Zt.f(d,w=m[E++],S[w]);return d},ao=y.document&&document.documentElement,oo=or("IE_PROTO"),si=function(){},ai="prototype",Jr=function(){var l=Tn("iframe"),d=xn.length,S="<",m=">",I;for(l.style.display="none",ao.appendChild(l),l.src="javascript:",I=l.contentWindow.document,I.open(),I.write(S+"script"+m+"document.F=Object"+S+"/script"+m),I.close(),Jr=I.F;d--;)delete Jr[ai][xn[d]];return Jr()},Vt=Object.create||function(d,S){var m;return d!==null?(si[ai]=se(d),m=new si,si[ai]=null,m[oo]=d):m=Jr(),S===void 0?m:so(m,S)},Ve=s(function(l){var d=qr("wks"),S=y.Symbol,m=typeof S=="function",I=l.exports=function(E){return d[E]||(d[E]=m&&S[E]||(m?S:Wn)("Symbol."+E))};I.store=d}),os=Zt.f,br=Ve("toStringTag"),qe=function(l,d,S){l&&!Ee(l=S?l:l.prototype,br)&&os(l,br,{configurable:!0,value:d})},ie={};Ht(ie,Ve("iterator"),function(){return this});var V=function(l,d,S){l.prototype=Vt(ie,{next:Xr(1,S)}),qe(l,d+" Iterator")},cr=function(l){return Object(h(l))},cs=or("IE_PROTO"),co=Object.prototype,us=Object.getPrototypeOf||function(l){return l=cr(l),Ee(l,cs)?l[cs]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?co:null},Tr=Ve("iterator"),ge=!([].keys&&"next"in[].keys()),te="@@iterator",ht="keys",$e="values",_t=function(){return this},Tt=function(l,d,S,m,I,E,w){V(S,d,m);var R=function(ne){if(!ge&&ne in v)return v[ne];switch(ne){case ht:return function(){return new S(this,ne)};case $e:return function(){return new S(this,ne)}}return function(){return new S(this,ne)}},K=d+" Iterator",Z=I==$e,fe=!1,v=l.prototype,b=v[Tr]||v[te]||I&&v[I],C=b||R(I),D=I?Z?R("entries"):C:void 0,q=d=="Array"&&v.entries||b,re,oe,le;if(q&&(le=us(q.call(new l)),le!==Object.prototype&&(qe(le,K,!0),!g&&!Ee(le,Tr)&&Ht(le,Tr,_t))),Z&&b&&b.name!==$e&&(fe=!0,C=function(){return b.call(this)}),(!g||w)&&(ge||fe||!v[Tr])&&Ht(v,Tr,C),o[d]=C,o[K]=_t,I)if(re={values:Z?C:R($e),keys:E?C:R(ht),entries:D},w)for(oe in re)oe in v||On(v,oe,re[oe]);else me(me.P+me.F*(ge||fe),d,re);return re},fs=Tt(Array,"Array",function(l,d){this._t=p(l),this._i=0,this._k=d},function(){var l=this._t,d=this._k,S=this._i++;return!l||S>=l.length?(this._t=void 0,a(1)):d=="keys"?a(0,S):d=="values"?a(0,l[S]):a(0,[S,l[S]])},"values");o.Arguments=o.Array;for(var ls=Ve("toStringTag"),uo=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],oi=0;oi<5;oi++){var ci=uo[oi],ds=y[ci],ui=ds&&ds.prototype;ui&&!ui[ls]&&Ht(ui,ls,ci),o[ci]=o.Array}var fo=function(l){return function(d,S){var m=String(h(d)),I=ni(S),E=m.length,w,R;return I<0||I>=E?l?"":void 0:(w=m.charCodeAt(I),w<55296||w>56319||I+1===E||(R=m.charCodeAt(I+1))<56320||R>57343?l?m.charAt(I):w:l?m.slice(I,I+2):(w-55296<<10)+(R-56320)+65536)}},lo=fo(!0);Tt(String,"String",function(l){this._t=String(l),this._i=0},function(){var l=this._t,d=this._i,S;return d>=l.length?{value:void 0,done:!0}:(S=lo(l,d),this._i+=S.length,{value:S,done:!1})});var ho=Ve("toStringTag"),_o=u(function(){return arguments}())=="Arguments",po=function(l,d){try{return l[d]}catch{}},hs=function(l){var d,S,m;return l===void 0?"Undefined":l===null?"Null":typeof(S=po(d=Object(l),ho))=="string"?S:_o?u(d):(m=u(d))=="Object"&&typeof d.callee=="function"?"Arguments":m},So=Ve("iterator"),vo=A.isIterable=function(l){var d=Object(l);return d[So]!==void 0||"@@iterator"in d||o.hasOwnProperty(hs(d))},go=vo,_s=s(function(l){l.exports={default:go,__esModule:!0}});i(_s);var mo=Ve("iterator"),ps=A.getIteratorMethod=function(l){if(l!=null)return l[mo]||l["@@iterator"]||o[hs(l)]},Eo=A.getIterator=function(l){var d=ps(l);if(typeof d!="function")throw TypeError(l+" is not iterable!");return se(d.call(l))},yo=Eo,Ss=s(function(l){l.exports={default:yo,__esModule:!0}});i(Ss);var Io=s(function(l,d){d.__esModule=!0;var S=I(_s),m=I(Ss);function I(E){return E&&E.__esModule?E:{default:E}}d.default=function(){function E(w,R){var K=[],Z=!0,fe=!1,v=void 0;try{for(var b=(0,m.default)(w),C;!(Z=(C=b.next()).done)&&(K.push(C.value),!(R&&K.length===R));Z=!0);}catch(D){fe=!0,v=D}finally{try{!Z&&b.return&&b.return()}finally{if(fe)throw v}}return K}return function(w,R){if(Array.isArray(w))return w;if((0,S.default)(Object(w)))return E(w,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),Cr=i(Io),wo=s(function(l,d){d.__esModule=!0,d.default=function(S,m){if(!(S instanceof m))throw new TypeError("Cannot call a class as a function")}}),Zr=i(wo);me(me.S+me.F*!We,"Object",{defineProperty:Zt.f});var Ao=A.Object,bo=function(d,S,m){return Ao.defineProperty(d,S,m)},vs=s(function(l){l.exports={default:bo,__esModule:!0}});i(vs);var To=s(function(l,d){d.__esModule=!0;var S=m(vs);function m(I){return I&&I.__esModule?I:{default:I}}d.default=function(){function I(E,w){for(var R=0;R<w.length;R++){var K=w[R];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),(0,S.default)(E,K.key,K)}}return function(E,w,R){return w&&I(E.prototype,w),R&&I(E,R),E}}()}),Ge=i(To);function fi(l,d,S){var m=void 0,I=void 0;return l.allocate(d,function(E){var w=E.counter,R=E.changed,K=E.tree;d=w,m=R,I=K},S),[d,m,I]}function li(l,d,S){var m=void 0,I=void 0;return l.deallocate(d,function(E){var w=E.changed,R=E.tree;m=w,I=R},S),[m,I]}function di(l,d){var S=void 0;return l.check(d,function(m){S=m}),!!S}var gs=function(l,d){var S=(A.Object||{})[l]||Object[l],m={};m[l]=d(S),me(me.S+me.F*pe(function(){S(1)}),"Object",m)};gs("keys",function(){return function(d){return Qr(cr(d))}});var Co=A.Object.keys,Oo=s(function(l){l.exports={default:Co,__esModule:!0}}),Wo=i(Oo);gs("getPrototypeOf",function(){return function(d){return us(cr(d))}});var xo=A.Object.getPrototypeOf,Ro=s(function(l){l.exports={default:xo,__esModule:!0}}),ms=i(Ro),Fo=Ve,hi={f:Fo},ko=hi.f("iterator"),Es=s(function(l){l.exports={default:ko,__esModule:!0}});i(Es);var er=s(function(l){var d=Wn("meta"),S=Zt.f,m=0,I=Object.isExtensible||function(){return!0},E=!pe(function(){return I(Object.preventExtensions({}))}),w=function(v){S(v,d,{value:{i:"O"+ ++m,w:{}}})},R=function(v,b){if(!z(v))return typeof v=="symbol"?v:(typeof v=="string"?"S":"P")+v;if(!Ee(v,d)){if(!I(v))return"F";if(!b)return"E";w(v)}return v[d].i},K=function(v,b){if(!Ee(v,d)){if(!I(v))return!0;if(!b)return!1;w(v)}return v[d].w},Z=function(v){return E&&fe.NEED&&I(v)&&!Ee(v,d)&&w(v),v},fe=l.exports={KEY:d,NEED:!1,fastKey:R,getWeak:K,onFreeze:Z}}),N=er.KEY,O=er.NEED,L=er.fastKey,Y=er.getWeak,B=er.onFreeze,P=Zt.f,W=function(l){var d=A.Symbol||(A.Symbol=g?{}:y.Symbol||{});l.charAt(0)!="_"&&!(l in d)&&P(d,l,{value:hi.f(l)})},k=function(l,d){for(var S=p(l),m=Qr(S),I=m.length,E=0,w;I>E;)if(S[w=m[E++]]===d)return w},M=Object.getOwnPropertySymbols,G={f:M},j={}.propertyIsEnumerable,J={f:j},ae=function(l){var d=Qr(l),S=G.f;if(S)for(var m=S(l),I=J.f,E=0,w;m.length>E;)I.call(l,w=m[E++])&&d.push(w);return d},he=Array.isArray||function(d){return u(d)=="Array"},Se=xn.concat("length","prototype"),xe=Object.getOwnPropertyNames||function(d){return as(d,Se)},De={f:xe},be=De.f,pt={}.toString,it=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Yt=function(l){try{return be(l)}catch{return it.slice()}},ur=function(d){return it&&pt.call(d)=="[object Window]"?Yt(d):be(p(d))},zt={f:ur},Ct=Object.getOwnPropertyDescriptor,Rn=We?Ct:function(d,S){if(d=p(d),S=Jt(S,!0),Qt)try{return Ct(d,S)}catch{}if(Ee(d,S))return Xr(!J.f.call(d,S),d[S])},en={f:Rn},fr=er.KEY,tn=en.f,lr=Zt.f,ys=zt.f,St=y.Symbol,Is=y.JSON,ws=Is&&Is.stringify,Or="prototype",vt=Ve("_hidden"),sf=Ve("toPrimitive"),Dh={}.propertyIsEnumerable,As=qr("symbol-registry"),dr=qr("symbols"),_i=qr("op-symbols"),kt=Object[Or],Fn=typeof St=="function",Do=y.QObject,No=!Do||!Do[Or]||!Do[Or].findChild,Lo=We&&pe(function(){return Vt(lr({},"a",{get:function(){return lr(this,"a",{value:7}).a}})).a!=7})?function(l,d,S){var m=tn(kt,d);m&&delete kt[d],lr(l,d,S),m&&l!==kt&&lr(kt,d,m)}:lr,af=function(l){var d=dr[l]=Vt(St[Or]);return d._k=l,d},Uo=Fn&&typeof St.iterator=="symbol"?function(l){return typeof l=="symbol"}:function(l){return l instanceof St},bs=function(d,S,m){return d===kt&&bs(_i,S,m),se(d),S=Jt(S,!0),se(m),Ee(dr,S)?(m.enumerable?(Ee(d,vt)&&d[vt][S]&&(d[vt][S]=!1),m=Vt(m,{enumerable:Xr(0,!1)})):(Ee(d,vt)||lr(d,vt,Xr(1,{})),d[vt][S]=!0),Lo(d,S,m)):lr(d,S,m)},of=function(d,S){se(d);for(var m=ae(S=p(S)),I=0,E=m.length,w;E>I;)bs(d,w=m[I++],S[w]);return d},Nh=function(d,S){return S===void 0?Vt(d):of(Vt(d),S)},cf=function(d){var S=Dh.call(this,d=Jt(d,!0));return this===kt&&Ee(dr,d)&&!Ee(_i,d)?!1:S||!Ee(this,d)||!Ee(dr,d)||Ee(this,vt)&&this[vt][d]?S:!0},uf=function(d,S){if(d=p(d),S=Jt(S,!0),!(d===kt&&Ee(dr,S)&&!Ee(_i,S))){var m=tn(d,S);return m&&Ee(dr,S)&&!(Ee(d,vt)&&d[vt][S])&&(m.enumerable=!0),m}},ff=function(d){for(var S=ys(p(d)),m=[],I=0,E;S.length>I;)!Ee(dr,E=S[I++])&&E!=vt&&E!=fr&&m.push(E);return m},lf=function(d){for(var S=d===kt,m=ys(S?_i:p(d)),I=[],E=0,w;m.length>E;)Ee(dr,w=m[E++])&&(!S||Ee(kt,w))&&I.push(dr[w]);return I};Fn||(St=function(){if(this instanceof St)throw TypeError("Symbol is not a constructor!");var d=Wn(arguments.length>0?arguments[0]:void 0),S=function(m){this===kt&&S.call(_i,m),Ee(this,vt)&&Ee(this[vt],d)&&(this[vt][d]=!1),Lo(this,d,Xr(1,m))};return We&&No&&Lo(kt,d,{configurable:!0,set:S}),af(d)},On(St[Or],"toString",function(){return this._k}),en.f=uf,Zt.f=bs,De.f=zt.f=ff,J.f=cf,G.f=lf,We&&!g&&On(kt,"propertyIsEnumerable",cf,!0),hi.f=function(l){return af(Ve(l))}),me(me.G+me.W+me.F*!Fn,{Symbol:St});for(var pi="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Si=0;pi.length>Si;)Ve(pi[Si++]);for(var pi=Qr(Ve.store),Si=0;pi.length>Si;)W(pi[Si++]);me(me.S+me.F*!Fn,"Symbol",{for:function(l){return Ee(As,l+="")?As[l]:As[l]=St(l)},keyFor:function(d){if(Uo(d))return k(As,d);throw TypeError(d+" is not a symbol!")},useSetter:function(){No=!0},useSimple:function(){No=!1}}),me(me.S+me.F*!Fn,"Object",{create:Nh,defineProperty:bs,defineProperties:of,getOwnPropertyDescriptor:uf,getOwnPropertyNames:ff,getOwnPropertySymbols:lf}),Is&&me(me.S+me.F*(!Fn||pe(function(){var l=St();return ws([l])!="[null]"||ws({a:l})!="{}"||ws(Object(l))!="{}"})),"JSON",{stringify:function(d){if(!(d===void 0||Uo(d))){for(var S=[d],m=1,I,E;arguments.length>m;)S.push(arguments[m++]);return I=S[1],typeof I=="function"&&(E=I),(E||!he(I))&&(I=function(w,R){if(E&&(R=E.call(this,w,R)),!Uo(R))return R}),S[1]=I,ws.apply(Is,S)}}}),St[Or][sf]||Ht(St[Or],sf,St[Or].valueOf),qe(St,"Symbol"),qe(Math,"Math",!0),qe(y.JSON,"JSON",!0),W("asyncIterator"),W("observable");var Lh=A.Symbol,df=s(function(l){l.exports={default:Lh,__esModule:!0}});i(df);var Po=s(function(l,d){d.__esModule=!0;var S=E(Es),m=E(df),I=typeof m.default=="function"&&typeof S.default=="symbol"?function(w){return typeof w}:function(w){return w&&typeof m.default=="function"&&w.constructor===m.default&&w!==m.default.prototype?"symbol":typeof w};function E(w){return w&&w.__esModule?w:{default:w}}d.default=typeof m.default=="function"&&I(S.default)==="symbol"?function(w){return typeof w>"u"?"undefined":I(w)}:function(w){return w&&typeof m.default=="function"&&w.constructor===m.default&&w!==m.default.prototype?"symbol":typeof w>"u"?"undefined":I(w)}});i(Po);var Uh=s(function(l,d){d.__esModule=!0;var S=m(Po);function m(I){return I&&I.__esModule?I:{default:I}}d.default=function(I,E){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&((typeof E>"u"?"undefined":(0,S.default)(E))==="object"||typeof E=="function")?E:I}}),hf=i(Uh),_f=function(l,d){if(se(l),!z(d)&&d!==null)throw TypeError(d+": can't set as prototype!")},Ph={set:Object.setPrototypeOf||("__proto__"in{}?function(l,d,S){try{S=X(Function.call,en.f(Object.prototype,"__proto__").set,2),S(l,[]),d=!(l instanceof Array)}catch{d=!0}return function(I,E){return _f(I,E),d?I.__proto__=E:S(I,E),I}}({},!1):void 0),check:_f};me(me.S,"Object",{setPrototypeOf:Ph.set});var Bh=A.Object.setPrototypeOf,pf=s(function(l){l.exports={default:Bh,__esModule:!0}});i(pf),me(me.S,"Object",{create:Vt});var Mh=A.Object,$h=function(d,S){return Mh.create(d,S)},Sf=s(function(l){l.exports={default:$h,__esModule:!0}});i(Sf);var Gh=s(function(l,d){d.__esModule=!0;var S=E(pf),m=E(Sf),I=E(Po);function E(w){return w&&w.__esModule?w:{default:w}}d.default=function(w,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof R>"u"?"undefined":(0,I.default)(R)));w.prototype=(0,m.default)(R&&R.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),R&&(S.default?(0,S.default)(w,R):w.__proto__=R)}}),vf=i(Gh),Hh=s(function(l,d){(function(S){var m=32,I=5;function E(v){return v-=v>>>1&1431655765,v=(v&858993459)+(v>>>2&858993459),(v+(v>>>4)&252645135)*16843009>>>24}function w(v,b){for(var C=0,D=0;D<v.length;D++){C*=2;var q=(v[D]+C)/b|0;C=(v[D]+C)%b,v[D]=q}return C}function R(v,b){if(b==null){v.data=[0,0,0,0,0,0,0,0,0,0],v._=0;return}if(b instanceof K){v.data=b.data,v._=b._;return}switch(typeof b){case"number":v.data=[b|0],v._=0;break;case"string":var C=2,D=m;b.indexOf("0b")===0?b=b.substr(2):b.indexOf("0x")===0&&(b=b.substr(2),C=16,D=8),v.data=[],v._=0;var q=b.length-D,re=b.length;do{var oe=parseInt(b.slice(q>0?q:0,re),C);if(isNaN(oe))throw SyntaxError("Invalid param");if(v.data.push(oe|0),q<=0)break;q-=D,re-=D}while(1);break;default:v.data=[0];var le=v.data;if(b instanceof Array){for(var ne=b.length-1;ne>=0;ne--){var Ye=b[ne];Ye===1/0?v._=-1:(Z(v,Ye),le[Ye>>>I]|=1<<Ye)}break}if(Uint8Array&&b instanceof Uint8Array){var Ue=8;Z(v,b.length*Ue);for(var ne=0;ne<b.length;ne++)for(var kn=b[ne],nn=0;nn<Ue;nn++){var Af=ne*Ue+nn;le[Af>>>I]|=(kn>>nn&1)<<Af}break}throw SyntaxError("Invalid param")}}function K(v){if(!(this instanceof K))return new K(v);R(this,v),this.data=this.data.slice()}function Z(v,b){for(var C=b>>>I,D=v.data,q=v._,re=D.length;C>=re;C--)D.push(q)}var fe={data:[],_:0};K.prototype={data:[],_:0,set:function(v,b){return v|=0,Z(this,v),b===void 0||b?this.data[v>>>I]|=1<<v:this.data[v>>>I]&=~(1<<v),this},get:function(v){v|=0;var b=this.data,C=v>>>I;return C>b.length?this._&1:b[C]>>>v&1},not:function(){for(var v=this.clone(),b=v.data,C=0;C<b.length;C++)b[C]=~b[C];return v._=~v._,v},and:function(v){R(fe,v);var b=this.clone(),C=b.data,D=fe.data,q=D.length,re=fe._,oe=b._;oe!==0&&Z(b,q*m-1);for(var le=C.length,ne=Math.min(q,le),Ye=0;Ye<ne;Ye++)C[Ye]&=D[Ye];for(;Ye<le;Ye++)C[Ye]&=re;return b._&=re,b},or:function(v){R(fe,v);for(var b=this.clone(),C=b.data,D=fe.data,q=D.length-1,re=C.length-1,oe=Math.min(re,q),le=q;le>oe;le--)C[le]=D[le];for(;le>=0;le--)C[le]|=D[le];return b._|=fe._,b},xor:function(v){R(fe,v);var b=this.clone(),C=b.data,D=fe.data,q=b._,re=fe._,oe=0,le=C.length-1,ne=D.length-1;for(oe=le;oe>ne;oe--)C[oe]^=re;for(oe=ne;oe>le;oe--)C[oe]=q^D[oe];for(;oe>=0;oe--)C[oe]^=D[oe];return b._^=re,b},andNot:function(v){return this.and(new K(v).flip())},flip:function(v,b){if(v===void 0){for(var C=this.data,D=0;D<C.length;D++)C[D]=~C[D];this._=~this._}else if(b===void 0)Z(this,v),this.data[v>>>I]^=1<<v;else if(0<=v&&v<=b){Z(this,b);for(var D=v;D<=b;D++)this.data[D>>>I]^=1<<D}return this},clear:function(v,b){var C=this.data;if(v===void 0){for(var D=C.length-1;D>=0;D--)C[D]=0;this._=0}else if(b===void 0)v|=0,Z(this,v),C[v>>>I]&=~(1<<v);else if(v<=b){Z(this,b);for(var D=v;D<=b;D++)C[D>>>I]&=~(1<<D)}return this},slice:function(v,b){if(v===void 0)return this.clone();if(b===void 0){b=this.data.length*m;var C=Object.create(K.prototype);C._=this._,C.data=[0];for(var D=v;D<=b;D++)C.set(D-v,this.get(D));return C}else if(v<=b&&0<=v){var C=Object.create(K.prototype);C.data=[0];for(var D=v;D<=b;D++)C.set(D-v,this.get(D));return C}return null},setRange:function(v,b,C){for(var D=v;D<=b;D++)this.set(D,C);return this},clone:function(){var v=Object.create(K.prototype);return v.data=this.data.slice(),v._=this._,v},toArray:Math.clz32?function(){for(var v=[],b=this.data,C=b.length-1;C>=0;C--)for(var D=b[C];D!==0;){var q=31-Math.clz32(D);D^=1<<q,v.unshift(C*m+q)}return this._!==0&&v.push(1/0),v}:function(){for(var v=[],b=this.data,C=0;C<b.length;C++)for(var D=b[C];D!==0;){var q=D&-D;D^=q,v.push(C*m+E(q-1))}return this._!==0&&v.push(1/0),v},toString:function(v){var b=this.data;if(v||(v=2),!(v&v-1)&&v<36){for(var C="",D=2+Math.log(4294967295)/Math.log(v)|0,q=b.length-1;q>=0;q--){var re=b[q];re<0&&(re+=4294967296);var oe=re.toString(v);C!==""&&(C+="0".repeat(D-oe.length-1)),C+=oe}return this._===0?(C=C.replace(/^0+/,""),C===""&&(C="0"),C):(C="1111"+C,C.replace(/^1+/,"...1111"))}else{if(2>v||v>36)throw SyntaxError("Invalid base");for(var C=[],le=[],q=b.length;q--;)for(var ne=m;ne--;)le.push(b[q]>>>ne&1);do C.unshift(w(le,v).toString(v));while(!le.every(function(Ue){return Ue===0}));return C.join("")}},isEmpty:function(){if(this._!==0)return!1;for(var v=this.data,b=v.length-1;b>=0;b--)if(v[b]!==0)return!1;return!0},cardinality:function(){if(this._!==0)return 1/0;for(var v=0,b=this.data,C=0;C<b.length;C++){var D=b[C];D!==0&&(v+=E(D))}return v},msb:Math.clz32?function(){if(this._!==0)return 1/0;for(var v=this.data,b=v.length;b-- >0;){var C=Math.clz32(v[b]);if(C!==m)return b*m+m-1-C}return 1/0}:function(){if(this._!==0)return 1/0;for(var v=this.data,b=v.length;b-- >0;){var C=v[b],D=0;if(C){for(;(C>>>=1)>0;D++);return b*m+D}}return 1/0},ntz:function(){for(var v=this.data,b=0;b<v.length;b++){var C=v[b];if(C!==0)return C=(C^C-1)>>>1,b*m+E(C)}return 1/0},lsb:function(){for(var v=this.data,b=0;b<v.length;b++){var C=v[b],D=0;if(C){for(var q=C&-C;q>>>=1;D++);return m*b+D}}return this._&1},equals:function(v){R(fe,v);var b=this.data,C=fe.data,D=this._,q=fe._,re=b.length-1,oe=C.length-1;if(q!==D)return!1;for(var le=re<oe?re:oe,ne=0;ne<=le;ne++)if(b[ne]!==C[ne])return!1;for(ne=re;ne>oe;ne--)if(b[ne]!==q)return!1;for(ne=oe;ne>re;ne--)if(C[ne]!==D)return!1;return!0}},K.fromBinaryString=function(v){return new K("0b"+v)},K.fromHexString=function(v){return new K("0x"+v)},K.Random=function(v){(v===void 0||v<0)&&(v=m);for(var b=v%m,C=[],D=Math.ceil(v/m),q=Object.create(K.prototype),re=0;re<D;re++)C.push(Math.random()*4294967296|0);return b>0&&(C[D-1]&=(1<<b)-1),q.data=C,q._=0,q},Object.defineProperty(d,"__esModule",{value:!0}),K.default=K,K.BitSet=K,l.exports=K})(n)}),Vh=i(Hh);function Yh(l){return new Vh(new Uint8Array(l/8-1)).flip(0,l-1)}function Wr(l,d){return l.set(d,0)}function vi(l,d){return l.set(d,1)}function rn(l){return l.isEmpty()}function zh(l,d){return l.cardinality()===d}function gf(l){var d=l.ntz();return d===1/0&&(d=null),d}function Bo(l,d){return!l.get(d)}var mf=function l(d,S,m,I,E){Zr(this,l),this.blockSize=d,this.shrink=S,this.begin=m,this.depth=I,this.bitMap=E||Yh(d)},Ts=function(l){vf(d,l);function d(S,m,I,E){return Zr(this,d),hf(this,(d.__proto__||ms(d)).call(this,S,m,I,0,E))}return Ge(d,[{key:"allocate",value:function(m,I,E){var w=void 0;if(m==null?w=gf(this.bitMap):w=m-this.begin,w!==null&&w<this.blockSize)if(Bo(this.bitMap,w))I({counter:this.begin+w,changed:!1,bitMap:this.bitMap,tree:this});else{var R=void 0,K=void 0;!E||E.has(this)?(R=this.bitMap,Wr(R,w),K=this):(R=this.bitMap.clone(),Wr(R,w),K=new d(this.blockSize,this.shrink,this.begin,R),E.add(K)),I({counter:this.begin+w,changed:!0,bitMap:R,tree:K})}else{var Z=new jh(this.blockSize,this.shrink,this.begin,this.depth+1);E&&(E.add(Z),E.add(Z.bitMap)),Z.bitMapTrees[0]=this,rn(this.bitMap)&&Wr(Z.bitMap,0),Z.allocate(m,I,E)}}},{key:"deallocate",value:function(m,I,E){var w=m-this.begin;if(w>=0&&w<this.blockSize)if(Bo(this.bitMap,w)){var R=void 0,K=void 0;!E||E.has(this)?(R=this.bitMap,vi(R,w),K=this):(R=this.bitMap.clone(),vi(R,w),K=new d(this.blockSize,this.shrink,this.begin,R),E.add(K)),I({exists:!0,changed:!0,bitMap:R,tree:K})}else I({exists:!0,changed:!1,bitMap:this.bitMap,tree:this});else I({exists:!1,changed:!1,bitMap:this.bitMap,tree:this})}},{key:"check",value:function(m,I){var E=m-this.begin;E>=0&&E<this.blockSize?Bo(this.bitMap,E)?I(!0):I(!1):I(null)}}]),d}(mf),jh=function(l){vf(d,l);function d(S,m,I,E,w,R){Zr(this,d);var K=hf(this,(d.__proto__||ms(d)).call(this,S,m,I,E,w));return K.bitMapTrees=R||[],K}return Ge(d,[{key:"allocate",value:function(m,I,E){var w=this,R=void 0;if(m==null?R=gf(this.bitMap):R=Math.floor((m-this.begin)/Math.pow(this.blockSize,this.depth)),R!=null&&this.bitMapTrees[R]){var K=R;this.bitMapTrees[R].allocate(m,function(re){var oe=re.counter,le=re.changed,ne=re.bitMap,Ye=re.tree,Ue=w.bitMap,kn=w;if(le){if(!E&&rn(ne))Wr(Ue,K);else if(E&&E.has(w))rn(ne)&&(E.has(w.bitMap)||(Ue=w.bitMap.clone(),E.add(Ue),w.bitMap=Ue),Wr(Ue,K)),kn.bitMapTrees[K]=Ye;else if(E){rn(ne)&&(Ue=w.bitMap.clone(),E.add(Ue),Wr(Ue,K));var nn=w.bitMapTrees.slice();nn[K]=Ye,kn=new d(w.blockSize,w.shrink,w.begin,w.depth,Ue,nn),E.add(kn)}}I({counter:oe,changed:le,bitMap:Ue,tree:kn})},E)}else if(R===null||R>=this.blockSize){var Z=new d(this.blockSize,this.shrink,this.begin,this.depth+1);E&&(E.add(Z),E.add(Z.bitMap)),Z.bitMapTrees[0]=this,rn(this.bitMap)&&Wr(Z.bitMap,0),Z.allocate(m,I,E)}else{var fe=this.begin+R*Math.pow(this.blockSize,this.depth),v=this.depth-1,b=void 0;v===0?b=new Ts(this.blockSize,this.shrink,fe):b=new d(this.blockSize,this.shrink,fe,v),E&&(E.add(b),E.add(b.bitMap));var C=void 0;if(!E||E.has(this))this.bitMapTrees[R]=b,C=this;else{var D=this.bitMapTrees.slice();D[R]=b,C=new d(this.blockSize,this.shrink,this.begin,this.depth,this.bitMap,D),E.add(C)}var q=R;b.allocate(m,function(re){var oe=re.counter,le=re.changed,ne=re.bitMap,Ye=re.tree,Ue=w.bitMap;ne&&rn(ne)&&(E&&!E.has(w.bitMap)&&(Ue=w.bitMap.clone(),E.add(Ue),C.bitMap=Ue),Wr(Ue,q)),I({counter:oe,changed:le,bitMap:Ue,tree:C})},E)}}},{key:"deallocate",value:function(m,I,E){var w=this,R=Math.floor((m-this.begin)/Math.pow(this.blockSize,this.depth));if(this.bitMapTrees[R]){var K=rn(this.bitMapTrees[R].bitMap);this.bitMapTrees[R].deallocate(m,function(Z){var fe=Z.exists,v=Z.changed,b=Z.bitMap,C=Z.tree,D=w.bitMap,q=w;if(!fe)I({exists:fe,changed:v,bitMap:D,tree:q});else{if(v){if(!E&&K)vi(D,R);else if(E&&E.has(w))K&&(E.has(w.bitMap)||(D=w.bitMap.clone(),E.add(D),w.bitMap=D),vi(D,R)),q.bitMapTrees[R]=C;else if(E){K&&(D=w.bitMap.clone(),E.add(D),vi(D,R));var re=w.bitMapTrees.slice();re[R]=C,q=new d(w.blockSize,w.shrink,w.begin,w.depth,D,re),E.add(q)}w.shrink&&(C instanceof Ts&&zh(b,w.blockSize)||C instanceof d&&Wo(C.bitMapTrees).length===0)&&delete q.bitMapTrees[R]}I({exists:!0,changed:v,bitMap:D,tree:q})}},E)}else I({exists:!1,changed:!1,bitMap:this.bitMap,tree:this})}},{key:"check",value:function(m,I){var E=Math.floor((m-this.begin)/Math.pow(this.blockSize,this.depth));this.bitMapTrees[E]?this.bitMapTrees[E].check(m,function(w){I(w)}):I(null)}}]),d}(mf),Kh=function(){function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,I=arguments[3];if(Zr(this,l),S%32!==0)throw new RangeError("Blocksize for Counter must be a multiple of 32");this._begin=d,this._tree=I||new Ts(S,m,0)}return Ge(l,[{key:"allocate",value:function(S){if(S!=null){if(S<this._begin)throw new RangeError("counter needs to be greater or equal to the beginning offset");S=S-this._begin}var m=fi(this._tree,S),I=Cr(m,3),E=I[0],w=I[1],R=I[2];return this._tree=R,S==null?E+this._begin:w}},{key:"deallocate",value:function(S){var m=li(this._tree,S-this._begin),I=Cr(m,2),E=I[0],w=I[1];return this._tree=w,E}},{key:"check",value:function(S){return di(this._tree,S-this._begin)}}]),l}(),Ef=function(l,d,S){for(var m in d)S&&l[m]?l[m]=d[m]:Ht(l,m,d[m]);return l},Mo=function(l,d,S,m){if(!(l instanceof d)||m!==void 0&&m in l)throw TypeError(S+": incorrect invocation!");return l},Xh=function(l,d,S,m){try{return m?d(se(S)[0],S[1]):d(S)}catch(E){var I=l.return;throw I!==void 0&&se(I.call(l)),E}},qh=Ve("iterator"),Qh=Array.prototype,Jh=function(l){return l!==void 0&&(o.Array===l||Qh[qh]===l)},yf=s(function(l){var d={},S={},m=l.exports=function(I,E,w,R,K){var Z=K?function(){return I}:ps(I),fe=X(w,R,E?2:1),v=0,b,C,D,q;if(typeof Z!="function")throw TypeError(I+" is not iterable!");if(Jh(Z)){for(b=ii(I.length);b>v;v++)if(q=E?fe(se(C=I[v])[0],C[1]):fe(I[v]),q===d||q===S)return q}else for(D=Z.call(I);!(C=D.next()).done;)if(q=Xh(D,fe,C.value,E),q===d||q===S)return q};m.BREAK=d,m.RETURN=S}),Zh=Ve("species"),e_=function(l){var d;return he(l)&&(d=l.constructor,typeof d=="function"&&(d===Array||he(d.prototype))&&(d=void 0),z(d)&&(d=d[Zh],d===null&&(d=void 0))),d===void 0?Array:d},t_=function(l,d){return new(e_(l))(d)},$o=function(l,d){var S=l==1,m=l==2,I=l==3,E=l==4,w=l==6,R=l==5||w,K=d||t_;return function(Z,fe,v){for(var b=cr(Z),C=f(b),D=X(fe,v,3),q=ii(C.length),re=0,oe=S?K(Z,q):m?K(Z,0):void 0,le,ne;q>re;re++)if((R||re in C)&&(le=C[re],ne=D(le,re,b),l)){if(S)oe[re]=ne;else if(ne)switch(l){case 3:return!0;case 5:return le;case 6:return re;case 2:oe.push(le)}else if(E)return!1}return w?-1:I||E?E:oe}},Go=er.getWeak,r_=$o(5),n_=$o(6),i_=0,Cs=function(l){return l._l||(l._l=new If)},If=function(){this.a=[]},Ho=function(l,d){return r_(l.a,function(S){return S[0]===d})};If.prototype={get:function(l){var d=Ho(this,l);if(d)return d[1]},has:function(l){return!!Ho(this,l)},set:function(l,d){var S=Ho(this,l);S?S[1]=d:this.a.push([l,d])},delete:function(l){var d=n_(this.a,function(S){return S[0]===l});return~d&&this.a.splice(d,1),!!~d}};var wf={getConstructor:function(l,d,S,m){var I=l(function(E,w){Mo(E,I,d,"_i"),E._i=i_++,E._l=void 0,w!=null&&yf(w,S,E[m],E)});return Ef(I.prototype,{delete:function(E){if(!z(E))return!1;var w=Go(E);return w===!0?Cs(this).delete(E):w&&Ee(w,this._i)&&delete w[this._i]},has:function(w){if(!z(w))return!1;var R=Go(w);return R===!0?Cs(this).has(w):R&&Ee(R,this._i)}}),I},def:function(l,d,S){var m=Go(se(d),!0);return m===!0?Cs(l).set(d,S):m[l._i]=S,l},ufstore:Cs},s_=Zt.f,a_=$o(0),o_=function(l,d,S,m,I,E){var w=y[l],R=w,K=I?"set":"add",Z=R&&R.prototype,fe={};return!We||typeof R!="function"||!(E||Z.forEach&&!pe(function(){new R().entries().next()}))?(R=m.getConstructor(d,l,I,K),Ef(R.prototype,S),er.NEED=!0):(R=d(function(v,b){Mo(v,R,l,"_c"),v._c=new w,b!=null&&yf(b,I,v[K],v)}),a_("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(v){var b=v=="add"||v=="set";v in Z&&!(E&&v=="clear")&&Ht(R.prototype,v,function(C,D){if(Mo(this,R,v),!b&&E&&!z(C))return v=="get"?void 0:!1;var q=this._c[v](C===0?0:C,D);return b?this:q})}),"size"in Z&&s_(R.prototype,"size",{get:function(){return this._c.size}})),qe(R,l),fe[l]=R,me(me.G+me.W+me.F,fe),E||m.setStrong(R,l,I),R};o_("WeakSet",function(l){return function(){return l(this,arguments.length>0?arguments[0]:void 0)}},{add:function(d){return wf.def(this,d,!0)}},wf,!1,!0);var c_=A.WeakSet,u_=s(function(l){l.exports={default:c_,__esModule:!0}}),Vo=i(u_),f_=function(){function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,I=arguments[3];if(Zr(this,l),S%32!==0)throw new RangeError("Blocksize for Counter must be a multiple of 32");this._begin=d,this._blockSize=S,this._shrink=m,this._tree=I||new Ts(S,m,0)}return Ge(l,[{key:"allocate",value:function(S){if(S!=null){if(S<this._begin)throw new RangeError("counter needs to be greater or equal to the beginning offset");S=S-this._begin}var m=fi(this._tree,S,new Vo),I=Cr(m,3),E=I[0],w=I[1],R=I[2],K=void 0;return w?K=new l(this._begin,this._blockSize,this._shrink,R):K=this,S==null?[E+this._begin,K]:[w,K]}},{key:"deallocate",value:function(S){var m=li(this._tree,S-this._begin,new Vo),I=Cr(m,2),E=I[0],w=I[1],R=void 0;return E?R=new l(this._begin,this._blockSize,this._shrink,w):R=this,[E,R]}},{key:"check",value:function(S){return di(this._tree,S-this._begin)}},{key:"transaction",value:function(S){var m=this,I=new Vo,E=this._tree,w=!1,R={allocate:function(Z){if(Z!=null){if(Z<m._begin)throw new RangeError("counter needs to be greater or equal to the beginning offset");Z=Z-m._begin}var fe=fi(E,Z,I),v=Cr(fe,3),b=v[0],C=v[1],D=v[2];return w=C,E=D,Z==null?b+m._begin:w},deallocate:function(Z){var fe=li(E,Z-m._begin,I),v=Cr(fe,2),b=v[0],C=v[1];return w=b,E=C,w},check:function(Z){return di(E,Z-m._begin)}};return S(R),w?new l(this._begin,this._blockSize,this._shrink,E):this}}]),l}();t.default=Kh,t.CounterImmutable=f_,Object.defineProperty(t,"__esModule",{value:!0})})}),oa=Oe(_S),pS=12,ca=20,jd=Math.pow(2,pS)-1,Kd=Math.pow(2,ca)-1,Yc=0,zc=0,Hn=function(r){Ar(e,r);function e(t,n){rt(this,e);var i=wr(this,(e.__proto__||Ce(e)).call(this,n));return i.code=t,i}return e}(Error);Object.defineProperty(Hn,"ERROR_RANGE",{value:1});Object.defineProperty(Hn,"ERROR_CONFLICT",{value:2});var Aa=function(){function r(){rt(this,r),this._chrCounterMaj=new oa(Yc),this._chrDevices=new Li}return ct(r,[{key:"getChr",value:function(t,n){var i=this._chrDevices.get(t);if(i){var s=gt(i,1),a=s[0];return a.get(n)}}},{key:"registerChr",value:function(t,n,i){var s=void 0,a=void 0,o=void 0,c=void 0;try{if(n===void 0)n=this._chrCounterMaj.allocate(),s=n;else{var u=this._chrDevices.get(n);if(!u)this._chrCounterMaj.allocate(n),s=n;else{var f=gt(u,2);c=f[0],o=f[1]}}if((!c||!o)&&(o=new oa(zc),c=new Li),i===void 0)i=o.allocate(),a=i;else if(!c.has(i))o.allocate(i),a=i;else throw new Hn(Hn.ERROR_CONFLICT);if(n>jd||n<Yc||i>Kd||i<zc)throw new Hn(Hn.ERROR_RANGE);c.set(i,t),this._chrDevices.set(n,[c,o]);return}catch(h){throw s!=null&&this._chrCounterMaj.deallocate(s),a!=null&&o&&o.deallocate(a),h}}},{key:"deregisterChr",value:function(t,n){var i=this._chrDevices.get(t);if(i){var s=gt(i,2),a=s[0],o=s[1];a.delete(n)&&o.deallocate(n),a.size||(this._chrDevices.delete(t),this._chrCounterMaj.deallocate(t))}}}]),r}();function Ft(r,e){return r<<ca|e}function gu(r){var e=r>>ca,t=r&(1<<ca)-1;return[e,t]}var gc=Pt.getWeak,SS=wa(5),vS=wa(6),gS=0,Vs=function(r){return r._l||(r._l=new Xd)},Xd=function(){this.a=[]},mc=function(r,e){return SS(r.a,function(t){return t[0]===e})};Xd.prototype={get:function(r){var e=mc(this,r);if(e)return e[1]},has:function(r){return!!mc(this,r)},set:function(r,e){var t=mc(this,r);t?t[1]=e:this.a.push([r,e])},delete:function(r){var e=vS(this.a,function(t){return t[0]===r});return~e&&this.a.splice(e,1),!!~e}};var Ys={getConstructor:function(r,e,t,n){var i=r(function(s,a){Ni(s,i,e,"_i"),s._t=e,s._i=gS++,s._l=void 0,a!=null&&jr(a,t,s[n],s)});return Ia(i.prototype,{delete:function(s){if(!He(s))return!1;var a=gc(s);return a===!0?Vs(Rt(this,e)).delete(s):a&&we(a,this._i)&&delete a[this._i]},has:function(a){if(!He(a))return!1;var o=gc(a);return o===!0?Vs(Rt(this,e)).has(a):o&&we(o,this._i)}}),i},def:function(r,e,t){var n=gc(ot(e),!0);return n===!0?Vs(r).set(e,t):n[r._i]=t,r},ufstore:Vs},Gm=_e(function(r){var e=wa(0),t=Rt,n=!ue.ActiveXObject&&"ActiveXObject"in ue,i="WeakMap",s=Pt.getWeak,a=Object.isExtensible,o=Ys.ufstore,c,u=function(p){return function(){return p(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(g){if(He(g)){var y=s(g);return y===!0?o(Rt(this,i)).get(g):y?y[this._i]:void 0}},set:function(g,y){return Ys.def(Rt(this,i),g,y)}},h=r.exports=$d(i,u,f,Ys,!0,!0);t&&n&&(c=Ys.getConstructor(u,i),yd(c.prototype,f),Pt.NEED=!0,e(["delete","has","get","set"],function(p){var g=h.prototype,y=g[p];na(g,p,function(A,H){if(He(A)&&!a(A)){this._f||(this._f=new c);var $=this._f[p](A,H);return p=="set"?this:$}return y.call(this,A,H)})}))});Gd("WeakMap");Hd("WeakMap");var mS=Ae.WeakMap,ES=_e(function(r){r.exports={default:mS,__esModule:!0}}),yS=Oe(ES),IS=Ke("species"),qd=function(r,e){var t=ot(r).constructor,n;return t===void 0||(n=ot(t)[IS])==null?e:mn(n)},wS=function(r,e,t){var n=t===void 0;switch(e.length){case 0:return n?r():r.call(t);case 1:return n?r(e[0]):r.call(t,e[0]);case 2:return n?r(e[0],e[1]):r.call(t,e[0],e[1]);case 3:return n?r(e[0],e[1],e[2]):r.call(t,e[0],e[1],e[2]);case 4:return n?r(e[0],e[1],e[2],e[3]):r.call(t,e[0],e[1],e[2],e[3])}return r.apply(t,e)},El=ue.process,jc=ue.setImmediate,Kc=ue.clearImmediate,yl=ue.MessageChannel,Ec=ue.Dispatch,yc=0,ki={},Il="onreadystatechange",hn,Ic,wc,Ri=function(){var r=+this;if(ki.hasOwnProperty(r)){var e=ki[r];delete ki[r],e()}},wl=function(r){Ri.call(r.data)};(!jc||!Kc)&&(jc=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ki[++yc]=function(){wS(typeof e=="function"?e:Function(e),t)},hn(yc),yc},Kc=function(e){delete ki[e]},yn(El)=="process"?hn=function(r){El.nextTick(Qe(Ri,r,1))}:Ec&&Ec.now?hn=function(r){Ec.now(Qe(Ri,r,1))}:yl?(Ic=new yl,wc=Ic.port2,Ic.port1.onmessage=wl,hn=Qe(wc.postMessage,wc,1)):ue.addEventListener&&typeof postMessage=="function"&&!ue.importScripts?(hn=function(r){ue.postMessage(r+"","*")},ue.addEventListener("message",wl,!1)):Il in ra("script")?hn=function(r){Lc.appendChild(ra("script"))[Il]=function(){Lc.removeChild(this),Ri.call(r)}}:hn=function(r){setTimeout(Qe(Ri,r,1),0)});var Qd={set:jc,clear:Kc},AS=Qd.set,Al=ue.MutationObserver||ue.WebKitMutationObserver,Xc=ue.process,Ac=ue.Promise,bl=yn(Xc)=="process",bS=function(){var r,e,t,n=function(){var o,c;for(bl&&(o=Xc.domain)&&o.exit();r;){c=r.fn,r=r.next;try{c()}catch(u){throw r?t():e=void 0,u}}e=void 0,o&&o.enter()};if(bl)t=function(){Xc.nextTick(n)};else if(Al&&!(ue.navigator&&ue.navigator.standalone)){var i=!0,s=document.createTextNode("");new Al(n).observe(s,{characterData:!0}),t=function(){s.data=i=!i}}else if(Ac&&Ac.resolve){var a=Ac.resolve(void 0);t=function(){a.then(n)}}else t=function(){AS.call(ue,n)};return function(o){var c={fn:o,next:void 0};e&&(e.next=c),r||(r=c,t()),e=c}};function TS(r){var e,t;this.promise=new r(function(n,i){if(e!==void 0||t!==void 0)throw TypeError("Bad Promise constructor");e=n,t=i}),this.resolve=mn(e),this.reject=mn(t)}var CS=function(r){return new TS(r)},ba={f:CS},ua=function(r){try{return{e:!1,v:r()}}catch(e){return{e:!0,v:e}}},Tl=ue.navigator,OS=Tl&&Tl.userAgent||"",qc=function(r,e){if(ot(r),He(e)&&e.constructor===r)return e;var t=ba.f(r),n=t.resolve;return n(e),t.promise},Jd=Qd.set,Zd=bS(),Kr="Promise",eh=ue.TypeError,Kn=ue.process,Cl=Kn&&Kn.versions,WS=Cl&&Cl.v8||"",nr=ue[Kr],Ui=ya(Kn)=="process",ea=function(){},zs,th,Ol,mu,Pi=th=ba.f,Hi=!!function(){try{var r=nr.resolve(1),e=(r.constructor={})[Ke("species")]=function(t){t(ea,ea)};return(Ui||typeof PromiseRejectionEvent=="function")&&r.then(ea)instanceof e&&WS.indexOf("6.6")!==0&&OS.indexOf("Chrome/66")===-1}catch{}}(),rh=function(r){var e;return He(r)&&typeof(e=r.then)=="function"?e:!1},Eu=function(r,e){if(!r._n){r._n=!0;var t=r._c;Zd(function(){for(var n=r._v,i=r._s==1,s=0,a=function(o){var c=i?o.ok:o.fail,u=o.resolve,f=o.reject,h=o.domain,p,g,y;try{c?(i||(r._h==2&&RS(r),r._h=1),c===!0?p=n:(h&&h.enter(),p=c(n),h&&(h.exit(),y=!0)),p===o.promise?f(eh("Promise-chain cycle")):(g=rh(p))?g.call(p,u,f):u(p)):f(n)}catch(A){h&&!y&&h.exit(),f(A)}};t.length>s;)a(t[s++]);r._c=[],r._n=!1,e&&!r._h&&xS(r)})}},xS=function(r){Jd.call(ue,function(){var e=r._v,t=Wl(r),n,i,s;if(t&&(n=ua(function(){Ui?Kn.emit("unhandledRejection",e,r):(i=ue.onunhandledrejection)?i({promise:r,reason:e}):(s=ue.console)&&s.error&&s.error("Unhandled promise rejection",e)}),r._h=Ui||Wl(r)?2:1),r._a=void 0,t&&n.e)throw n.v})},Wl=function(r){return r._h!==1&&(r._a||r._c).length===0},RS=function(r){Jd.call(ue,function(){var e;Ui?Kn.emit("rejectionHandled",r):(e=ue.onrejectionhandled)&&e({promise:r,reason:r._v})})},Yn=function(r){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=r,e._s=2,e._a||(e._a=e._c.slice()),Eu(e,!0))},Qc=function(r){var e=this,t;if(!e._d){e._d=!0,e=e._w||e;try{if(e===r)throw eh("Promise can't be resolved itself");(t=rh(r))?Zd(function(){var n={_w:e,_d:!1};try{t.call(r,Qe(Qc,n,1),Qe(Yn,n,1))}catch(i){Yn.call(n,i)}}):(e._v=r,e._s=1,Eu(e,!1))}catch(n){Yn.call({_w:e,_d:!1},n)}}};Hi||(nr=function(e){Ni(this,nr,Kr,"_h"),mn(e),zs.call(this);try{e(Qe(Qc,this,1),Qe(Yn,this,1))}catch(t){Yn.call(this,t)}},zs=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},zs.prototype=Ia(nr.prototype,{then:function(e,t){var n=Pi(qd(this,nr));return n.ok=typeof e=="function"?e:!0,n.fail=typeof t=="function"&&t,n.domain=Ui?Kn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Eu(this,!1),n.promise},catch:function(r){return this.then(void 0,r)}}),Ol=function(){var r=new zs;this.promise=r,this.resolve=Qe(Qc,r,1),this.reject=Qe(Yn,r,1)},ba.f=Pi=function(r){return r===nr||r===mu?new Ol(r):th(r)});Q(Q.G+Q.W+Q.F*!Hi,{Promise:nr});In(nr,Kr);Bd(Kr);mu=Ae[Kr];Q(Q.S+Q.F*!Hi,Kr,{reject:function(e){var t=Pi(this),n=t.reject;return n(e),t.promise}});Q(Q.S+Q.F*(gn||!Hi),Kr,{resolve:function(e){return qc(gn&&this===mu?nr:this,e)}});Q(Q.S+Q.F*!(Hi&&Td(function(r){nr.all(r).catch(ea)})),Kr,{all:function(e){var t=this,n=Pi(t),i=n.resolve,s=n.reject,a=ua(function(){var o=[],c=0,u=1;jr(e,!1,function(f){var h=c++,p=!1;o.push(void 0),u++,t.resolve(f).then(function(g){p||(p=!0,o[h]=g,--u||i(o))},s)}),--u||i(o)});return a.e&&s(a.v),n.promise},race:function(e){var t=this,n=Pi(t),i=n.reject,s=ua(function(){jr(e,!1,function(a){t.resolve(a).then(n.resolve,i)})});return s.e&&i(s.v),n.promise}});Q(Q.P+Q.R,"Promise",{finally:function(r){var e=qd(this,Ae.Promise||ue.Promise),t=typeof r=="function";return this.then(t?function(n){return qc(e,r()).then(function(){return n})}:r,t?function(n){return qc(e,r()).then(function(){throw n})}:r)}});Q(Q.S,"Promise",{try:function(r){var e=ba.f(this),t=ua(r);return(t.e?e.reject:e.resolve)(t.v),e.promise}});var FS=Ae.Promise,kS=_e(function(r){r.exports={default:FS,__esModule:!0}}),bc=Oe(kS);Q(Q.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}});var DS=Ae.Math.log2,NS=_e(function(r){r.exports={default:DS,__esModule:!0}}),LS=Oe(NS);function fa(r,e){if(r.maxByteLength<e){var t=1<<Math.ceil(LS(e)),n=new ArrayBuffer(e,{maxByteLength:t}),i=new Uint8Array(r),s=new Uint8Array(n);return s.set(i),n}return r.byteLength<e&&r.resize(e),r}function Jc(r,e){var t=r.byteLength+e.byteLength,n=r;r.maxByteLength<t&&(newBuf=fa(r,t),newBuf.set(e,r.byteLength),n=newBuf);var i=new Uint8Array(n),s=new Uint8Array(e);return i.set(s,r.byteLength),newBuf}function xl(r){var e=new ArrayBuffer(r.byteLength,{maxByteLength:r.maxByteLength}),t=new Uint8Array(r),n=new Uint8Array(e);return n.set(t,r.byteLength),e}var Vi=function(){function r(e,t){rt(this,r);var n=new Date;this._metadata=new Zs($n({},e,{mode:e.mode,nlink:e.nlink||0,atime:n,mtime:n,ctime:n,birthtime:n})),this._iNodeMgr=t}return ct(r,[{key:"getMetadata",value:function(){return this._metadata}}]),r}(),mt=function(r){Ar(e,r);function e(t,n){rt(this,e);var i=wr(this,(e.__proto__||Ce(e)).call(this,{ino:t.ino,uid:t.uid,gid:t.gid,mode:T.S_IFREG|t.mode&~T.S_IFMT,size:t.data?t.data.byteLength:0},n));return i._data=t.data?t.data:new ArrayBuffer(0),i}return ct(e,[{key:"getData",value:function(){return this._data}},{key:"setData",value:function(n){this._data=n}},{key:"read",value:function(){}},{key:"write",value:function(n,i,s){var a=this._data,o=void 0;if(s)a=Jc(a,n),o=n.byteLength;else{i=a.byteLength<i?a.byteLength:i;var c=a.byteLength-i,u=n.byteLength-c;u>0&&(a=fa(a,a.byteLength+u)),o=n.byteLength;var f=new Uint8Array(a);f.set(new Uint8Array(n),i)}return this._data=a,this._metadata.size=this._data.byteLength,o}},{key:"destructor",value:function(){}}]),e}(Vi),ke=function(r){Ar(e,r);function e(t,n){rt(this,e),t.parent===void 0&&(t.parent=t.ino);var i=void 0;t.parent===t.ino?i=2:(i=1,n.linkINode(n.getINode(t.parent)));var s=wr(this,(e.__proto__||Ce(e)).call(this,{ino:t.ino,mode:T.S_IFDIR|t.mode&~T.S_IFMT,uid:t.uid,gid:t.gid,nlink:i,size:4096},n));return s._dir=new Li([[".",t.ino],["..",t.parent]]),s}return ct(e,[{key:"getEntries",value:function(){return this._metadata.atime=new Date,this._dir.entries()}},{key:"getEntryIndex",value:function(n){return this._dir.get(n)}},{key:"getEntry",value:function(n){var i=this._dir.get(n);if(i!==void 0)return this._iNodeMgr.getINode(i)}},{key:"addEntry",value:function(n,i){if(n==="."||n==="..")throw new Error("Not allowed to add `.` or `..` entries");var s=new Date;this._metadata.mtime=s,this._metadata.ctime=s,this._iNodeMgr.linkINode(this._iNodeMgr.getINode(i)),this._dir.set(n,i)}},{key:"deleteEntry",value:function(n){if(n==="."||n==="..")throw new Error("Not allowed to delete `.` or `..` entries");var i=this._dir.get(n);if(i!==void 0){var s=new Date;this._metadata.mtime=s,this._metadata.ctime=s,this._dir.delete(n),this._iNodeMgr.unlinkINode(this._iNodeMgr.getINode(i))}}},{key:"renameEntry",value:function(n,i){if(n==="."||n===".."||i==="."||n==="..")throw new Error("Not allowed to rename `.` or `..` entries");var s=this._dir.get(n);if(s!=null){var a=new Date;this._metadata.mtime=a,this._metadata.ctime=a,this._dir.delete(n),this._dir.set(i,s)}}},{key:"destructor",value:function(){if(this._dir.get(".")!==this._dir.get("..")){var n=this._dir.get("..");n!=null&&this._iNodeMgr.unlinkINode(this._iNodeMgr.getINode(n))}}}]),e}(Vi),zn=function(r){Ar(e,r);function e(t,n){rt(this,e);var i=wr(this,(e.__proto__||Ce(e)).call(this,{ino:t.ino,mode:T.S_IFLNK|t.mode&~T.S_IFMT,uid:t.uid,gid:t.gid,size:new TextEncoder().encode(t.link).byteLength},n));return i._link=t.link,i}return ct(e,[{key:"getLink",value:function(){return this._link}},{key:"destructor",value:function(){}}]),e}(Vi),qt=function(r){Ar(e,r);function e(t,n){rt(this,e);var i=wr(this,(e.__proto__||Ce(e)).call(this,{ino:t.ino,mode:T.S_IFCHR|t.mode&~T.S_IFMT,uid:t.uid,gid:t.gid,rdev:t.rdev,size:0},n));return i.teardown=t.teardown,i}return ct(e,[{key:"getFileDesOps",value:function(){var n=gu(this.getMetadata().rdev),i=gt(n,2),s=i[0],a=i[1];return this._iNodeMgr._devMgr.getChr(s,a)}},{key:"destructor",value:function(){this.teardown!==void 0&&this.teardown()}}]),e}(Vi),Yi=function(r){Ar(e,r);function e(t,n){rt(this,e);var i=wr(this,(e.__proto__||Ce(e)).call(this,{ino:t.ino,mode:T.S_IFIFO|t.mode&~T.S_IFMT,uid:t.uid,gid:t.gid,size:0},n));return i.KERN_W=0,i.KERN_R=1,i.CLOSERM=2,i.teardown=t.teardown,i.reader=-1,i.writer=-1,i.messages=[],i.readQueue=[],i.pollQueue=[],i.mode=0,i}return ct(e,[{key:"setMode",value:function(n,i){i?this.mode|=1<<n:this.mode&=~(1<<n)}},{key:"isKernW",value:function(){return(this.mode&1<<this.KERN_W)!==0}},{key:"isKernR",value:function(){return(this.mode&1<<this.KERN_R)!==0}},{key:"isCloserm",value:function(){return(this.mode&1<<this.CLOSERM)!==0}},{key:"notify",value:function(n){for(var i=this.pollQueue.shift();i!==void 0;i=this.pollQueue.shift())i(n)}},{key:"sendEof",value:function(){for(var n=this.readQueue.shift();n!==void 0;n=this.readQueue.shift())n(new ArrayBuffer);this.notify(0)}},{key:"write",value:function(n){var i=this.readQueue.shift();if(i!==void 0){i(n);return}this.messages.push(n),this.notify(n.byteLength)}},{key:"read",value:function(){var n=this,i=this.messages.shift();return i===void 0?this.writer===0?new ArrayBuffer:new bc(function(s){n.readQueue.push(s)}):i}},{key:"addPollSub",value:function(){var n=this;return this.messages.length!==0?bc.resolve(this.messages[0].byteLength):new bc(function(i){n.pollQueue.push(i)})}},{key:"destructor",value:function(){this.teardown!==void 0&&this.teardown()}}]),e}(Vi),yu=function(){function r(e){rt(this,r),this._counter=new oa(1),this._iNodes=new Li,this._iNodeRefs=new yS,this._devMgr=e}return ct(r,[{key:"createINode",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n.ino=this._counter.allocate(),n.mode=typeof n.mode=="number"?n.mode:0,n.uid=typeof n.uid=="number"?n.uid:tr,n.gid=typeof n.gid=="number"?n.gid:Vc;var i=new t(n,this);return this._iNodes.set(n.ino,i),this._iNodeRefs.set(i,0),[i,n.ino]}},{key:"getINode",value:function(t){return this._iNodes.get(t)}},{key:"linkINode",value:function(t){t&&++t.getMetadata().nlink}},{key:"unlinkINode",value:function(t){t&&(--t.getMetadata().nlink,this._gcINode(t))}},{key:"refINode",value:function(t){if(t){var n=this._iNodeRefs.get(t);n!==void 0&&this._iNodeRefs.set(t,n+1)}}},{key:"unrefINode",value:function(t){if(t){var n=this._iNodeRefs.get(t);n!==void 0&&(this._iNodeRefs.set(t,n-1),this._gcINode(t))}}},{key:"_gcINode",value:function(t){var n=t.getMetadata(),i=n.nlink+this._iNodeRefs.get(t);if(i===0||i===1&&t instanceof ke){var s=n.ino;t.destructor(),this._iNodes.delete(s),this._counter.deallocate(s)}}}]),r}(),US=_e(function(r){(function(e,t,n){r.exports?r.exports=n():t[e]=n()})("prr",vn,function(){var e=typeof Object.defineProperty=="function"?function(i,s,a){return Object.defineProperty(i,s,a),i}:function(i,s,a){return i[s]=a.value,i},t=function(i,s){var a=typeof s=="object",o=!a&&typeof s=="string",c=function(u){return a?!!s[u]:o?s.indexOf(u[0])>-1:!1};return{enumerable:c("enumerable"),configurable:c("configurable"),writable:c("writable"),value:i}},n=function(i,s,a,o){var c;if(o=t(a,o),typeof s=="object"){for(c in s)Object.hasOwnProperty.call(s,c)&&(o.value=s[c],e(i,c,o));return i}return e(i,s,o)};return n})});function nh(r,e,t){e&&typeof e!="string"&&(e=e.message||e.name),US(this,{type:r,name:r,cause:typeof e!="string"?e:t,message:e},"ewr")}function Iu(r,e){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),nh.call(this,"CustomError",r,e)}Iu.prototype=new Error;function PS(r,e,t){var n=function(i,s){nh.call(this,e,i,s),e=="FilesystemError"&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(r.errno[this.cause.errno]?r.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,n)};return n.prototype=t?new t:new Iu,n}var BS=function(r){var e=function(t,n){return PS(r,t,n)};return{CustomError:Iu,FilesystemError:e("FilesystemError"),createError:e}},zi=_e(function(r){var e=r.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];r.exports.errno={},r.exports.code={},e.forEach(function(t){r.exports.errno[t.errno]=t,r.exports.code[t.code]=t}),r.exports.custom=BS(r.exports),r.exports.create=r.exports.custom.createError}),Hm=zi.all,Vm=zi.errno,F=zi.code,Ym=zi.custom,zm=zi.create,x=function(r){Ar(e,r);function e(t,n,i,s){rt(this,e);var a=t.code+": "+t.description;n!=null&&(a+=", "+n,i!=null&&(a+=" -> "+i));var o=wr(this,(e.__proto__||Ce(e)).call(this,a));return o.errno=t.errno,o.code=t.code,o.errnoDescription=t.description,s!=null&&(o.syscall=s),o}return ct(e,[{key:"setPaths",value:function(n,i){var s=this.code+": "+this.errnoDescription+", "+n;i!=null&&(s+=" -> "+i),this.message=s}},{key:"setSyscall",value:function(n){this.syscall=n}}]),e}(Error),MS=function(){function r(e,t){rt(this,r),this._iNode=e,this._flags=t,this._pos=0}return ct(r,[{key:"getINode",value:function(){return this._iNode}},{key:"getFlags",value:function(){return this._flags}},{key:"setFlags",value:function(t){this._flags=t}},{key:"getPos",value:function(){return this._pos}},{key:"setPos",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.SEEK_SET,i=this.getINode(),s=void 0;switch(!0){case i instanceof mt:case i instanceof ke:switch(n){case T.SEEK_SET:s=t;break;case T.SEEK_CUR:s=this._pos+t;break;case T.SEEK_END:s=i.getData().length+t;break;default:s=this._pos}if(s<0)throw new x(F.EINVAL);this._pos=s;break;case i instanceof qt:var a=i.getFileDesOps();if(a)if(a.setPos)a.setPos(this,t,n);else throw new x(F.ESPIPE);else throw new x(F.ENXIO);break;default:throw new x(F.ESPIPE)}}},{key:"read",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=void 0;n===null?i=this._pos:i=n;var s=this._iNode,a=void 0;switch(!0){case s instanceof mt:var o=s.getData(),c=s.getMetadata();a=o.copy(t,0,i),c.atime=new Date;break;case s instanceof qt:var u=s.getFileDesOps();if(u)if(u.read)a=u.read(this,t,i);else throw new x(F.EINVAL);else throw new x(F.ENXIO);break;default:throw new x(F.EINVAL)}return n===null&&(this._pos=i+a),a}},{key:"write",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=void 0;n===null?s=this._pos:s=n;var a=this._iNode,o=void 0;switch(!0){case a instanceof mt:var c=a.getData(),u=a.getMetadata();if((this.getFlags()|i)&T.O_APPEND)s=c.length,c=U.concat([c,t]),o=t.length;else{if(s>c.length)c=U.concat([c,U.alloc(s-c.length),U.allocUnsafe(t.length)]);else if(s<=c.length){var f=c.length-s,h=t.length-f;h>0&&(c=U.concat([c,U.allocUnsafe(h)]))}o=t.copy(c,s)}a.setData(c);var p=new Date;u.mtime=p,u.ctime=p,u.size=c.length;break;case a instanceof qt:var g=a.getFileDesOps();if(g)if(g.write)o=g.write(this,t,s,i);else throw new x(F.EINVAL);else throw new x(F.ENXIO);break;default:throw new x(F.EINVAL)}return n===null&&(this._pos=s+o),o}}]),r}(),wu=function(){function r(e){rt(this,r),this._counter=new oa(0),this._fds=new Li,this._iNodeMgr=e}return ct(r,[{key:"createFd",value:function(t,n){this._iNodeMgr.refINode(t);var i=this._counter.allocate(),s=new MS(t,n);if(t instanceof qt){var a=t.getFileDesOps();if(a)a.open&&a.open(s);else throw new x(F.ENXIO)}return this._fds.set(i,s),[s,i]}},{key:"getFd",value:function(t){return this._fds.get(t)}},{key:"dupFd",value:function(t){var n=this._fds.get(t);if(n){this._iNodeMgr.refINode(n.getINode());var i=this._counter.allocate();return this._fds.set(i,n),t}}},{key:"deleteFd",value:function(t){var n=this._fds.get(t);if(n){var i=n.getINode();if(i instanceof qt){var s=i.getFileDesOps();if(s)s.close&&s.close(n);else throw new x(F.ENXIO)}this._fds.delete(t),this._counter.deallocate(t),this._iNodeMgr.unrefINode(i)}}}]),r}(),$S=ma.f;Su("getOwnPropertyDescriptor",function(){return function(e,t){return $S(ar(e),t)}});var GS=Ae.Object,HS=function(e,t){return GS.getOwnPropertyDescriptor(e,t)},ih=_e(function(r){r.exports={default:HS,__esModule:!0}});Oe(ih);var VS=_e(function(r,e){e.__esModule=!0;var t=i(Vd),n=i(ih);function i(s){return s&&s.__esModule?s:{default:s}}e.default=function s(a,o,c){a===null&&(a=Function.prototype);var u=(0,n.default)(a,o);if(u===void 0){var f=(0,t.default)(a);return f===null?void 0:s(f,o,c)}else{if("value"in u)return u.value;var h=u.get;return h===void 0?void 0:h.call(c)}}}),et=Oe(VS),Tc;function Vr(){}Vr.prototype=Object.create(null);function ve(){ve.init.call(this)}ve.EventEmitter=ve;ve.usingDomains=!1;ve.prototype.domain=void 0;ve.prototype._events=void 0;ve.prototype._maxListeners=void 0;ve.defaultMaxListeners=10;ve.init=function(){this.domain=null,ve.usingDomains&&Tc.active&&!(this instanceof Tc.Domain)&&(this.domain=Tc.active),(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Vr,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ve.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function sh(r){return r._maxListeners===void 0?ve.defaultMaxListeners:r._maxListeners}ve.prototype.getMaxListeners=function(){return sh(this)};function YS(r,e,t){if(e)r.call(t);else for(var n=r.length,i=ji(r,n),s=0;s<n;++s)i[s].call(t)}function zS(r,e,t,n){if(e)r.call(t,n);else for(var i=r.length,s=ji(r,i),a=0;a<i;++a)s[a].call(t,n)}function jS(r,e,t,n,i){if(e)r.call(t,n,i);else for(var s=r.length,a=ji(r,s),o=0;o<s;++o)a[o].call(t,n,i)}function KS(r,e,t,n,i,s){if(e)r.call(t,n,i,s);else for(var a=r.length,o=ji(r,a),c=0;c<a;++c)o[c].call(t,n,i,s)}function XS(r,e,t,n){if(e)r.apply(t,n);else for(var i=r.length,s=ji(r,i),a=0;a<i;++a)s[a].apply(t,n)}ve.prototype.emit=function(e){var t,n,i,s,a,o,c,u=!1,f=e==="error";if(o=this._events,o)f=f&&o.error==null;else if(!f)return!1;if(c=this.domain,f){if(t=arguments[1],c)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=c,t.domainThrown=!1,c.emit("error",t);else{if(t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}return!1}if(n=o[e],!n)return!1;var p=typeof n=="function";switch(i=arguments.length,i){case 1:YS(n,p,this);break;case 2:zS(n,p,this,arguments[1]);break;case 3:jS(n,p,this,arguments[1],arguments[2]);break;case 4:KS(n,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),a=1;a<i;a++)s[a-1]=arguments[a];XS(n,p,this,s)}return u&&c.exit(),!0};function ah(r,e,t,n){var i,s,a;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(s=r._events,s?(s.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),a=s[e]):(s=r._events=new Vr,r._eventsCount=0),!a)a=s[e]=t,++r._eventsCount;else if(typeof a=="function"?a=s[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),!a.warned&&(i=sh(r),i&&i>0&&a.length>i)){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=r,o.type=e,o.count=a.length,qS(o)}return r}function qS(r){typeof console.warn=="function"?console.warn(r):console.log(r)}ve.prototype.addListener=function(e,t){return ah(this,e,t,!1)};ve.prototype.on=ve.prototype.addListener;ve.prototype.prependListener=function(e,t){return ah(this,e,t,!0)};function oh(r,e,t){var n=!1;function i(){r.removeListener(e,i),n||(n=!0,t.apply(r,arguments))}return i.listener=t,i}ve.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,oh(this,e,t)),this};ve.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,oh(this,e,t)),this};ve.prototype.removeListener=function(e,t){var n,i,s,a,o;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[e],!n)return this;if(n===t||n.listener&&n.listener===t)--this._eventsCount===0?this._events=new Vr:(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,a=n.length;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=n[a].listener,s=a;break}if(s<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Vr,this;delete i[e]}else QS(n,s);i.removeListener&&this.emit("removeListener",e,o||t)}return this};ve.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Vr,this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=new Vr:delete n[e]),this;if(arguments.length===0){for(var i=Object.keys(n),s=0,a;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new Vr,this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};ve.prototype.listeners=function(e){var t,n,i=this._events;return i?(t=i[e],t?typeof t=="function"?n=[t.listener||t]:n=JS(t):n=[]):n=[],n};ve.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):ch.call(r,e)};ve.prototype.listenerCount=ch;function ch(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}ve.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function QS(r,e){for(var t=e,n=t+1,i=r.length;n<i;t+=1,n+=1)r[t]=r[n];r.pop()}function ji(r,e){for(var t=new Array(e);e--;)t[e]=r[e];return t}function JS(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}var Zc;typeof Object.create=="function"?Zc=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Zc=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var Jn=Zc,ZS=/%[sdj%]/g;function ev(r){if(!bu(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(Yr(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,i=n.length,s=String(r).replace(ZS,function(o){if(o==="%%")return"%";if(t>=i)return o;switch(o){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return o}}),a=n[t];t<i;a=n[++t])Au(a)||!Ki(a)?s+=" "+a:s+=" "+Yr(a);return s}function uh(r,e){if(Gr(jn.process))return function(){return uh(r,e).apply(this,arguments)};if(Js.noDeprecation===!0)return r;var t=!1;function n(){if(!t){if(Js.throwDeprecation)throw new Error(e);Js.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return n}var js={},Cc;function tv(r){if(Gr(Cc)&&(Cc=Js.env.NODE_DEBUG||""),r=r.toUpperCase(),!js[r])if(new RegExp("\\b"+r+"\\b","i").test(Cc)){var e=0;js[r]=function(){var t=ev.apply(null,arguments);console.error("%s %d: %s",r,e,t)}}else js[r]=function(){};return js[r]}function Yr(r,e){var t={seen:[],stylize:nv};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),fh(e)?t.showHidden=e:e&&fv(t,e),Gr(t.showHidden)&&(t.showHidden=!1),Gr(t.depth)&&(t.depth=2),Gr(t.colors)&&(t.colors=!1),Gr(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=rv),la(t,r,t.depth)}Yr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Yr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function rv(r,e){var t=Yr.styles[e];return t?"\x1B["+Yr.colors[t][0]+"m"+r+"\x1B["+Yr.colors[t][1]+"m":r}function nv(r,e){return r}function iv(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function la(r,e,t){if(r.customInspect&&e&&Rc(e.inspect)&&e.inspect!==Yr&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return bu(n)||(n=la(r,n,t)),n}var i=sv(r,e);if(i)return i;var s=Object.keys(e),a=iv(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),xc(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Oc(e);if(s.length===0){if(Rc(e)){var o=e.name?": "+e.name:"";return r.stylize("[Function"+o+"]","special")}if(Wc(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Rl(e))return r.stylize(Date.prototype.toString.call(e),"date");if(xc(e))return Oc(e)}var c="",u=!1,f=["{","}"];if(cv(e)&&(u=!0,f=["[","]"]),Rc(e)){var h=e.name?": "+e.name:"";c=" [Function"+h+"]"}if(Wc(e)&&(c=" "+RegExp.prototype.toString.call(e)),Rl(e)&&(c=" "+Date.prototype.toUTCString.call(e)),xc(e)&&(c=" "+Oc(e)),s.length===0&&(!u||e.length==0))return f[0]+c+f[1];if(t<0)return Wc(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var p;return u?p=av(r,e,t,a,s):p=s.map(function(g){return eu(r,e,t,a,g,u)}),r.seen.pop(),ov(p,c,f)}function sv(r,e){if(Gr(e))return r.stylize("undefined","undefined");if(bu(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(uv(e))return r.stylize(""+e,"number");if(fh(e))return r.stylize(""+e,"boolean");if(Au(e))return r.stylize("null","null")}function Oc(r){return"["+Error.prototype.toString.call(r)+"]"}function av(r,e,t,n,i){for(var s=[],a=0,o=e.length;a<o;++a)lh(e,String(a))?s.push(eu(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(c){c.match(/^\d+$/)||s.push(eu(r,e,t,n,c,!0))}),s}function eu(r,e,t,n,i,s){var a,o,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?c.set?o=r.stylize("[Getter/Setter]","special"):o=r.stylize("[Getter]","special"):c.set&&(o=r.stylize("[Setter]","special")),lh(n,i)||(a="["+i+"]"),o||(r.seen.indexOf(c.value)<0?(Au(t)?o=la(r,c.value,null):o=la(r,c.value,t-1),o.indexOf(`
`)>-1&&(s?o=o.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):o=`
`+o.split(`
`).map(function(u){return"   "+u}).join(`
`))):o=r.stylize("[Circular]","special")),Gr(a)){if(s&&i.match(/^\d+$/))return o;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+o}function ov(r,e,t){var n=0,i=r.reduce(function(s,a){return n++,a.indexOf(`
`)>=0&&n++,s+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function cv(r){return Array.isArray(r)}function fh(r){return typeof r=="boolean"}function Au(r){return r===null}function uv(r){return typeof r=="number"}function bu(r){return typeof r=="string"}function Gr(r){return r===void 0}function Wc(r){return Ki(r)&&Tu(r)==="[object RegExp]"}function Ki(r){return typeof r=="object"&&r!==null}function Rl(r){return Ki(r)&&Tu(r)==="[object Date]"}function xc(r){return Ki(r)&&(Tu(r)==="[object Error]"||r instanceof Error)}function Rc(r){return typeof r=="function"}function Tu(r){return Object.prototype.toString.call(r)}function fv(r,e){if(!e||!Ki(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function lh(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function An(){this.head=null,this.tail=null,this.length=0}An.prototype.push=function(r){var e={data:r,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};An.prototype.unshift=function(r){var e={data:r,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};An.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}};An.prototype.clear=function(){this.head=this.tail=null,this.length=0};An.prototype.join=function(r){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=r+e.data;return t};An.prototype.concat=function(r){if(this.length===0)return U.alloc(0);if(this.length===1)return this.head.data;for(var e=U.allocUnsafe(r>>>0),t=this.head,n=0;t;)t.data.copy(e,n),n+=t.data.length,t=t.next;return e};var lv=U.isEncoding||function(r){switch(r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function dv(r){if(r&&!lv(r))throw new Error("Unknown encoding: "+r)}function Xi(r){switch(this.encoding=(r||"utf8").toLowerCase().replace(/[-_]/,""),dv(r),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=_v;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=pv;break;default:this.write=hv;return}this.charBuffer=new U(6),this.charReceived=0,this.charLength=0}Xi.prototype.write=function(r){for(var e="";this.charLength;){var t=r.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:r.length;if(r.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";r=r.slice(t,r.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,r.length===0)return e;break}this.detectIncompleteChar(r);var n=r.length;this.charLength&&(r.copy(this.charBuffer,0,r.length-this.charReceived,n),n-=this.charReceived),e+=r.toString(this.encoding,0,n);var n=e.length-1,i=e.charCodeAt(n);if(i>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),r.copy(this.charBuffer,0,0,s),e.substring(0,n)}return e};Xi.prototype.detectIncompleteChar=function(r){for(var e=r.length>=3?3:r.length;e>0;e--){var t=r[r.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};Xi.prototype.end=function(r){var e="";if(r&&r.length&&(e=this.write(r)),this.charReceived){var t=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,t).toString(i)}return e};function hv(r){return r.toString(this.encoding)}function _v(r){this.charReceived=r.length%2,this.charLength=this.charReceived?2:0}function pv(r){this.charReceived=r.length%3,this.charLength=this.charReceived?3:0}Le.ReadableState=dh;var Ie=tv("stream");Jn(Le,ve);function Sv(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function vv(r,e){return r.listeners(e).length}function dh(r,e){r=r||{},this.objectMode=!!r.objectMode,e instanceof Bt&&(this.objectMode=this.objectMode||!!r.readableObjectMode);var t=r.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new An,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(this.decoder=new Xi(r.encoding),this.encoding=r.encoding)}function Le(r){if(!(this instanceof Le))return new Le(r);this._readableState=new dh(r,this),this.readable=!0,r&&typeof r.read=="function"&&(this._read=r.read),ve.call(this)}Le.prototype.push=function(r,e){var t=this._readableState;return!t.objectMode&&typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=U.from(r,e),e="")),hh(this,t,r,e,!1)};Le.prototype.unshift=function(r){var e=this._readableState;return hh(this,e,r,"",!0)};Le.prototype.isPaused=function(){return this._readableState.flowing===!1};function hh(r,e,t,n,i){var s=Ev(e,t);if(s)r.emit("error",s);else if(t===null)e.reading=!1,yv(r,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");r.emit("error",a)}else if(e.endEmitted&&i){var o=new Error("stream.unshift() after end event");r.emit("error",o)}else{var c;e.decoder&&!i&&!n&&(t=e.decoder.write(t),c=!e.objectMode&&t.length===0),i||(e.reading=!1),c||(e.flowing&&e.length===0&&!e.sync?(r.emit("data",t),r.read(0)):(e.length+=e.objectMode?1:t.length,i?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&Ta(r))),Iv(r,e)}else i||(e.reading=!1);return gv(e)}function gv(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}Le.prototype.setEncoding=function(r){return this._readableState.decoder=new Xi(r),this._readableState.encoding=r,this};var Fl=8388608;function mv(r){return r>=Fl?r=Fl:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function kl(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=mv(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}Le.prototype.read=function(r){Ie("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Ie("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Fc(this):Ta(this),null;if(r=kl(r,e),r===0&&e.ended)return e.length===0&&Fc(this),null;var n=e.needReadable;Ie("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,Ie("length less than watermark",n)),e.ended||e.reading?(n=!1,Ie("reading or ended",n)):n&&(Ie("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=kl(t,e)));var i;return r>0?i=_h(r,e):i=null,i===null?(e.needReadable=!0,r=0):e.length-=r,e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&Fc(this)),i!==null&&this.emit("data",i),i};function Ev(r,e){var t=null;return!nd(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!r.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function yv(r,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,Ta(r)}}function Ta(r){var e=r._readableState;e.needReadable=!1,e.emittedReadable||(Ie("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?ut(Dl,r):Dl(r))}function Dl(r){Ie("emit readable"),r.emit("readable"),Cu(r)}function Iv(r,e){e.readingMore||(e.readingMore=!0,ut(wv,r,e))}function wv(r,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Ie("maybeReadMore read 0"),r.read(0),t!==e.length);)t=e.length;e.readingMore=!1}Le.prototype._read=function(r){this.emit("error",new Error("not implemented"))};Le.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,Ie("pipe count=%d opts=%j",n.pipesCount,e);var i=!e||e.end!==!1,s=i?o:f;n.endEmitted?ut(s):t.once("end",s),r.on("unpipe",a);function a($){Ie("onunpipe"),$===t&&f()}function o(){Ie("onend"),r.end()}var c=Av(t);r.on("drain",c);var u=!1;function f(){Ie("cleanup"),r.removeListener("close",y),r.removeListener("finish",A),r.removeListener("drain",c),r.removeListener("error",g),r.removeListener("unpipe",a),t.removeListener("end",o),t.removeListener("end",f),t.removeListener("data",p),u=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&c()}var h=!1;t.on("data",p);function p($){Ie("ondata"),h=!1;var X=r.write($);X===!1&&!h&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&ph(n.pipes,r)!==-1)&&!u&&(Ie("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,h=!0),t.pause())}function g($){Ie("onerror",$),H(),r.removeListener("error",g),vv(r,"error")===0&&r.emit("error",$)}Sv(r,"error",g);function y(){r.removeListener("finish",A),H()}r.once("close",y);function A(){Ie("onfinish"),r.removeListener("close",y),H()}r.once("finish",A);function H(){Ie("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(Ie("pipe resume"),t.resume()),r};function Av(r){return function(){var e=r._readableState;Ie("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&r.listeners("data").length&&(e.flowing=!0,Cu(r))}}Le.prototype.unpipe=function(r){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this),this);if(!r){var t=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var s=ph(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this),this)};Le.prototype.on=function(r,e){var t=ve.prototype.on.call(this,r,e);if(r==="data")this._readableState.flowing!==!1&&this.resume();else if(r==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Ta(this,n):ut(bv,this))}return t};Le.prototype.addListener=Le.prototype.on;function bv(r){Ie("readable nexttick read 0"),r.read(0)}Le.prototype.resume=function(){var r=this._readableState;return r.flowing||(Ie("resume"),r.flowing=!0,Tv(this,r)),this};function Tv(r,e){e.resumeScheduled||(e.resumeScheduled=!0,ut(Cv,r,e))}function Cv(r,e){e.reading||(Ie("resume read 0"),r.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,r.emit("resume"),Cu(r),e.flowing&&!e.reading&&r.read(0)}Le.prototype.pause=function(){return Ie("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ie("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Cu(r){var e=r._readableState;for(Ie("flow",e.flowing);e.flowing&&r.read()!==null;);}Le.prototype.wrap=function(r){var e=this._readableState,t=!1,n=this;r.on("end",function(){if(Ie("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&n.push(a)}n.push(null)}),r.on("data",function(a){if(Ie("wrapped data"),e.decoder&&(a=e.decoder.write(a)),!(e.objectMode&&a==null)&&!(!e.objectMode&&(!a||!a.length))){var o=n.push(a);o||(t=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(a){return function(){return r[a].apply(r,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return Fv(s,function(a){r.on(a,n.emit.bind(n,a))}),n._read=function(a){Ie("wrapped _read",a),t&&(t=!1,r.resume())},n};Le._fromList=_h;function _h(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=Ov(r,e.buffer,e.decoder),t}function Ov(r,e,t){var n;return r<e.head.data.length?(n=e.head.data.slice(0,r),e.head.data=e.head.data.slice(r)):r===e.head.data.length?n=e.shift():n=t?Wv(r,e):xv(r,e),n}function Wv(r,e){var t=e.head,n=1,i=t.data;for(r-=i.length;t=t.next;){var s=t.data,a=r>s.length?s.length:r;if(a===s.length?i+=s:i+=s.slice(0,r),r-=a,r===0){a===s.length?(++n,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=s.slice(a));break}++n}return e.length-=n,i}function xv(r,e){var t=U.allocUnsafe(r),n=e.head,i=1;for(n.data.copy(t),r-=n.data.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(s.copy(t,t.length-r,0,a),r-=a,r===0){a===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++i}return e.length-=i,t}function Fc(r){var e=r._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,ut(Rv,e,r))}function Rv(r,e){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}function Fv(r,e){for(var t=0,n=r.length;t<n;t++)e(r[t],t)}function ph(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}tt.WritableState=Ou;Jn(tt,ve);function kv(){}function Dv(r,e,t){this.chunk=r,this.encoding=e,this.callback=t,this.next=null}function Ou(r,e){Object.defineProperty(this,"buffer",{get:uh(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),r=r||{},this.objectMode=!!r.objectMode,e instanceof Bt&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var t=r.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=r.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){$v(e,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new mh(this)}Ou.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function tt(r){if(!(this instanceof tt)&&!(this instanceof Bt))return new tt(r);this._writableState=new Ou(r,this),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev)),ve.call(this)}tt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Nv(r,e){var t=new Error("write after end");r.emit("error",t),ut(e,t)}function Lv(r,e,t,n){var i=!0,s=!1;return t===null?s=new TypeError("May not write null values to stream"):!U.isBuffer(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(r.emit("error",s),ut(n,s),i=!1),i}tt.prototype.write=function(r,e,t){var n=this._writableState,i=!1;return typeof e=="function"&&(t=e,e=null),U.isBuffer(r)?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=kv),n.ended?Nv(this,t):Lv(this,n,r,t)&&(n.pendingcb++,i=Pv(this,n,r,e,t)),i};tt.prototype.cork=function(){var r=this._writableState;r.corked++};tt.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.finished&&!r.bufferProcessing&&r.bufferedRequest&&Sh(this,r))};tt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Uv(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=U.from(e,t)),e}function Pv(r,e,t,n,i){t=Uv(e,t,n),U.isBuffer(t)&&(n="buffer");var s=e.objectMode?1:t.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var o=e.lastBufferedRequest;e.lastBufferedRequest=new Dv(t,n,i),o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else tu(r,e,!1,s,t,n,i);return a}function tu(r,e,t,n,i,s,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,t?r._writev(i,e.onwrite):r._write(i,s,e.onwrite),e.sync=!1}function Bv(r,e,t,n,i){--e.pendingcb,t?ut(i,n):i(n),r._writableState.errorEmitted=!0,r.emit("error",n)}function Mv(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function $v(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(Mv(t),e)Bv(r,t,n,e,i);else{var s=vh(t);!s&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Sh(r,t),n?ut(Nl,r,t,s,i):Nl(r,t,s,i)}}function Nl(r,e,t,n){t||Gv(r,e),e.pendingcb--,n(),gh(r,e)}function Gv(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function Sh(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=t;for(var a=0;t;)i[a]=t,t=t.next,a+=1;tu(r,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new mh(e)}else{for(;t;){var o=t.chunk,c=t.encoding,u=t.callback,f=e.objectMode?1:o.length;if(tu(r,e,!1,f,o,c,u),t=t.next,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}tt.prototype._write=function(r,e,t){t(new Error("not implemented"))};tt.prototype._writev=null;tt.prototype.end=function(r,e,t){var n=this._writableState;typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Hv(this,n,t)};function vh(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function Ll(r,e){e.prefinished||(e.prefinished=!0,r.emit("prefinish"))}function gh(r,e){var t=vh(e);return t&&(e.pendingcb===0?(Ll(r,e),e.finished=!0,r.emit("finish")):Ll(r,e)),t}function Hv(r,e,t){e.ending=!0,gh(r,e),t&&(e.finished?ut(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function mh(r){var e=this;this.next=null,this.entry=null,this.finish=function(t){var n=e.entry;for(e.entry=null;n;){var i=n.callback;r.pendingcb--,i(t),n=n.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}}Jn(Bt,Le);var Ul=Object.keys(tt.prototype);for(Ks=0;Ks<Ul.length;Ks++)Xs=Ul[Ks],Bt.prototype[Xs]||(Bt.prototype[Xs]=tt.prototype[Xs]);var Xs,Ks;function Bt(r){if(!(this instanceof Bt))return new Bt(r);Le.call(this,r),tt.call(this,r),r&&r.readable===!1&&(this.readable=!1),r&&r.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,r&&r.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Vv)}function Vv(){this.allowHalfOpen||this._writableState.ended||ut(Yv,this)}function Yv(r){r.end()}Jn(sr,Bt);function zv(r){this.afterTransform=function(e,t){return jv(r,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function jv(r,e,t){var n=r._transformState;n.transforming=!1;var i=n.writecb;if(!i)return r.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&r.push(t),i(e);var s=r._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&r._read(s.highWaterMark)}function sr(r){if(!(this instanceof sr))return new sr(r);Bt.call(this,r),this._transformState=new zv(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){Pl(e,t)}):Pl(e)})}sr.prototype.push=function(r,e){return this._transformState.needTransform=!1,Bt.prototype.push.call(this,r,e)};sr.prototype._transform=function(r,e,t){throw new Error("Not implemented")};sr.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};sr.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function Pl(r,e){if(e)return r.emit("error",e);var t=r._writableState,n=r._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}Jn(Bi,sr);function Bi(r){if(!(this instanceof Bi))return new Bi(r);sr.call(this,r)}Bi.prototype._transform=function(r,e,t){t(null,r)};Jn(yr,ve);yr.Readable=Le;yr.Writable=tt;yr.Duplex=Bt;yr.Transform=sr;yr.PassThrough=Bi;yr.Stream=yr;function yr(){ve.call(this)}yr.prototype.pipe=function(r,e){var t=this;function n(f){r.writable&&r.write(f)===!1&&t.pause&&t.pause()}t.on("data",n);function i(){t.readable&&t.resume&&t.resume()}r.on("drain",i),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",a),t.on("close",o));var s=!1;function a(){s||(s=!0,r.end())}function o(){s||(s=!0,typeof r.destroy=="function"&&r.destroy())}function c(f){if(u(),ve.listenerCount(this,"error")===0)throw f}t.on("error",c),r.on("error",c);function u(){t.removeListener("data",n),r.removeListener("drain",i),t.removeListener("end",a),t.removeListener("close",o),t.removeListener("error",c),r.removeListener("error",c),t.removeListener("end",u),t.removeListener("close",u),r.removeListener("close",u)}return t.on("end",u),t.on("close",u),r.on("close",u),r.emit("pipe",t),r};var Bl=function(r){Ar(e,r);function e(t,n,i){rt(this,e);var s=wr(this,(e.__proto__||Ce(e)).call(this,{highWaterMark:n.highWaterMark,encoding:n.encoding}));return s._fs=i,s.bytesRead=0,s.path=t,s.fd=n.fd===void 0?null:n.fd,s.flags=n.flags===void 0?"r":n.flags,s.mode=n.mode===void 0?Et:n.mode,s.autoClose=n.autoClose===void 0?!0:n.autoClose,s.start=n.start,s.end=n.end===void 0?1/0:n.end,s.pos=n.start,typeof s.fd!="number"&&s._open(),et(e.prototype.__proto__||Ce(e.prototype),"on",s).call(s,"end",function(){s.autoClose&&s.destroy()}),s}return ct(e,[{key:"_open",value:function(){var n=this;this._fs.open(this.path,this.flags,this.mode,function(i,s){if(i){n.autoClose&&n.destroy(),et(e.prototype.__proto__||Ce(e.prototype),"emit",n).call(n,"error",i);return}n.fd=s,et(e.prototype.__proto__||Ce(e.prototype),"emit",n).call(n,"open",s),et(e.prototype.__proto__||Ce(e.prototype),"read",n).call(n)})}},{key:"_read",value:function(n){var i=this;if(typeof this.fd!="number"){et(e.prototype.__proto__||Ce(e.prototype),"once",this).call(this,"open",function(){i._read(n)});return}if(!this.destroyed){if(this.pos!=null&&(n=Math.min(this.end-this.pos+1,n)),n<=0){this.push(null);return}this._fs.read(this.fd,U.allocUnsafe(n),0,n,this.pos,function(s,a,o){if(s){i.autoClose&&i.destroy(),et(e.prototype.__proto__||Ce(e.prototype),"emit",i).call(i,"error",s);return}a>0?(i.bytesRead+=a,i.push(o.slice(0,a))):i.push(null)}),this.pos!=null&&(this.pos+=n)}}},{key:"_destroy",value:function(n,i){this._close(function(s){i(n||s)})}},{key:"_close",value:function(n){var i=this;if(n&&et(e.prototype.__proto__||Ce(e.prototype),"once",this).call(this,"close",n),typeof this.fd!="number"){et(e.prototype.__proto__||Ce(e.prototype),"once",this).call(this,"open",function(){i._close()});return}if(this.closed)return ut(function(){return et(e.prototype.__proto__||Ce(e.prototype),"emit",i).call(i,"close")});this.closed=!0,this._fs.close(this.fd,function(s){s?i.emit("error",s):i.emit("close")}),this.fd=null}}]),e}(Le),Ml=function(r){Ar(e,r);function e(t,n,i){rt(this,e);var s=wr(this,(e.__proto__||Ce(e)).call(this,{highWaterMark:n.highWaterMark}));return s._fs=i,s.bytesWritten=0,s.path=t,s.fd=n.fd===void 0?null:n.fd,s.flags=n.flags===void 0?"w":n.flags,s.mode=n.mode===void 0?Et:n.mode,s.autoClose=n.autoClose===void 0?!0:n.autoClose,s.start=n.start,s.pos=s.start,n.encoding&&et(e.prototype.__proto__||Ce(e.prototype),"setDefaultEncoding",s).call(s,n.encoding),typeof s.fd!="number"&&s._open(),et(e.prototype.__proto__||Ce(e.prototype),"on",s).call(s,"finish",function(){s.autoClose&&s.destroy()}),s}return ct(e,[{key:"_open",value:function(){var n=this;this._fs.open(this.path,this.flags,this.mode,function(i,s){if(i){n.autoClose&&n.destroy(),et(e.prototype.__proto__||Ce(e.prototype),"emit",n).call(n,"error",i);return}n.fd=s,et(e.prototype.__proto__||Ce(e.prototype),"emit",n).call(n,"open",s)})}},{key:"_write",value:function(n,i,s){var a=this;if(typeof this.fd!="number")return et(e.prototype.__proto__||Ce(e.prototype),"once",this).call(this,"open",function(){a._write(n,i,s)});this._fs.write(this.fd,n,0,n.length,this.pos,function(o,c){if(o){a.autoClose&&a.destroy(),s(o);return}a.bytesWritten+=c,s()}),this.pos!==void 0&&(this.pos+=n.length)}},{key:"_writev",value:function(n,i){this._write(U.concat(n.map(function(s){return s.chunk})),void 0,i)}},{key:"_destroy",value:function(n,i){this._close(function(s){i(n||s)})}},{key:"_close",value:function(n){var i=this;if(n&&et(e.prototype.__proto__||Ce(e.prototype),"once",this).call(this,"close",n),typeof this.fd!="number"){et(e.prototype.__proto__||Ce(e.prototype),"once",this).call(this,"open",function(){i._close()});return}if(this.closed)return ut(function(){return et(e.prototype.__proto__||Ce(e.prototype),"emit",i).call(i,"close")});this.closed=!0,this._fs.close(this.fd,function(s){s?i.emit("error",s):i.emit("close")}),this.fd=null}},{key:"_final",value:function(n){n()}}]),e}(tt),$l=pc.posix?pc.posix.join:pc.join,de=function(e){if(e)throw e},Wu=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:18,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Aa,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new yu(n),s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new wu(i);rt(this,r);var a=void 0;if(typeof t=="number"){if(a=i.getINode(t),!(a instanceof ke))throw TypeError("rootIndex must point to a root directory")}else{var o=i.createINode(ke,{mode:Kp,uid:tr,gid:Vc}),c=gt(o,1);a=c[0]}this._uid=tr,this._gid=Vc,this._umask=e,this._devMgr=n,this._iNodeMgr=i,this._fdMgr=s,this._root=a,this._cwd=new jp(i,a),this.constants=T,this.ReadStream=Bl,this.WriteStream=Ml}return ct(r,[{key:"getUmask",value:function(){return this._umask}},{key:"setUmask",value:function(t){this._umask=t}},{key:"getUid",value:function(){return this._uid}},{key:"setUid",value:function(t){this._uid=t}},{key:"getGid",value:function(){return this._gid}},{key:"setGid",value:function(t){this._gid=t}},{key:"getCwd",value:function(){return this._cwd.getPath()}},{key:"chdir",value:function(t){t=this._getPath(t);var n=this._navigate(t,!0);if(!n.target)throw new x(F.ENOENT,t);if(!(n.target instanceof ke))throw new x(F.ENOTDIR,t);if(!this._checkPermissions(T.X_OK,n.target.getMetadata()))throw new x(F.EACCES,t);this._cwd.changeDir(n.target,n.pathStack)}},{key:"access",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.accessSync.bind(this),[t].concat(Ne(i.slice(0,a))),o,o)}},{key:"accessSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.F_OK;t=this._getPath(t);var i=this._navigate(t,!0).target;if(!i)throw new x(F.ENOENT,t);if(n!==T.F_OK&&!this._checkPermissions(n,i.getMetadata()))throw new x(F.EACCES,t)}},{key:"appendFile",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.appendFileSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),c,c)}},{key:"appendFileSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"undefined",i=arguments[2];i=this._getOptions({encoding:"utf8",mode:Et,flag:"a"},i),n=this._getBuffer(n,i.encoding);var s=void 0;try{var a=void 0;if(typeof t=="number"){if(a=this._fdMgr.getFd(t),!a)throw new x(F.EBADF,null,null,"appendFile");if(!(a.getFlags()&(T.O_WRONLY|T.O_RDWR)))throw new x(F.EBADF,null,null,"appendFile")}else{var o=this._openSync(t,i.flag,i.mode),c=gt(o,2);a=c[0],s=c[1]}try{a.write(n,null,T.O_APPEND)}catch(u){throw u instanceof RangeError?new x(F.EFBIG,null,null,"appendFile"):u}}finally{s!==void 0&&this.closeSync(s)}}},{key:"chmod",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:de;this._callAsync(this.chmodSync.bind(this),[t,n],i,i)}},{key:"chmodSync",value:function(t,n){t=this._getPath(t);var i=this._navigate(t,!0).target;if(!i)throw new x(F.ENOENT,t);if(typeof n!="number")throw new TypeError("mode must be an integer");var s=i.getMetadata();if(this._uid!==tr&&this._uid!==s.uid)throw new x(F.EPERM,null,null,"chmod");s.mode=s.mode&T.S_IFMT|n}},{key:"chown",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:de;this._callAsync(this.chownSync.bind(this),[t,n,i],s,s)}},{key:"chownSync",value:function(t,n,i){t=this._getPath(t);var s=this._navigate(t,!0).target;if(!s)throw new x(F.ENOENT,t);var a=s.getMetadata();if(this._uid!==tr){if(a.uid!==this._uid)throw new x(F.EPERM,null,null,"chown");if(this._uid!==n)throw new x(F.EPERM,null,null,"chown")}typeof n=="number"&&(a.uid=n),typeof i=="number"&&(a.gid=i)}},{key:"chownr",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:de;this._callAsync(this.chownrSync.bind(this),[t,n,i],s,s)}},{key:"chownrSync",value:function(t,n,i){var s=this;t=this._getPath(t),this.chownSync(t,n,i);var a=void 0;try{a=this.readdirSync(t)}catch(o){if(o&&o.code==="ENOTDIR")return;throw o}a.forEach(function(o){var c=$l(t,o);s.lstatSync(c).isSymbolicLink()||s.chownrSync(c,n,i)})}},{key:"close",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.closeSync.bind(this),[t],n,n)}},{key:"closeSync",value:function(t){if(!this._fdMgr.getFd(t))throw new x(F.EBADF,null,null,"close");this._fdMgr.deleteFd(t)}},{key:"copyFile",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.copyFileSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),c,c)}},{key:"copyFileSync",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;t=this._getPath(t),n=this._getPath(n);var s=void 0,a=void 0,o=void 0,c=void 0;try{var u=this._openSync(t,T.O_RDONLY),f=gt(u,2);s=f[0],a=f[1];var h=s.getINode();if(h instanceof ke)throw new x(F.EBADF,t,n);var p=T.WRONLY|T.O_CREAT;i&T.COPYFILE_EXCL&&(p|=T.O_EXCL);var g=this._openSync(n,p,h.getMetadata().mode),y=gt(g,2);o=y[0],c=y[1];var A=o.getINode();if(A instanceof mt)A.setData(xl(h.getData()));else throw new x(F.EINVAL,t,n)}finally{a!==void 0&&this.closeSync(a),c!==void 0&&this.closeSync(c)}}},{key:"createReadStream",value:function(t,n){if(t=this._getPath(t),n=this._getOptions({flags:"r",encoding:null,fd:null,mode:Et,autoClose:!0,end:1/0},n),n.start!==void 0&&n.start>n.end)throw new RangeError("ERR_VALUE_OUT_OF_RANGE");return new Bl(t,n,this)}},{key:"createWriteStream",value:function(t,n){if(t=this._getPath(t),n=this._getOptions({flags:"w",defaultEncoding:"utf8",fd:null,mode:Et,autoClose:!0},n),n.start!==void 0&&n.start<0)throw new RangeError("ERR_VALUE_OUT_OF_RANGE");return new Ml(t,n,this)}},{key:"exists",value:function(t,n){n||(n=function(){}),this._callAsync(this.existsSync.bind(this),[t],n,n)}},{key:"existsSync",value:function(t){t=this._getPath(t);try{return!!this._navigate(t,!0).target}catch{return!1}}},{key:"fallocate",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:de;this._callAsync(this.fallocateSync.bind(this),[t,n,i],s,s)}},{key:"fallocateSync",value:function(t,n,i){if(n<0||i<=0)throw new x(F.EINVAL,null,null,"fallocate");var s=this._fdMgr.getFd(t);if(!s)throw new x(F.EBADF,null,null,"fallocate");var a=s.getINode();if(!(a instanceof mt))throw new x(F.ENODEV,null,null,"fallocate");if(!(s.getFlags()&(T.O_WRONLY|T.O_RDWR)))throw new x(F.EBADF,null,null,"fallocate");var o=a.getData(),c=a.getMetadata();if(n+i>o.length){var u=void 0;try{u=fa(o,n+i-o.length)}catch(f){throw f instanceof RangeError?new x(F.EFBIG,null,null,"fallocate"):f}a.setData(u),c.size=u.length}c.ctime=new Date}},{key:"mmap",value:function(t,n,i){for(var s=arguments.length,a=Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];var c=a.findIndex(function(f){return typeof f=="function"}),u=a[c]||de;c=c>=0?c:a.length,this._callAsync(this.mmapSync.bind(this),[t,n,i].concat(Ne(a.slice(0,c))),function(f){return u(null,f)},u)}},{key:"mmapSync",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<1||s<0)throw new x(F.EINVAL,null,null,"mmap");var a=this._fdMgr.getFd(i);if(!a)throw new x(F.EBADF,null,null,"mmap");var o=a.getFlags()&T.O_ACCMODE;if(o===T.O_WRONLY)throw new x(F.EACCES,null,null,"mmap");var c=a.getINode();if(!(c instanceof mt))throw new x(F.ENODEV,null,null,"mmap");switch(n){case T.MAP_PRIVATE:return xl(c.getData().slice(s,s+t));case T.MAP_SHARED:if(o!==T.O_RDWR)throw new x(F.EACCES,null,null,"mmap");return Gp(c,"_data").slice(s,s+t);default:throw new x(F.EINVAL,null,null,"mmap")}}},{key:"fchmod",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:de;this._callAsync(this.fchmodSync.bind(this),[t,n],i,i)}},{key:"fchmodSync",value:function(t,n){var i=this._fdMgr.getFd(t);if(!i)throw new x(F.EBADF,null,null,"fchmod");if(typeof n!="number")throw new TypeError("mode must be an integer");var s=i.getINode().getMetadata();if(this._uid!==tr&&this._uid!==s.uid)throw new x(F.EPERM,null,null,"fchmod");s.mode=s.mode&T.S_IMFT|n}},{key:"fchown",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:de;this._callAsync(this.fchmodSync.bind(this),[t,n,i],s,s)}},{key:"fchownSync",value:function(t,n,i){var s=this._fdMgr.getFd(t);if(!s)throw new x(F.EBADF,null,null,"fchown");var a=s.getINode().getMetadata();if(this._uid!==tr){if(a.uid!==this._uid)throw new x(F.EPERM,null,null,"fchown");if(this._uid!==n)throw new x(F.EPERM,null,null,"fchown")}typeof n=="number"&&(a.uid=n),typeof i=="number"&&(a.gid=i)}},{key:"fdatasync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.fchmodSync.bind(this),[t],n,n)}},{key:"fdatasyncSync",value:function(t){if(!this._fdMgr.getFd(t))throw new x(F.EBADF,null,null,"fdatasync")}},{key:"fstat",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.fstatSync.bind(this),[t],function(i){return n(null,i)},n)}},{key:"fstatSync",value:function(t){var n=this._fdMgr.getFd(t);if(!n)throw new x(F.EBADF,null,null,"fstat");return new Zs($n({},n.getINode().getMetadata()))}},{key:"fsync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.fsyncSync.bind(this),[t],n,n)}},{key:"fsyncSync",value:function(t){if(!this._fdMgr.getFd(t))throw new x(F.EBADF,null,null,"fsync")}},{key:"ftruncate",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.ftruncateSync.bind(this),[t].concat(Ne(i.slice(0,a))),o,o)}},{key:"ftruncateSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(n<0)throw new x(F.EINVAL,null,null,"ftruncate");var i=this._fdMgr.getFd(t);if(!i)throw new x(F.EBADF,null,null,"ftruncate");var s=i.getINode();if(!(s instanceof mt))throw new x(F.EINVAL,null,null,"ftruncate");if(!(i.getFlags()&(T.O_WRONLY|T.O_RDWR)))throw new x(F.EINVAL,null,null,"ftruncate");var a=s.getData(),o=s.getMetadata(),c=void 0;try{n>a.length?(c=fa(a,n),s.setData(c)):n<a.length?(a.resize(n),s.setData(c)):c=a}catch(f){throw f instanceof RangeError?new x(F.EFBIG,null,null,"ftruncate"):f}var u=new Date;o.mtime=u,o.ctime=u,o.size=c.length,i.setPos(Math.min(c.length,i.getPos()))}},{key:"futimes",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:de;this._callAsync(this.futimesSync.bind(this),[t,n,i],s,s)}},{key:"futimesSync",value:function(t,n,i){var s=this._fdMgr.getFd(t);if(!s)throw new x(F.EBADF,null,null,"futimes");var a=s.getINode().getMetadata(),o=void 0,c=void 0;if(typeof n=="number")o=new Date(n*1e3);else if(typeof n=="string")o=new Date(parseInt(n)*1e3);else if(n instanceof Date)o=n;else throw TypeError("atime and mtime must be dates or unixtime in seconds");if(typeof i=="number")c=new Date(i*1e3);else if(typeof i=="string")c=new Date(parseInt(i)*1e3);else if(i instanceof Date)c=i;else throw TypeError("atime and mtime must be dates or unixtime in seconds");a.atime=o,a.mtime=c,a.ctime=new Date}},{key:"lchmod",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:de;this._callAsync(this.lchmodSync.bind(this),[t,n],i,i)}},{key:"lchmodSync",value:function(t,n){t=this._getPath(t);var i=this._navigate(t,!1).target;if(!i)throw new x(F.ENOENT,t);if(typeof n!="number")throw new TypeError("mode must be an integer");var s=i.getMetadata();if(this._uid!==tr&&this._uid!==s.uid)throw new x(F.EPERM,null,null,"lchmod");s.mode=s.mode&T.S_IFMT|n}},{key:"lchown",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:de;this._callAsync(this.lchownSync.bind(this),[t,n,i],s,s)}},{key:"lchownSync",value:function(t,n,i){t=this._getPath(t);var s=this._navigate(t,!1).target;if(!s)throw new x(F.ENOENT,t);var a=s.getMetadata();if(this._uid!==tr){if(a.uid!==this._uid)throw new x(F.EPERM,null,null,"lchown");if(this._uid!==n)throw new x(F.EPERM,null,null,"lchown")}typeof n=="number"&&(a.uid=n),typeof i=="number"&&(a.gid=i)}},{key:"link",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:de;this._callAsync(this.linkSync.bind(this),[t,n],i,i)}},{key:"linkSync",value:function(t,n){t=this._getPath(t),n=this._getPath(n);var i=void 0,s=void 0;if(i=this._navigate(t,!1),s=this._navigate(n,!1),!i.target)throw new x(F.ENOENT,t,n,"link");if(i.target instanceof ke)throw new x(F.EPERM,t,n,"link");if(s.target)throw new x(F.EEXIST,t,n,"link");if(s.dir.getMetadata().nlink<2)throw new x(F.ENOENT,t,n,"link");if(!this._checkPermissions(T.W_OK,s.dir.getMetadata()))throw new x(F.EACCES,t,n,"link");var a=i.dir.getEntryIndex(i.name);s.dir.addEntry(s.name,a),i.target.getMetadata().ctime=new Date}},{key:"lseek",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.lseekSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),c,c)}},{key:"lseekSync",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.SEEK_SET,s=this._fdMgr.getFd(t);if(!s)throw new x(F.EBADF,null,null,"lseek");if([T.SEEK_SET,T.SEEK_CUR,T.SEEK_END].indexOf(i)===-1)throw new x(F.EINVAL,null,null,"lseek");try{s.setPos(n,i)}catch(a){throw a instanceof x&&a.setSyscall("lseek"),a}}},{key:"lstat",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.lstatSync.bind(this),[t],function(i){return n(null,i)},n)}},{key:"lstatSync",value:function(t){t=this._getPath(t);var n=this._navigate(t,!1).target;if(n)return new Zs($n({},n.getMetadata()));throw new x(F.ENOENT,t)}},{key:"mkdir",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.mkdirSync.bind(this),[t].concat(Ne(i.slice(0,a))),o,o)}},{key:"mkdirSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aa;t=this._getPath(t),t=t.replace(/(.+?)\/+$/,"$1");var i=this._navigate(t,!0);if(i.target)throw new x(F.EEXIST,t,null,"mkdir");if(!i.target&&i.remaining)throw new x(F.ENOENT,t,null,"mkdir");if(!i.target){if(i.dir.getMetadata().nlink<2)throw new x(F.ENOENT,t,null,"mkdir");if(!this._checkPermissions(T.W_OK,i.dir.getMetadata()))throw new x(F.EACCES,t,null,"mkdir");var s=this._iNodeMgr.createINode(ke,{mode:Wi(n,this._umask),uid:this._uid,gid:this._gid,parent:i.dir.getEntryIndex(".")}),a=gt(s,2),o=a[1];i.dir.addEntry(i.name,o)}}},{key:"mkdirp",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.mkdirpSync.bind(this),[t].concat(Ne(i.slice(0,a))),o,o)}},{key:"mkdirpSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aa;t=this._getPath(t),t=t.replace(/(.+?)\/+$/,"$1");for(var i=void 0,s=void 0,a=void 0,o=this._navigate(t,!0);;)if(o.target){if(o.target instanceof ke)break;throw new x(F.ENOTDIR,t)}else{if(o.dir.getMetadata().nlink<2)throw new x(F.ENOENT,t);if(!this._checkPermissions(T.W_OK,o.dir.getMetadata()))throw new x(F.EACCES,t);var c=this._iNodeMgr.createINode(ke,{mode:Wi(n,this._umask),uid:this._uid,gid:this._gid,parent:o.dir.getEntryIndex(".")}),u=gt(c,2);if(i=u[0],s=u[1],o.dir.addEntry(o.name,s),o.remaining)a=i,o=this._navigateFrom(a,o.remaining,!0);else break}}},{key:"mkdtemp",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.mkdtempSync.bind(this),[t].concat(Ne(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"mknod",value:function(t,n,i,s){for(var a=arguments.length,o=Array(a>4?a-4:0),c=4;c<a;c++)o[c-4]=arguments[c];var u=o.findIndex(function(h){return typeof h=="function"}),f=o[u]||de;u=u>=0?u:o.length,this._callAsync(this.mknodSync.bind(this),[t,n,i,s].concat(Ne(o.slice(0,u))),f,f)}},{key:"mknodSync",value:function(t,n,i,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Et;t=this._getPath(t);var o=this._navigate(t,!1);if(o.target)throw new x(F.EEXIST,t,null,"mknod");if(o.dir.getMetadata().nlink<2)throw new x(F.ENOENT,t,null,"mknod");if(!this._checkPermissions(T.W_OK,o.dir.getMetadata()))throw new x(F.EACCES,t,null,"mknod");var c=void 0;switch(n){case T.S_IFREG:var u=this._iNodeMgr.createINode(mt,{mode:Wi(a,this._umask),uid:this._uid,gid:this._gid}),f=gt(u,2);c=f[1];break;case T.S_IFCHR:if(typeof i!="number"||typeof s!="number")throw TypeError("major and minor must set as numbers when creating device nodes");if(i>jd||s>Kd||s<Yc||s<zc)throw new x(F.EINVAL,t,null,"mknod");var h=this._iNodeMgr.createINode(qt,{mode:Wi(a,this._umask),uid:this._uid,gid:this._gid,rdev:Ft(i,s)}),p=gt(h,2);c=p[1];break;default:throw new x(F.EPERM,t,null,"mknod")}o.dir.addEntry(o.name,c)}},{key:"open",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.openSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),function(u){return c(null,u)},c)}},{key:"openSync",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Et;return this._openSync(t,n,i)[1]}},{key:"_openSync",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Et;if(t=this._getPath(t),typeof n=="string")switch(n){case"r":case"rs":n=T.O_RDONLY;break;case"r+":case"rs+":n=T.O_RDWR;break;case"w":n=T.O_WRONLY|T.O_CREAT|T.O_TRUNC;break;case"wx":n=T.O_WRONLY|T.O_CREAT|T.O_TRUNC|T.O_EXCL;break;case"w+":n=T.O_RDWR|T.O_CREAT|T.O_TRUNC;break;case"wx+":n=T.O_RDWR|T.O_CREAT|T.O_TRUNC|T.O_EXCL;break;case"a":n=T.O_WRONLY|T.O_APPEND|T.O_CREAT;break;case"ax":n=T.O_WRONLY|T.O_APPEND|T.O_CREAT|T.O_EXCL;break;case"a+":n=T.O_RDWR|T.O_APPEND|T.O_CREAT;break;case"ax+":n=T.O_RDWR|T.O_APPEND|T.O_CREAT|T.O_EXCL;break;default:throw new TypeError("Unknown file open flag: "+n)}if(typeof n!="number")throw new TypeError("Unknown file open flag: "+n);var s=this._navigate(t,!1);if(s.target instanceof zn){if(n&T.O_NOFOLLOW)throw new x(F.ELOOP,t,null,"open");s=this._navigateFrom(s.dir,s.name+s.remaining,!0,void 0,void 0,t)}var a=s.target;if(a){if(n&T.O_CREAT&&n&T.O_EXCL)throw new x(F.EEXIST,t,null,"open");if(a instanceof ke&&n&(T.O_WRONLY|n&T.O_RDWR))throw new x(F.EISDIR,t,null,"open");if(n&T.O_DIRECTORY&&!(a instanceof ke))throw new x(F.ENOTDIR,t,null,"open");n&T.O_TRUNC&&a instanceof mt&&n&(T.O_WRONLY|T.O_RDWR)&&a.setData(new ArrayBuffer(0));var f=void 0;if(n&T.O_RDWR?f=T.R_OK|T.W_OK:n&T.O_WRONLY?f=T.W_OK:f=T.R_OK,!this._checkPermissions(f,a.getMetadata()))throw new x(F.EACCES,t,null,"open")}else if(!s.remaining&&n&T.O_CREAT){if(s.dir.getMetadata().nlink<2)throw new x(F.ENOENT,t,null,"open");if(!this._checkPermissions(T.W_OK,s.dir.getMetadata()))throw new x(F.EACCES,t,null,"open");var o=void 0,c=this._iNodeMgr.createINode(mt,{mode:Wi(i,this._umask),uid:this._uid,gid:this._gid}),u=gt(c,2);a=u[0],o=u[1],s.dir.addEntry(s.name,o)}else throw new x(F.ENOENT,t,null,"open");try{var h=this._fdMgr.createFd(a,n);return h}catch(p){throw p instanceof x&&(p.setPaths(t),p.setSyscall("open")),p}}},{key:"read",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.readSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),function(u){return c(null,u,n)},c)}},{key:"readSync",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=this._fdMgr.getFd(t);if(!o)throw new x(F.EBADF,null,null,"read");if(typeof a=="number"&&a<0)throw new x(F.EINVAL,null,null,"read");if(o.getINode().getMetadata().isDirectory())throw new x(F.EISDIR,null,null,"read");var c=o.getFlags();if(c&T.O_WRONLY)throw new x(F.EBADF,null,null,"read");if(i<0||i>n.length)throw new RangeError("Offset is out of bounds");if(s<0||s>n.length)throw new RangeError("Length extends beyond buffer");n=this._getBuffer(n).slice(i,i+s);var u=void 0;try{u=o.read(n,a)}catch(f){throw f instanceof x&&(f.syscall="read"),f}return u}},{key:"readdir",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.readdirSync.bind(this),[t].concat(Ne(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"readFile",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.readFileSync.bind(this),[t].concat(Ne(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"readFileSync",value:function(t,n){n=this._getOptions({encoding:null,flag:"r"},n);var i=void 0;try{var s=new ArrayBuffer(4096),a=new ArrayBuffer(0),o=null;if(typeof t=="number")for(;o!==0;)o=this.readSync(t,s,0,s.length),a=Jc(a,s.slice(0,o));else for(i=this.openSync(t,n.flag);o!==0;)o=this.readSync(i,s,0,s.length),a=Jc(a,s.slice(0,o));return n.encoding?a.toString(n.encoding):a}finally{i!==void 0&&this.closeSync(i)}}},{key:"readlink",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.readlinkSync.bind(this),[t].concat(Ne(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"rename",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:de;this._callAsync(this.renameSync.bind(this),[t,n],i,i)}},{key:"renameSync",value:function(t,n){t=this._getPath(t),n=this._getPath(n);var i=this._navigate(t,!1),s=this._navigate(n,!1);if(!i.target)throw new x(F.ENOENT,t,n,"rename");if(i.target instanceof ke){if(s.target&&!(s.target instanceof ke))throw new x(F.ENOTDIR,t,n,"rename");if(i.target===this._root||s.target===this._root)throw new x(F.EBUSY,t,n,"rename");if(s.target&&[].concat(Ne(s.target.getEntries())).length-2)throw new x(F.ENOTEMPTY,t,n,"rename");if(i.name==="."||i.name===".."||s.name==="."||s.name==="..")throw new x(F.EBUSY,t,n,"rename");if(i.pathStack.length<s.pathStack.length){for(var a=!0,o=0;o<i.pathStack.length;++o)if(i.pathStack[o]!==s.pathStack[o]){a=!1;break}if(a)throw new x(F.EINVAL,t,n,"rename")}}else if(s.target&&s.target instanceof ke)throw new x(F.EISDIR,t,n,"rename");if(!this._checkPermissions(T.W_OK,i.dir.getMetadata())||!this._checkPermissions(T.W_OK,s.dir.getMetadata()))throw new x(F.EACCES,t,n,"rename");if(i.dir===s.dir){i.dir.renameEntry(i.name,s.name);return}var c=i.dir.getEntryIndex(i.name);if(s.target)s.target.getMetadata().ctime=new Date,s.dir.deleteEntry(s.name),s.dir.addEntry(s.name,c);else{if(s.dir.getMetadata().nlink<2)throw new x(F.ENOENT,t,n,"rename");s.dir.addEntry(s.name,c)}i.target.getMetadata().ctime=new Date,i.dir.deleteEntry(i.name)}},{key:"rmdir",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.rmdirSync.bind(this),[t],n,n)}},{key:"rmdirSync",value:function(t){t=this._getPath(t),t=t.replace(/(.+?)\/+$/,"$1");var n=this._navigate(t,!1);if(!n.name)throw new x(F.EBUSY,t,null,"rmdir");if(n.name==="."||n.name==="..")throw new x(F.EINVAL,t,null,"rmdir");if(!n.target)throw new x(F.ENOENT,t,null,"rmdir");if(!(n.target instanceof ke))throw new x(F.ENOTDIR,t,null,"rmdir");if([].concat(Ne(n.target.getEntries())).length-2)throw new x(F.ENOTEMPTY,t,null,"rmdir");if(!this._checkPermissions(T.W_OK,n.dir.getMetadata()))throw new x(F.EACCES,t,null,"rmdir");n.dir.deleteEntry(n.name)}},{key:"stat",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.statSync.bind(this),[t],function(i){return n(null,i)},n)}},{key:"statSync",value:function(t){t=this._getPath(t);var n=this._navigate(t,!0).target;if(n)return new Zs($n({},n.getMetadata()));throw new x(F.ENOENT,t)}},{key:"symlink",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.symlinkSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),c,c)}},{key:"symlinkSync",value:function(t,n){if(t=this._getPath(t),n=this._getPath(n),!t)throw new x(F.ENOENT,n,t,"symlink");var i=this._navigate(n,!1);if(i.target)throw new x(F.EEXIST,n,t,"symlink");if(i.dir.getMetadata().nlink<2)throw new x(F.ENOENT,n,t,"symlink");if(!this._checkPermissions(T.W_OK,i.dir.getMetadata()))throw new x(F.EACCES,n,t,"symlink");var s=this._iNodeMgr.createINode(zn,{mode:vu,uid:this._uid,gid:this._gid,link:t}),a=gt(s,2),o=a[1];i.dir.addEntry(i.name,o)}},{key:"truncate",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||de;a=a>=0?a:i.length,this._callAsync(this.truncateSync.bind(this),[t].concat(Ne(i.slice(0,a))),o,o)}},{key:"truncateSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(n<0)throw new x(F.EINVAL,null,null,"ftruncate");if(typeof t=="number")this.ftruncateSync(t,n);else{t=this._getPath(t);var i=void 0;try{i=this.openSync(t,T.O_WRONLY),this.ftruncateSync(i,n)}finally{i!==void 0&&this.closeSync(i)}}}},{key:"unlink",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;this._callAsync(this.unlinkSync.bind(this),[t],n,n)}},{key:"unlinkSync",value:function(t){t=this._getPath(t);var n=this._navigate(t,!1);if(!n.target)throw new x(F.ENOENT,t);if(!this._checkPermissions(T.W_OK,n.dir.getMetadata()))throw new x(F.EACCES,t);if(n.target instanceof ke)throw new x(F.EISDIR,t);n.target.getMetadata().ctime=new Date,n.dir.deleteEntry(n.name)}},{key:"utimes",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:de;this._callAsync(this.utimesSync.bind(this),[t,n,i],s,s)}},{key:"utimesSync",value:function(t,n,i){t=this._getPath(t);var s=this._navigate(t,!0).target;if(!s)throw new x(F.ENOENT,t,null,"utimes");var a=s.getMetadata(),o=void 0,c=void 0;if(typeof n=="number")o=new Date(n*1e3);else if(typeof n=="string")o=new Date(parseInt(n)*1e3);else if(n instanceof Date)o=n;else throw TypeError("atime and mtime must be dates or unixtime in seconds");if(typeof i=="number")c=new Date(i*1e3);else if(typeof i=="string")c=new Date(parseInt(i)*1e3);else if(i instanceof Date)c=i;else throw TypeError("atime and mtime must be dates or unixtime in seconds");a.atime=o,a.mtime=c,a.ctime=new Date}},{key:"write",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.writeSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),function(u){return c(null,u,n)},c)}},{key:"writeSync",value:function(t,n,i,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=this._fdMgr.getFd(t);if(!o)throw new x(F.EBADF,null,null,"write");if(typeof a=="number"&&a<0)throw new x(F.EINVAL,null,null,"write");var c=o.getFlags();if(!(c&(T.O_WRONLY|T.O_RDWR)))throw new x(F.EBADF,null,null,"write");var u=void 0;if(typeof n=="string")a=typeof i=="number"?i:null,s=typeof s=="string"?s:"utf8",u=this._getBuffer(n,s);else{if(i=typeof i=="number"?i:0,i<0||i>n.length)throw new RangeError("Offset is out of bounds");if(s=typeof s=="number"?s:n.length,s<0||s>n.length)throw new RangeError("Length is out of bounds");u=this._getBuffer(n).slice(i,i+s)}try{return o.write(u,a)}catch(f){throw f instanceof RangeError?new x(F.EFBIG,null,null,"write"):(f instanceof x&&f.setSyscall("write"),f)}}},{key:"writeFile",value:function(t,n){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||de;o=o>=0?o:s.length,this._callAsync(this.writeFileSync.bind(this),[t,n].concat(Ne(s.slice(0,o))),c,c)}},{key:"writeFileSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"undefined",i=arguments[2];i=this._getOptions({encoding:"utf8",mode:Et,flag:"w"},i);var s=void 0;try{var a=this._getBuffer(n,i.encoding);typeof t=="number"?this.writeSync(t,a,0,a.length,0):(s=this.openSync(t,i.flag,i.mode),this.writeSync(s,a,0,a.length,0))}finally{s!==void 0&&this.closeSync(s)}}},{key:"_callAsync",value:function(t,n,i,s){ut(function(){try{var a=t.apply(void 0,Ne(n));a=a===void 0?null:a,i(a)}catch(o){s(o)}})}},{key:"_getPath",value:function(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return new TextDecoder().decode(t);if((typeof t>"u"?"undefined":M0(t))==="object"&&typeof t.pathname=="string")return this._getPathFromURL(t);throw new TypeError("path must be a string or Buffer or URL")}},{key:"_getPathFromURL",value:function(t){if(t.hostname)throw new TypeError("ERR_INVALID_FILE_URL_HOST");var n=t.pathname;if(n.match(/%2[fF]/))throw new TypeError("ERR_INVALID_FILE_URL_PATH");return decodeURIComponent(n)}},{key:"_getOptions",value:function(t,n){return typeof n=="string"?$n({},t,{encoding:n}):$n({},t,n)}},{key:"_checkPermissions",value:function(t,n){return this._uid!==tr?qp(t,this._uid,this._gid,n):!0}},{key:"_parsePath",value:function(t){var n=t.match(/^([\s\S]*?)(?:\/+|$)([\s\S]*)/);if(n){var i=n[1]||"",s=n[2]||"";return{segment:i,rest:s}}else throw new Error("Could not parse pathS: "+t)}},{key:"_navigate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;if(t===void 0)throw new x(F.ENOENT,i);return t=t.replace(/\/+/,"/"),t=t.replace(/\/$/,"/."),t[0]==="/"||t===""?(t=t.substring(1),t?this._navigateFrom(this._root,t,n,[],i):{dir:this._root,target:this._root,name:"",remaining:"",pathStack:[]}):this._navigateFrom(this._cwd.getINode(),t,n,this._cwd.getPathStack(),i)}},{key:"_navigateFrom",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:n;if(!n)throw new x(F.ENOENT,a);if(!this._checkPermissions(T.X_OK,t.getMetadata()))throw new x(F.EACCES,a);var o=this._parsePath(n);o.segment!=="."&&(o.segment===".."?s.pop():s.push(o.segment));var c=void 0,u=void 0,f=t.getEntry(o.segment);if(f instanceof mt||f instanceof qt||f instanceof Yi){if(!o.rest)return{dir:t,target:f,name:o.segment,remaining:"",pathStack:s};throw new x(F.ENOTDIR,a)}else if(f instanceof ke){if(!o.rest)return{dir:t,target:f,name:o.segment,remaining:"",pathStack:s};c=f,u=o.rest}else if(f instanceof zn){if(!i)return{dir:t,target:f,name:o.segment,remaining:o.rest,pathStack:s};if(u=$l(f.getLink(),o.rest),u[0]==="/")return this._navigate(u,i,a);s.pop(),c=t}else return{dir:t,target:null,name:o.segment,remaining:o.rest,pathStack:s};return this._navigateFrom(c,u,i,s,a)}}]),r}(),Kv={setPos:function(e,t,n){e._pos=0},read:function(e,t,n){return 0},write:function(e,t,n,i){return t.length}},Xv={setPos:function(e,t,n){e._pos=0},read:function(e,t,n){return t.fill(0),t.length},write:function(e,t,n,i){return t.length}},qv={setPos:function(e,t,n){e._pos=0},read:function(e,t,n){return t.fill(0),t.length},write:function(e,t,n,i){throw new x(F.ENOSPC)}},Fi;typeof window<"u"?Fi=window:typeof vn<"u"?Fi=vn:typeof self<"u"?Fi=self:Fi={};var Mn=Fi,Eh={},Gl=Object.freeze({default:Eh}),Hl=Gl&&Eh||Gl;function Qv(r){if(Mn.crypto&&Mn.crypto.getRandomValues)return Mn.crypto.getRandomValues(r);if(typeof Mn.msCrypto=="object"&&typeof Mn.msCrypto.getRandomValues=="function")return Mn.msCrypto.getRandomValues(r);if(Hl.randomBytes){if(!(r instanceof Uint8Array))throw new TypeError("expected Uint8Array");if(r.length>65536){var e=new Error;throw e.code=22,e.message="Failed to execute 'getRandomValues' on 'Crypto': The ArrayBufferView's byte length ("+r.length+") exceeds the number of bytes of entropy available via this API (65536).",e.name="QuotaExceededError",e}var t=Hl.randomBytes(r.length);return r.set(t),r}else throw new Error("No secure random number generator available.")}var Jv=Qv;function Zv(){var r=new Uint8Array(1);return Jv(r),r[0]}var eg=Zv;function tg(r){for(var e="",t=0;t<r;t++)e+=String.fromCharCode(eg());return e}var rg=tg,yh={setPos:function(e,t,n){e._pos=0},read:function(e,t,n){var i=U.from(rg(t.length),"ascii");return i.copy(t),i.length},write:function(e,t,n,i){return t.length}},Zn=new Aa;Zn.registerChr(Kv,1,3);Zn.registerChr(Xv,1,5);Zn.registerChr(qv,1,7);Zn.registerChr(yh,1,8);Zn.registerChr(yh,1,9);var ft=new Wu(void 0,void 0,Zn);ft.mkdirSync("/dev");ft.chmodSync("/dev",509);ft.mknodSync("/dev/null",T.S_IFCHR,1,3);ft.mknodSync("/dev/zero",T.S_IFCHR,1,5);ft.mknodSync("/dev/full",T.S_IFCHR,1,7);ft.mknodSync("/dev/random",T.S_IFCHR,1,8);ft.mknodSync("/dev/urandom",T.S_IFCHR,1,9);ft.chmodSync("/dev/null",438);ft.chmodSync("/dev/zero",438);ft.chmodSync("/dev/full",438);ft.chmodSync("/dev/random",438);ft.chmodSync("/dev/urandom",438);ft.mkdirSync("/tmp");ft.chmodSync("/tmp",511);ft.mkdirSync("/root");ft.chmodSync("/root",448);function Ru(r){switch(r.mode&T.S_IFMT){case T.S_IFREG:return 4;case T.S_IFDIR:return 3;case T.S_IFBLK:return 1;case T.S_IFCHR:return 2;case T.S_IFLNK:return 7;case T.S_IFIFO:return 4;case T.S_IFSOCK:return 6;default:return 0}}function Qi(r){return{dev:BigInt(r.dev),ino:BigInt(r.ino),nlink:BigInt(r.nlink),filetype:Ru(r),size:BigInt(r.size),atim:BigInt(r.atime),mtim:BigInt(r.mtime),ctim:BigInt(r.ctime)}}var ei=class{virtualFs;constructor(){let e=new Aa,t=new yu(e),[n,i]=t.createINode(ke,{}),s=new wu(t);this.virtualFs=new Wu(18,i,e,t,s)}fsname(){return"VirtualFilesystem"}async mkdirat(e,t){let n,i;if(e===void 0)n=this.virtualFs._navigate(t,!1);else if(e instanceof $t)i=e,n=this.virtualFs._navigateFrom(i.dir,t,!1);else return 28;if(n.target)return 20;let[s,a]=this.virtualFs._iNodeMgr.createINode(ke,{mode:aa,uid:0,gid:0,parent:n.dir._dir["."]});return n.dir.addEntry(t,a),0}async getFilestat(e){try{let t=this.virtualFs.statSync(e);return{err:0,filestat:Qi(t)}}catch(t){return t.errno}}async unlinkat(e,t,n){try{let i;if(e===void 0)i=this.virtualFs._navigate(t,!1);else if(e instanceof $t)i=this.virtualFs._navigateFrom(e.dir,t,!1);else return 28;if(!i.target)return 44;if(n)i.target instanceof ke;else if(i instanceof ke)return 31;return i.dir.deleteEntry(i.name),0}catch(i){return i.errno}}async open(e,t,n,i,s,a,o){let c=this.virtualFs._navigate(e,!1);if(c.target){let u,f;c.remaining?(u=54,f=e.length-c.remaining.length-1):(f=-1,n&je&&n&sn?u=20:u=0);let h;return c.target instanceof ke?h=new $t(a,i,s,c.target,this.virtualFs._iNodeMgr):(c.target instanceof mt||c.target instanceof zn)&&!(n&st)?h=new Oa(a,i,s,this.virtualFs._fdMgr.createFd(c.target,T.O_RDWR)[0]):(h=new $t(a,i,s,c.dir,this.virtualFs._iNodeMgr),n&st?u=54:(c.target instanceof qt||c.target instanceof Yi)&&(u=43)),{err:u,index:f,desc:h}}else if(n&je){let[u,f]=this.virtualFs._iNodeMgr.createINode(mt,{mode:Et,uid:0,gid:0});c.dir.addEntry(c.name,f);let[h,p]=this.virtualFs._fdMgr.createFd(u,T.O_RDWR);return{err:0,index:-1,desc:new Oa(a,i,s,h)}}else return{err:44,index:-1,desc:new $t(a,i,s,c.dir,this.virtualFs._iNodeMgr)}}async renameat(e,t,n,i){let s,a;if(e===void 0)s=this.virtualFs._navigate(t,!1);else if(e instanceof $t)a=e,s=this.virtualFs._navigateFrom(a.dir,t,!1);else return 28;let o,c;if(n===void 0)o=this.virtualFs._navigate(i,!1);else if(n instanceof $t)c=n,o=this.virtualFs._navigateFrom(c.dir,i,!1);else return 28;if(!s.target)return 44;if(o.target)return 20;if(o.remaining.length!==0)return 44;let u=s.dir.getEntryIndex(s.name);return o.dir.addEntry(o.name,u),s.dir.deleteEntry(s.name,u),0}async symlinkat(e,t,n){let i,s;if(t===void 0)i=this.virtualFs._navigate(n,!1);else if(t instanceof $t)s=t,i=this.virtualFs._navigateFrom(s.dir,n,!1);else return 28;if(i.target)return 20;let[a,o]=this.virtualFs._iNodeMgr.createINode(zn,{mode:vu,uid:0,gid:0,link:e});return s.dir.addEntry(i.name,o),0}async initialize(e){return 0}async mknodat(e,t,n,i){return 28}};function Ih(r,e,t,n,i){r.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:n,fs_filetype:Ru(i)}}var xu=class extends WritableStream{constructor(e){super({async write(t){await e.write(t.buffer),new WritableStream}})}},Oa=class extends Dr{desc;cursor;constructor(e,t,n,i){super(),this.desc=i,Ih(this,e,t,n,i._iNode.getMetadata()),e&1&&this.fdstat.fs_filetype!==7?this.cursor=i._iNode._data.byteLength:this.cursor=0}async arrayBuffer(){return{err:0,buffer:this.desc._iNode._data}}async pread(e,t){return{err:0,buffer:this.desc._iNode._data.slice(Number(t),e+Number(t))}}async read(e){let t=this.desc._iNode._data.slice(this.cursor,this.cursor+e);return this.cursor+=t.byteLength,{err:0,buffer:t}}async read_str(){let e;return this.fdstat.fs_filetype===4?new TextDecoder().decode(e=this.desc._iNode._data):e=this.desc._iNode._link,{err:0,content:e}}async write(e){try{let t=await this.desc._iNode.write(e,this.cursor);return this.cursor+=t,{err:0,written:t}}catch(t){return{err:t.errno,written:0n}}}async pwrite(e,t){try{return{err:0,written:await this.desc._iNode.write(e,Number(t))}}catch(n){return n.errno}}async seek(e,t){let n;switch(this.fdstat.fs_filetype===7?n=BigInt((await this.desc._iNode._link).length):n=BigInt((await this.desc._iNode._data).byteLength),t){case kr:if(this.cursor+Number(e)<0n)return{offset:BigInt(this.cursor),err:28};this.cursor+=Number(e);break;case Ln:if(e<0n)return{offset:BigInt(this.cursor),err:28};this.cursor=Number(e);break;case Un:if(n<-e)return{offset:BigInt(this.cursor),err:28};this.cursor=Number(n+e);break;default:return{offset:BigInt(this.cursor),err:28}}return{err:0,offset:BigInt(this.cursor)}}async truncate(e){try{return this.desc._iNode._data.resize(Number(e)),0}catch(t){return t.errno}}async writableStream(){try{return{err:0,stream:new xu(this)}}catch(e){return e.errno}}async getFilestat(){return{err:0,filestat:Qi(this.desc._iNode.getMetadata())}}async setFilestatTimes(e,t){return t!==void 0&&(this.desc._iNode._metadata.mtime=t),e!==void 0&&(this.desc._iNode._metadata.atime=e),0}async close(){return 0}addPollSub(e,t,n){return Promise.resolve({userdata:e,eventType:t,error:0,nbytes:BigInt(this.desc._iNode._data.byteLength)})}},$t=class extends Nr{dir;inodeMgr;dirents;constructor(e,t,n,i,s){super(),this.dir=i,this.inodeMgr=s,Ih(this,e,t,n,i.getMetadata()),this.dirents=void 0}async readdir(e){try{return(this.dirents===void 0||e)&&(this.dirents=Array.from(this.dir._dir).filter(([t,n])=>t!=="."&&t!=="..").map(([t,n],i)=>({d_next:BigInt(i+1),d_ino:BigInt(n),name:t,d_type:Ru(this.inodeMgr.getINode(n).getMetadata())}))),{err:0,dirents:this.dirents}}catch(t){return{err:t.errno,dirents:[]}}}async getFilestat(){return{err:0,filestat:Qi(this.dir.getMetadata())}}async setFilestatTimes(e,t){return t!==void 0&&(this.dir._metadata.mtime=t),e!==void 0&&(this.dir._metadata.atime=e),0}};var bt=class extends Pn{ino;constructor(e,t,n,i){super(e,t,n),this.ino=i}async getFilestat(){return{err:0,filestat:Qi(this.ino._metadata)}}};var Wa=class extends bt{remover;constructor(e,t,n,i,s){super(e,t,n,i),this.remover=s,(t&_r)!==0n?this.ino.writer===-1?this.ino.writer=1:this.ino.writer++:(t&hr)!==0n&&(this.ino.reader===-1?this.ino.reader=1:this.ino.reader++)}isatty(){return!1}async read(e){let t=await this.ino.read();return t.byteLength>e&&t.resize(e),{err:0,buffer:t}}async write(e){return await this.ino.write(e),{err:0,written:BigInt(e.byteLength)}}async addPollSub(e,t,n){let i=BigInt(await this.ino.addPollSub());return{userdata:e,error:0,eventType:t,nbytes:i}}async ioctl(e,t){return this.ino.setMode(e,t[0]!==0),Promise.resolve(0)}close(){return(this.fdstat.fs_rights_base&_r)!==0n&&(this.ino.writer--,this.ino.writer===0&&this.ino.sendEof()),(this.fdstat.fs_rights_base&hr)!==0n&&this.ino.reader--,this.ino.isCloserm()&&this.ino.writer===0&&this.ino.reader===0&&this.remover(),Promise.resolve(0)}duplicateFd(){(this.fdstat.fs_rights_base&_r)!==0n&&this.ino.writer++,(this.fdstat.fs_rights_base&hr)!==0n&&this.ino.reader++}};var Ji=class extends ei{driverManager;async initialize(e){let t=e;return this.driverManager=t.driverManager,0}fsname(){return"DeviceFilesystem"}async mknodat(e,t,n){let i,s;if(e===void 0)i=this.virtualFs._navigate(t,!1);else if(e instanceof $t)s=e,i=this.virtualFs._navigateFrom(s.dir,t,!1);else return 28;if(i.target)return 20;if(n<0){let[a,o]=this.virtualFs._iNodeMgr.createINode(Yi,{mode:Et,uid:0,gid:0,parent:i.dir._dir["."]});i.dir.addEntry(t,o)}else{let[a,o]=this.virtualFs._iNodeMgr.createINode(qt,{mode:Et,uid:0,gid:0,rdev:n,parent:i.dir._dir["."]});i.dir.addEntry(t,o)}return 0}async open(e,t,n,i,s,a,o){let c=await super.open(e,t,n,i,s,a,o);if(c.err!==43)return c;let u=this.virtualFs._navigateFrom(c.desc.dir,Me(e),!1),f=()=>{try{c.desc.dir.deleteEntry(Me(e))}catch{}};if(u.target._metadata.isCharacterDevice()){let[h,p]=gu(u.target._metadata.rdev),g=this.driverManager.getDriver(h),{err:y,desc:A}=await g.getDesc(p,a,i,s,u.target);return y!==0?c:{err:0,index:-1,desc:A}}else return o!==-1&&(u.target.isKernW()&&(i&_r)!==0n||u.target.isKernR()&&(i&hr)!==0n)?{err:2,index:-1,desc:void 0}:{err:0,index:-1,desc:new Wa(a,i,s,u.target,f)}}};async function wh(r,e){let t=new Ji;return await r.initialize(e,t),await t.initialize({driverManager:r}),await t.mknodat(void 0,"null",Ft(0,0)),await t.mknodat(void 0,"zero",Ft(0,1)),await t.mknodat(void 0,"urandom",Ft(0,2)),await t.mknodat(void 0,"ttyH0",Ft(1,0)),await t.mknodat(void 0,"ttyH1",Ft(1,1)),await t.mknodat(void 0,"wget0",Ft(2,0)),await t.mknodat(void 0,"ws0",Ft(3,0)),t}var og=40,cg={fsa:Bn,vfs:ei,devfs:Ji};async function Fu(r,e){let t=cg[r];if(t){let n=new t;return{err:await n.initialize(e),filesystem:n}}return{err:28,filesystem:void 0}}var Ra=class{mounts;constructor(){this.mounts={}}abspath(e,t){if(e!==void 0&&!t.startsWith("/")){let n=e.getPath();return t.length===0?n:`${n==="/"?"":n}/${t}`}return t}async getDescInfo(e,t,n=0,i=0,s=ze,a=ze,o=0,c=og){let u=$f(e),f,h;for(f=u.length;f>0;f=u.lastIndexOf("/",f-1)){let A=u.slice(0,f);if(h=this.mounts[A],h!==void 0)break}if(h===void 0&&(h=this.mounts["/"]),h===void 0)throw new Error("No filesystem mounted at root");let{err:p,index:g,desc:y}=await h.open(u.slice(f),n,i,s,a,o,t);if(y){let A=g>-1?u.slice(0,f+g):u;if(await y.initialize(A)!==0)return{desc:void 0,err:56,fs:void 0,path:u}}if(n&1)switch(p){case 0:case 54:{let A=y.getFdstat();if(A!==void 0&&A.fs_filetype===7){if(c===0)return{desc:y,err:32,fs:h,path:u};let{err:H,content:$}=await y.read_str();if(H!==0)return{desc:void 0,err:p,fs:h,path:void 0};let X;if($.startsWith("/"))if(g!==-1){let z=u.slice(f+g);X=$.concat(z)}else X=$;else{let z=g===-1?y.getPath().lastIndexOf("/"):y.getPath().lastIndexOf("/",f+g-1),se=u.slice(0,z+1);if(p===0)X=se.concat($);else{let pe=u.slice(f+g);X=se.concat($,pe)}}return await this.getDescInfo(X,t,n,i,s,a,o,c-1)}break}default:return{desc:void 0,err:p,fs:h,path:void 0}}return p===0?(i&Nn&&await y.truncate(0n),{desc:y,err:p,fs:h,path:u}):{desc:void 0,err:p,fs:h,path:u}}async open(e,t=0,n=0,i=0,s=ze,a=ze,o=-1){return await this.getDescInfo(e,o,t,n,s,a,i)}async openat(e,t,n=0,i=0,s=0,a=ze,o=ze,c=-1){let u=this.abspath(e,t);return await this.getDescInfo(u,c,n,i,a,o,s)}async createDir(e,t=void 0,n=-1){let i=this.abspath(t,e);i.endsWith("/")&&(i=i.slice(0,-1));let{desc:s,fs:a,err:o}=await this.getDescInfo(Dt(i),n,1);return o!==0?o:await a.mkdirat(s,Me(i))}async addSymlink(e,t,n=void 0,i=-1){let s;n!==void 0&&!t.startsWith("/")?s=`${n.getPath()}/${t}`:s=t;let{desc:a,fs:o,err:c}=await this.getDescInfo(Dt(s),i,1);return c!==0?c:o.symlinkat(e,a,Me(t))}async mknodat(e,t,n,i){let s=this.abspath(e,t),{desc:a,fs:o,err:c}=await this.getDescInfo(Dt(s),i,1);return c!==0?c:o.mknodat(a,Me(s),n,{})}async removeEntry(e,t,n=void 0,i=-1){let s=this.abspath(n,e),{desc:a,fs:o,err:c}=await this.getDescInfo(Dt(s),i,1);return c!==0?c:await o.unlinkat(a,Me(s),t)}async move(e,t,n,i,s=-1){let a=this.abspath(e,t),o=Dt(a),c=this.abspath(n,i),u=Dt(c);if(Object.keys(this.mounts).some(H=>{H.startsWith(a)})||a.startsWith(c))return 10;let f=await this.getDescInfo(o,s,1,st);if(f.err!==0)return f.err;let h=await this.getDescInfo(a,s,1);if(h.err!==0)return h.err;let p=await h.desc.getFilestat();if(p.err!==0)return p.err;let g=p.filestat,y=await this.getDescInfo(u,s,1,st);if(y.err!==0)return y.err;let A=await this.getDescInfo(c,s,1);if(A.err===0){let H=await A.desc.getFilestat();if(H.err!==0)return H.err;let $=H.filestat;if(g.dev!==$.dev)return 75;if($.filetype===3){if(g.filetype!==3)return 54;let{err:X,dirents:z}=await A.desc.readdir(!1);if(X!==0)return X;if(z.length!==0)return 55}}return y.fs.renameat(f.desc,Me(a),y.desc,Me(c))}async addMount(e,t,n,i,s,a,o,c=-1){let u=this.abspath(n,i),f;if(u!=="/"){if(f=await this.getDescInfo(u,c,1,st),f.err!==0)return f.err;if((await f.desc.readdir(!0)).dirents.length!==0)return 55}else if(this.mounts["/"]!==void 0)return 10;let h=this.abspath(e,t),p;if(h===""){let g=await Fu(s,o);if(g.err!==0)return g.err;p=g.filesystem}else{let g=await this.getDescInfo(h,c,1,st);if(g.err!==0)return g.err;let y=await g.desc.mountFs(o);if(y.err!==0)return y.err;p=y.fs}return this.mounts[u]=p,0}async addMountFs(e,t,n=-1){if(this.mounts[e]!==void 0)return 10;if(e==="/")return this.mounts[e]=t,0;let i=await this.getDescInfo(e,n,1,st);return i.err!==0?i.err:(await i.desc.readdir(!0)).dirents.length===0?(this.mounts[e]=t,0):55}removeMount(e){return Object.keys(this.mounts).every(t=>t===e||!t.startsWith(e))?this.mounts[e]?(delete this.mounts[e],0):44:10}async readLink(e,t,n=-1){let{err:i,desc:s}=await this.openat(e,t,0,0,0,ze,ze,n);if(i!==0)return{err:i,path:void 0};if(s.getFdstat().fs_filetype!==7)return{err:28,path:void 0};let{err:o,content:c}=await s.read_str();return{err:o,path:c}}getMounts(){return this.mounts}};var Fa=class extends Dr{procNode;contents;cursor;constructor(e,t,n,i){super(),this.procNode=i,this.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:n,fs_filetype:this.procNode.getFilestat().filetype};let s=new TextEncoder().encode(this.procNode.read());this.contents=s.buffer,this.cursor=0n}addPollSub(e,t,n){return Promise.resolve({userdata:e,eventType:t,nbytes:BigInt(this.contents.byteLength),error:0})}arrayBuffer(){return Promise.resolve({err:0,buffer:this.contents})}close(){return Promise.resolve(0)}getFilestat(){return Promise.resolve({err:0,filestat:this.procNode.getFilestat()})}pread(e,t){let n=this.contents.slice(Number(t),Number(t)+e);return Promise.resolve({err:0,buffer:n})}pwrite(e,t){return Promise.resolve({err:2,written:0n})}read(e,t){let n=this.contents.slice(Number(this.cursor),Number(this.cursor)+e);return this.cursor+=BigInt(n.byteLength),Promise.resolve({err:0,buffer:n})}read_str(){return Promise.resolve({err:0,content:new TextDecoder().decode(this.contents)})}seek(e,t){let n=BigInt(this.contents.byteLength);switch(t){case kr:if(this.cursor+e<0n)return Promise.resolve({offset:this.cursor,err:28});this.cursor+=e;break;case Ln:if(e<0n)return Promise.resolve({offset:this.cursor,err:28});this.cursor=e;break;case Un:if(n<-e)return Promise.resolve({offset:this.cursor,err:28});this.cursor=n+e;break;default:return Promise.resolve({offset:this.cursor,err:28})}return Promise.resolve({err:0,offset:this.cursor})}setFilestatTimes(e,t){return Promise.resolve(8)}truncate(e){return Promise.resolve(2)}writableStream(){return Promise.resolve({err:2,stream:void 0})}write(e){return Promise.resolve({err:2,written:0n})}},ka=class extends Nr{procNode;dirents;constructor(e,t,n,i){super(),this.procNode=i,this.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:n,fs_filetype:3}}async readdir(e){if(this.dirents===void 0||e){let t=this.procNode.listNodes();if(t.err!==0)return{err:t.err,dirents:void 0};this.dirents=Object.entries(t.nodes).map(([n,i],s)=>({d_next:BigInt(s+1),d_ino:0n,name:n,d_type:i.getFilestat().filetype}))}return{err:0,dirents:this.dirents}}getFilestat(){return Promise.resolve({err:0,filestat:this.procNode.getFilestat()})}setFilestatTimes(e,t){return Promise.resolve(8)}};var Ua;function Ah(r){Ua=r}function bh(r){return new La(r)}var ku=class{constructor(){}getFilestat(){return ku.filestat}},Da=ku;xr(Da,"filestat",{dev:0n,ino:0n,filetype:7,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n});var Du=class{getFilestat(){return Du.filestat}},Na=Du;xr(Na,"filestat",{dev:0n,ino:0n,filetype:4,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n});var Nu=class{pid;constructor(e){this.pid=e}getFilestat(){return Nu.filestat}},Zi=Nu;xr(Zi,"filestat",{dev:0n,ino:0n,filetype:3,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n});var Pa=class extends Na{read(){return Object.entries(Ua.filesystem.getMounts()).map(([e,t])=>`${e} ${t.fsname()}`).join(`
`)+`
`}},Ba=class extends Da{pid;constructor(e){super(),this.pid=e}read(){return this.pid.toString()}},Lu=class extends Zi{listNodes(){let e={};for(let[t,n]of Object.entries(Lu.specialNodes))e[t]=new n(this.pid);for(let t of Object.keys(Ua.processInfos))e[t.toString()]=new es(Number(t));return{err:0,nodes:e}}getNode(e){if(e==="")return{err:0,node:this};let t=Number(e);if(isNaN(t)){if(e==="self")return{err:0,node:new Ba(this.pid)}}else if(Ua.processInfos[t]!==void 0)return{err:0,node:new es(t)};return{err:44,node:void 0}}},La=Lu;xr(La,"specialNodes",{self:Ba});var Uu=class extends Zi{listNodes(){let e={};for(let[t,n]of Object.entries(Uu.specialNodes))e[t]=new n(this.pid);return{err:0,nodes:e}}getNode(e){switch(e){case"mountinfo":return{err:0,node:new Pa};default:return{err:44,node:void 0}}}},es=Uu;xr(es,"specialNodes",{mountinfo:Pa});var Ma=class{processManager;constructor(e){this.processManager=e,Ah(this.processManager)}fsname(){return"ProcFilesystem"}mkdirat(e,t){return Promise.resolve(2)}getFilestat(e){return Promise.resolve({err:58,filestat:void 0})}open(e,t,n,i,s,a,o){let c=bh(o),u=0,f=-1,h=e.startsWith("/")?0:-1,p=e.indexOf("/",h+1);do{let A=p===-1?e.slice(h+1):e.slice(h+1,p);if(c.getFilestat().filetype!==3){u=54,f=h;break}let H=c.getNode(A);if(H.err!==0){u=H.err,f=p;break}c=H.node;let $=e.indexOf("/",p+1);h=p,p=$}while(h!==-1);h===-1&&(f=-1,u===0?n&st&&c.getFilestat().filetype!==3?u=54:n&je&&n&sn&&(u=20):u===44&&n&je&&(u=2));let g,y=c.getFilestat().filetype;if(y===3)g=new ka(a,i,s,c);else{let A=c;g=new Fa(a,i,s,A)}return Promise.resolve({err:u,index:f,desc:g})}unlinkat(e,t,n){return Promise.resolve(2)}renameat(e,t,n,i){return Promise.resolve(2)}symlinkat(e,t,n){return Promise.resolve(2)}initialize(e){return Promise.resolve(0)}mknodat(e,t,n,i){return Promise.resolve(2)}};var $a=class{devices;async initDriver(){return this.devices={[0]:ts,[1]:Pu,[2]:Bu},0}async initDevice(e){return 0}async teardownDevice(e){return 0}async teardownDriver(){return 0}async getDesc(e,t,n,i,s){return{desc:new this.devices[e](t,n,i,s),err:0}}},ts=class extends bt{isatty(){return!1}async read(e,t){return{err:0,buffer:new ArrayBuffer(0)}}async pread(e,t){return{err:0,buffer:new ArrayBuffer(0)}}async arrayBuffer(){return{err:0,buffer:new ArrayBuffer(0)}}async read_str(){return{err:0,content:""}}async write(e){return{err:0,written:BigInt(e.byteLength)}}async pwrite(e,t){return{err:0,written:BigInt(e.byteLength)}}async seek(e,t){return{err:0,offset:0n}}async truncate(e){return 0}},Pu=class extends ts{async read(e,t){let n=new ArrayBuffer(e);return new Uint8Array(n).fill(0,0,e),{err:0,buffer:n}}async pread(e,t){return this.read(e)}},Bu=class extends ts{async read(e,t){let n=new ArrayBuffer(e),i=new Uint8Array(n);for(var s=0;s<e;s++)i.set([Math.floor(Math.random()*256)],s);return{err:0,buffer:n}}async pread(e,t){return this.read(e)}};var Mu=class{bufSize;start;end;buffers;constructor(e=1<<16){this.bufSize=e,this.start=0,this.end=0,this.buffers=[],this.getNewBuffer()}getNewBuffer(){this.buffers.push(new ArrayBuffer(this.bufSize)),this.end=0}discardBuffer(){this.start=0,this.buffers.length===1&&(this.end=0),this.buffers.shift()}push(e){let t=0;for(;t<e.length;){(this.end>=this.bufSize||this.buffers.length===0)&&this.getNewBuffer();let n=new Uint8Array(this.buffers[this.buffers.length-1],this.end,this.bufSize-this.end),{written:i,read:s}=new TextEncoder().encodeInto(e.slice(t),n);if(t+=s,this.end+=i,this.end<this.bufSize&&t<e.length){let a=new TextEncoder().encode(e[t]),o=this.bufSize-this.end;n.set(a.slice(0,o),this.end-n.byteOffset),this.getNewBuffer(),new Uint8Array(this.buffers[this.buffers.length-1],this.end,this.bufSize-this.end).set(a.slice(o)),t++,this.end+=a.length-o}}}pop(e,t){let n=0;for(;n<t;){let i=t-n;if(this.buffers.length===1?i>this.end-this.start&&(i=this.end-this.start):i>this.bufSize-this.start&&(i=this.bufSize-this.start),i===0)break;let s=new Uint8Array(this.buffers[0],this.start,i);e.set(s,n),this.start+=i,n+=i,this.start>=this.bufSize&&this.discardBuffer()}return n}length(){if(this.buffers.length<=1)return this.end-this.start;{let e=this.buffers.length>2?this.buffers.length*this.bufSize:0;return this.bufSize-this.start+this.end+e}}},Va=class{foregroundPid;bufRequestQueue;subs;termios;driverBuffer;driverBufferCursor;userBuffer;constructor(e,t=1<<16){this.bufRequestQueue=[],this.subs=[],this.termios=e,this.driverBuffer="",this.driverBufferCursor=0,this.userBuffer=new Mu(t)}splitBuf(e){let t=new ArrayBuffer(e),n=new Uint8Array(t),i=this.userBuffer.pop(n,e);return t.slice(0,i)}detectBreakCondition(e){for(let t=2;t<e.length;++t)if(e.charCodeAt(t)!==0)return t;return e.length}stripOffBytes(e){let t="";for(let n=0;n<e.length;++n){let i=e.charCodeAt(n);t+=String.fromCharCode(i&127)[0]}return t}pushDriverInputBuffer(e){this.termios.lFlag&8&&this.printTerminal(e),this.driverBuffer=this.driverBuffer.slice(0,this.driverBufferCursor)+e+this.driverBuffer.slice(this.driverBufferCursor),this.driverBufferCursor+=e.length}pushNLDriverInputBuffer(){this.driverBuffer+=`
`,this.termios.lFlag&2&&((this.termios.lFlag&8||this.termios.lFlag&64)&&this.printTerminal(`\r
`),this.flushDriverInputBuffer())}flushDriverInputBuffer(){this.userBuffer.push(this.driverBuffer),this.driverBuffer="",this.driverBufferCursor=0}resolveUserReadRequests(){if(this.userBuffer.length()!==0)for(;this.userBuffer.length()!==0&&this.bufRequestQueue.length>0;){let e=this.bufRequestQueue.shift(),t=new ArrayBuffer(e.len),n=new Uint8Array(t),i=this.userBuffer.pop(n,e.len);e.resolve({err:0,buffer:t.slice(0,i)})}else{let e=this.bufRequestQueue.filter(t=>t.pid===this.foregroundPid);this.bufRequestQueue=this.bufRequestQueue.filter(t=>t.pid!==this.foregroundPid),e.forEach(t=>t.resolve({err:0,buffer:new ArrayBuffer(0)}))}}processTerminalInput(e,t){let n=this.termios.iFlag,i=this.termios.cFlag,s=this.termios.lFlag;if(i&128){for(n&32&&(t=this.stripOffBytes(t));t.length>0;){let a=t.charCodeAt(0);if(a===0&&t.length>1&&t.charCodeAt(1)===0){let o=this.detectBreakCondition(t);n&1||(n&2?this.flushDriverInputBuffer():n&8?this.driverBuffer+="\xFF\0\0":this.driverBuffer+="\0"),t=t.slice(o);continue}switch(a){case 10:{s&2?n&64?n&128||(n&256?this.pushNLDriverInputBuffer():this.pushDriverInputBuffer("\r")):this.pushNLDriverInputBuffer():this.pushNLDriverInputBuffer();break}case 13:{s&2?n&128||(n&256?this.pushNLDriverInputBuffer():this.pushDriverInputBuffer("\r")):this.pushDriverInputBuffer("\r");break}case 17:case 19:{n&1024||this.pushDriverInputBuffer(t[0]);break}case 3:case 26:case 28:{s&1?a===3&&this.foregroundPid!=null&&e.publishEvent(Kt,this.foregroundPid):this.pushDriverInputBuffer(t[0]);break}case 4:{s&2?(this.flushDriverInputBuffer(),this.resolveUserReadRequests()):this.pushDriverInputBuffer(t[0]);break}case 21:{s&2&&s&32?this.removeFromCursorToLeft(this.driverBufferCursor):this.pushDriverInputBuffer(t[0]);break}case 127:{s&2&&s&16?this.removeFromCursorToLeft(1):this.pushDriverInputBuffer(t[0]);break}case 27:{if(s&2)if(t[1]==="["){switch(t[2]){case"C":{this.moveCursorRight(1);break}case"D":{this.moveCursorLeft(1);break}default:break}t=t.slice(3);continue}else{t=t.slice(2);continue}else this.pushDriverInputBuffer(t[0]);break}default:{this.pushDriverInputBuffer(t[0]);break}}t=t.slice(1)}if(s&2||this.flushDriverInputBuffer(),this.userBuffer.length()!==0&&this.resolveUserReadRequests(),this.userBuffer.length()!==0){for(let a of this.subs)a.resolve({userdata:a.userdata,error:0,nbytes:BigInt(this.userBuffer.length()),eventType:jt});this.subs.length=0}}}dataForUser(){return this.userBuffer.length()}readToUser(e){return this.splitBuf(e)}sendTerminalOutput(e){return this.termios.oFlag&4&&(e=e.replaceAll(`
`,`\r
`)),this.printTerminal(e),e}};var yg={iFlag:5376,oFlag:5,cFlag:176,lFlag:32827},ju=class extends Va{terminal;constructor(e){super({...yg}),this.terminal=e,this.terminal.setInsertMode((this.termios.lFlag&2)!==0)}printTerminal(e){this.terminal.io.print(e)}moveCursorRight(e){let t=e>=this.driverBuffer.length-this.driverBufferCursor?this.driverBuffer.length-this.driverBufferCursor:e;t!==0&&(this.terminal.io.print(`\x1B[${t}C`),this.driverBufferCursor+=t)}moveCursorLeft(e){let t=e>=this.driverBufferCursor?this.driverBufferCursor:e;t!==0&&(this.terminal.io.print(`\x1B[${t}D`),this.driverBufferCursor-=t)}removeFromCursorToLeft(e){let t=e>=this.driverBufferCursor?this.driverBufferCursor:e;t!==0&&(this.terminal.cursorLeft(t),this.terminal.io.print(`\x1B[${t}P`),this.driverBuffer=this.driverBuffer.slice(0,this.driverBufferCursor-t)+this.driverBuffer.slice(this.driverBufferCursor),this.driverBufferCursor-=t)}getScreenSize(){let e=this.terminal.scrollPort_.getScreenSize();return{cellsWidth:this.terminal.screenSize.width,cellsHeight:this.terminal.screenSize.height,pxWidth:e.width,pxHeight:e.height}}},Ya=class{maxTty;freedTerminals;processManager;terminals;async initDriver(e){let t=e;return this.processManager=t.processManager,this.terminals=[],this.freedTerminals=[],this.maxTty=0,0}__initFsaDropImport(e,t,n,i){t.addEventListener("dragover",function(o){o.stopPropagation(),o.preventDefault(),o.dataTransfer.dropEffect="copy"},!1);let s=this;t.addEventListener("drop",async function(a){a.stopPropagation(),a.preventDefault();let o=i.processInfos[s.terminals[e].foregroundPid].cwd;await Promise.all((Object.values(a.dataTransfer.items)||[]).map(async c=>{let u=await c.getAsFileSystemHandle(),f=`${o}/${u.name}`;if(u.kind==="file"){let h=(await u.getFile()).stream(),p=await i.filesystem.open(f,je);if(p.err!==0)return;let{err:g,stream:y}=await p.desc.writableStream();return new Promise(async A=>{await h.pipeTo(y),n&&n(f,u.name),A()})}else if(u.kind==="directory"){let h=`/tmp/temp_mount_${u.name}`;await i.filesystem.createDir(h);let{err:p,filesystem:g}=await Fu("fsa",{dir:u,keepMetadata:!1});if(p!==0)return;await i.filesystem.addMountFs(h,g),await i.spawnProcess(0,null,"/usr/bin/wash",new Pr({0:void 0,1:void 0,2:void 0,3:new Xt((await i.filesystem.open("/")).desc)}),["/usr/bin/wash","-c",`cp -r ${h} ${f} ; umount ${h}`],Ns,!1,dn)}}))})}__initTerminal(e){let t=new ju(e);t.terminal.installKeyboard(),t.terminal.keyboard.bindings.addBindings({"Ctrl-R":"PASS"});let n=s=>{t.processTerminalInput(this.processManager,s)},i=t.terminal.io.push();return i.onVTKeystroke=n,i.sendString=n,i.onTerminalResize=(s,a)=>{t.foregroundPid!=null&&this.processManager.publishEvent(Lf,t.foregroundPid)},t}async initDevice(e){let t=e,n=this.freedTerminals.pop();n||(n=this.maxTty++);let i=this.__initTerminal(t.terminal);return this.terminals[n]=i,this.__initFsaDropImport(n,t.terminal.div_.getElementsByTagName("iframe")[0].contentWindow,()=>{},this.processManager),0}async teardownDevice(e){return this.terminals[e]?(delete this.terminals[e],this.freedTerminals.push(e),0):44}async teardownDriver(){return 0}async getDesc(e,t,n,i,s){return this.terminals[e]===void 0?{err:43,desc:void 0}:{err:0,desc:new Ku(t,n,i,s,this.terminals[e])}}async wrapCallback(e){try{await e()}catch(t){throw Object.values(this.terminals).forEach(n=>{n.terminal.io.println(`[ERROR] Unrecoverable kernel error: ${t}`)}),t}}},Ku=class extends bt{hterm;constructor(e,t,n,i,s){super(e,t,n,i),this.hterm=s}isatty(){return!0}async write(e){let t=this.hterm.sendTerminalOutput(new TextDecoder().decode(e));return window.stdoutAttached&&(window.buffer+=t),{err:0,written:BigInt(e.byteLength)}}async read(e,t){return this.hterm.dataForUser()>0?{err:0,buffer:this.hterm.readToUser(e)}:this.fdstat.fs_flags&4?{err:0,buffer:new ArrayBuffer(0)}:new Promise(n=>{this.hterm.bufRequestQueue.push({len:e,pid:t,resolve:n})})}async ioctl(e,t){let n=42;switch(e){case 1:{if(t.byteLength<16)break;let i=new Int32Array(t.buffer,t.byteOffset);i[0]=this.hterm.termios.iFlag,i[1]=this.hterm.termios.oFlag,i[2]=this.hterm.termios.cFlag,i[3]=this.hterm.termios.lFlag,n=0;break}case 2:{if(t.byteLength<16)break;let i=new Int32Array(t.buffer,t.byteOffset);this.hterm.termios.iFlag=i[0],this.hterm.termios.oFlag=i[1],this.hterm.termios.cFlag=i[2],this.hterm.termios.lFlag=i[3],this.hterm.terminal.setInsertMode((this.hterm.termios.lFlag&2)!==0),n=0;break}case 19:{if(t.byteLength<8)break;let i=await this.hterm.getScreenSize(),s=new Uint16Array(t.buffer,t.byteOffset);s[0]=i.cellsHeight,s[1]=i.cellsWidth,s[2]=i.pxWidth,s[3]=i.pxHeight,n=0;break}default:{1<=e&&e<=96&&2147767344<=e&&e<=2147767360&&35073<=e&&e<=35079?n=58:n=28;break}}return n}addPollSub(e,t,n){switch(t){case Dn:return Promise.resolve({userdata:e,error:0,eventType:t,nbytes:0n});case jt:return this.hterm.dataForUser()===0?new Promise(i=>{this.hterm.subs.push({pid:n,userdata:e,tag:t,resolve:i})}):Promise.resolve({userdata:e,error:0,eventType:t,nbytes:BigInt(this.hterm.dataForUser())});default:return Promise.resolve({userdata:e,error:28,eventType:Ze,nbytes:0n})}}};var za=class{responses;topResponseId;devfs;initDriver(e){return this.topResponseId=1,this.responses={},this.devfs=e.devfs,Promise.resolve(0)}teardownDriver(e){return Promise.resolve(0)}initDevice(e){return Promise.resolve(0)}teardownDevice(e,t){return Promise.resolve(0)}async makeRequest(e){try{return this.responses[this.topResponseId]=await fetch(e),this.devfs.mknodat(void 0,`wget0r${this.topResponseId}`,Ft(2,this.topResponseId)),{err:0,minor:this.topResponseId++}}catch(t){return console.log(t),{err:28,minor:-1}}}async getDesc(e,t,n,i,s){return e===0?{err:0,desc:new Xu(t,n,i,s,this)}:this.responses[e]===void 0?{desc:void 0,err:44}:{err:0,desc:new qu(t,n,i,s,this.responses[e],()=>this.invalidateResponse(e))}}async invalidateResponse(e){return delete this.responses[e],this.devfs.unlinkat(void 0,`wget0r${e}`,!1)}},Xu=class extends bt{driver;constructor(e,t,n,i,s){super(e,t,n,i),this.driver=s}isatty(){return!1}async write(e){let t=new TextDecoder().decode(e),{err:n,minor:i}=await this.driver.makeRequest(t);return{err:n,written:BigInt(i)}}},qu=class extends bt{response;invalidate;currentBuffer;body;headers;hCursor;bCursor;constructor(e,t,n,i,s,a){super(e,t,n,i),this.response=s,this.invalidate=a,this.currentBuffer=1,this.hCursor=0,this.bCursor=0;let o=[];for(let[u,f]of this.response.headers.entries())o.push(`${u}: ${f}`);let c=new TextEncoder().encode(o.join(`
`));this.headers=c.buffer}isatty(){return!1}async read(e,t){let n;return this.currentBuffer===1?(this.body===void 0&&(this.body=await this.response.arrayBuffer()),n=this.body.slice(this.bCursor,this.bCursor+e),this.bCursor+=n.byteLength):(n=this.headers.slice(this.hCursor,this.hCursor+e),this.hCursor+=n.byteLength),{err:0,buffer:n}}close(){return this.invalidate()}async ioctl(e,t){switch(e){case 0:{if(t===void 0||t.byteLength<4)return 42;let n=new Int32Array(t.buffer,t.byteOffset);return n[0]=this.response.status,0}case 2:return this.currentBuffer=1,0;case 1:return this.currentBuffer=0,0;default:return 28}}};function wg(r,e){let t,n=e.data;n instanceof ArrayBuffer?t=n:t=new TextEncoder().encode(n).buffer;let i={start:0,buf:t};for(;i.start<i.buf.byteLength&&r.requestQueue.length>0;){let s=r.requestQueue.shift(),a=t.slice(i.start,i.start+s.len);s.resolve({err:0,buffer:a}),i.start+=s.len}if(!(i.start>=i.buf.byteLength)){r.msgBuffer.push({start:0,buf:t});for(let s=r.pollQueue.shift();s!==void 0;s=r.pollQueue.shift())s.resolve({userdata:s.userdata,error:0,nbytes:BigInt(t.byteLength),eventType:jt})}}var ja=class{websocketsDevices;topSocketId;devfs;initDriver(e){return this.websocketsDevices={},this.topSocketId=1,this.devfs=e.devfs,Promise.resolve(0)}teardownDriver(e){return Promise.resolve(0)}initDevice(e){return Promise.resolve(0)}teardownDevice(e,t){return Promise.resolve(0)}async createConnectionDevice(e){let t=this.topSocketId,n=await this.devfs.mknodat(void 0,`ws0s${t}`,Ft(3,t));return n!==0?{err:n,minor:void 0}:(this.topSocketId++,this.websocketsDevices[t]=e,{err:0,minor:t})}async getDesc(e,t,n,i,s){if(e===0)return{err:0,desc:new Qu(t,n,i,s,this)};if(this.websocketsDevices[e]===void 0)return{desc:void 0,err:44};let a=this.websocketsDevices[e];if(a.socket.readyState!==WebSocket.OPEN)return{err:53,desc:void 0};let o=new Ju(t,n,i,s,a,()=>this.invalidateConnectionDevice(e));return a.fdCount++,{err:0,desc:o}}async invalidateConnectionDevice(e){return delete this.websocketsDevices[e],this.devfs.unlinkat(void 0,`ws0s${e}`,!1)}},Qu=class extends bt{driver;constructor(e,t,n,i,s){super(e,t,n,i),this.driver=s}isatty(){return!1}async write(e){let t=new TextDecoder().decode(e),n;try{n=new WebSocket(t)}catch{return Promise.resolve({err:28,written:-1n})}let i={socket:n,msgBuffer:[],requestQueue:[],pollQueue:[],fdCount:0},s=new Promise(u=>{n.onerror=f=>{u(14)}}),a=new Promise(u=>{n.onopen=f=>{u(0)}});n.binaryType="arraybuffer",n.onmessage=u=>wg(i,u),n.onclose=u=>{for(let f=i.requestQueue.shift();f!==void 0;f=i.requestQueue.shift())f.resolve({err:0,buffer:new ArrayBuffer(0)});for(let f=i.pollQueue.shift();f!==void 0;f=i.pollQueue.shift())f.resolve({userdata:f.userdata,error:0,nbytes:0n,eventType:Ze})};let o=await Promise.race([s,a]);if(o!==0)return{err:o,written:-1n};n.onerror=u=>{for(let f=i.requestQueue.shift();f!==void 0;f=i.requestQueue.shift())f.resolve({err:13,buffer:new ArrayBuffer(0)});for(let f=i.pollQueue.shift();f!==void 0;f=i.pollQueue.shift())f.resolve({userdata:f.userdata,error:13,nbytes:0n,eventType:Ze})};let c=await this.driver.createConnectionDevice(i);return c.err!==0?{err:c.err,written:-1n}:{err:c.err,written:BigInt(c.minor)}}},Ju=class extends bt{connection;invalidate;constructor(e,t,n,i,s,a){super(e,t,n,i),this.connection=s,this.invalidate=a}isatty(){return!1}write(e){return this.connection.socket.readyState!==WebSocket.OPEN?Promise.resolve({err:53,written:0n}):(this.connection.socket.send(e),Promise.resolve({err:0,written:BigInt(e.byteLength)}))}read(e,t){let n=this.connection.msgBuffer[0];if(n!==void 0){let i=n.buf.byteLength-n.start,s;return i>e?(s=n.buf.slice(n.start,n.start+e),n.start+=e):(s=n.buf.slice(n.start),this.connection.msgBuffer.shift()),Promise.resolve({err:0,buffer:s})}return this.connection.socket.readyState>WebSocket.OPEN?Promise.resolve({err:0,buffer:new ArrayBuffer(0)}):new Promise(i=>{this.connection.requestQueue.push({len:e,resolve:i})})}addPollSub(e,t,n){switch(t){case Dn:return this.connection.socket.readyState>WebSocket.OPEN?Promise.resolve({userdata:e,error:0,eventType:Ze,nbytes:0n}):Promise.resolve({userdata:e,error:0,eventType:t,nbytes:BigInt(Number.MAX_SAFE_INTEGER)});case jt:{if(this.connection.msgBuffer.length===0)return this.connection.socket.readyState>WebSocket.OPEN?Promise.resolve({userdata:e,error:0,eventType:Ze,nbytes:0n}):new Promise(a=>{this.connection.pollQueue.push({pid:n,userdata:e,tag:t,resolve:a})});let i=this.connection.msgBuffer[0],s=i.buf.byteLength-i.start;return Promise.resolve({userdata:e,error:0,eventType:t,nbytes:BigInt(s)})}default:return Promise.resolve({userdata:e,error:28,eventType:Ze,nbytes:0n})}}close(){return this.connection.fdCount--,this.connection.fdCount>0?Promise.resolve(0):(this.connection.socket.readyState===WebSocket.OPEN&&this.connection.socket.close(1e3),this.invalidate())}duplicateFd(){this.connection.fdCount++}};var Ka=class{drivers;constructor(){this.drivers={}}async initialize(e,t){let n=new $a,i=await n.initDriver();if(i!==0)return i;let s=new Ya;if(i=await s.initDriver({processManager:e}),i!==0)return i;let a=new za;if(i=await a.initDriver({devfs:t}),i!==0)return i;let o=new ja;return i=await o.initDriver({devfs:t}),i!=0?i:(this.drivers[0]=n,this.drivers[1]=s,this.drivers[2]=a,this.drivers[3]=o,0)}attachDevice(e,t){return this.drivers[t].initDevice(e)}getDriver(e){return this.drivers[e]}};var Ag=URL.createObjectURL(new Blob([function(){function r(){}if(r.prototype={onmessage:function(o){try{if(o.data.type==="extract")this.untarBuffer(o.data.buffer);else throw new Error("Unknown message type: "+o.data.type)}catch(c){this.postError(c)}},postError:function(o){this.postMessage({type:"error",data:{message:o.message}})},postLog:function(o,c){this.postMessage({type:"log",data:{level:o,msg:c}})},untarBuffer:function(o){try{for(var c=new a(o);c.hasNext();){var u=c.next();this.postMessage({type:"extract",data:u},[u.buffer])}this.postMessage({type:"complete"})}catch(f){this.postError(f)}},postMessage:function(o,c){self.postMessage(o,c)}},typeof self<"u"){var e=new r;self.onmessage=function(o){e.onmessage(o)}}function t(o){for(var c="",u=0;u<o.length;){var f=o[u++];if(f>127){if(f>191&&f<224){if(u>=o.length)throw"UTF-8 decode: incomplete 2-byte sequence";f=(f&31)<<6|o[u]&63}else if(f>223&&f<240){if(u+1>=o.length)throw"UTF-8 decode: incomplete 3-byte sequence";f=(f&15)<<12|(o[u]&63)<<6|o[++u]&63}else if(f>239&&f<248){if(u+2>=o.length)throw"UTF-8 decode: incomplete 4-byte sequence";f=(f&7)<<18|(o[u]&63)<<12|(o[++u]&63)<<6|o[++u]&63}else throw"UTF-8 decode: unknown multibyte start 0x"+f.toString(16)+" at index "+(u-1);++u}if(f<=65535)c+=String.fromCharCode(f);else if(f<=1114111)f-=65536,c+=String.fromCharCode(f>>10|55296),c+=String.fromCharCode(f&1023|56320);else throw"UTF-8 decode: code point 0x"+f.toString(16)+" exceeds UTF-16 reach"}return c}function n(o){this._fields=o}n.parse=function(o){for(var c=new Uint8Array(o),u=[];c.length>0;){var f=parseInt(t(c.subarray(0,c.indexOf(32)))),h=t(c.subarray(0,f)),p=h.match(/^\d+ ([^=]+)=(.*)\n$/);if(p===null)throw new Error("Invalid PAX header data format.");var g=p[1],y=p[2];y.length===0?y=null:y.match(/^\d+$/)!==null&&(y=parseInt(y));var A={name:g,value:y};u.push(A),c=c.subarray(f)}return new n(u)},n.prototype={applyHeader:function(o){this._fields.forEach(function(c){var u=c.name,f=c.value;u==="path"?(u="name",o.prefix!==void 0&&delete o.prefix):u==="linkpath"&&(u="linkname"),f===null?delete o[u]:o[u]=f})}};function i(){}function s(o){this._bufferView=new DataView(o),this._position=0}s.prototype={readString:function(o){for(var c=1,u=o*c,f=[],h=0;h<o;++h){var p=this._bufferView.getUint8(this.position()+h*c,!0);if(p!==0)f.push(p);else break}return this.seek(u),String.fromCharCode.apply(null,f)},readBuffer:function(o){var c;if(typeof ArrayBuffer.prototype.slice=="function")c=this._bufferView.buffer.slice(this.position(),this.position()+o);else{c=new ArrayBuffer(o);var u=new Uint8Array(c),f=new Uint8Array(this._bufferView.buffer,this.position(),o);u.set(f)}return this.seek(o),c},seek:function(o){this._position+=o},peekUint32:function(){return this._bufferView.getUint32(this.position(),!0)},position:function(o){if(o===void 0)return this._position;this._position=o},size:function(){return this._bufferView.byteLength}};function a(o){this._stream=new s(o),this._globalPaxHeader=null}a.prototype={hasNext:function(){return this._stream.position()+4<this._stream.size()&&this._stream.peekUint32()!==0},next:function(){return this._readNextFile()},_readNextFile:function(){var o=this._stream,c=new i,u=!1,f=null,h=o.position(),p=h+512;switch(c.name=o.readString(100),c.mode=o.readString(8),c.uid=parseInt(o.readString(8)),c.gid=parseInt(o.readString(8)),c.size=parseInt(o.readString(12),8),c.mtime=parseInt(o.readString(12),8),c.checksum=parseInt(o.readString(8)),c.type=o.readString(1),c.linkname=o.readString(100),c.ustarFormat=o.readString(6),c.ustarFormat.indexOf("ustar")>-1&&(c.version=o.readString(2),c.uname=o.readString(32),c.gname=o.readString(32),c.devmajor=parseInt(o.readString(8)),c.devminor=parseInt(o.readString(8)),c.namePrefix=o.readString(155),c.namePrefix.length>0&&(c.name=c.namePrefix+"/"+c.name)),o.position(p),c.type){case"0":case"":c.buffer=o.readBuffer(c.size);break;case"1":break;case"2":break;case"3":break;case"4":break;case"5":break;case"6":break;case"7":break;case"g":u=!0,this._globalPaxHeader=n.parse(o.readBuffer(c.size));break;case"x":u=!0,f=n.parse(o.readBuffer(c.size));break;default:break}c.buffer===void 0&&(c.buffer=new ArrayBuffer(0));var g=p+c.size;return c.size%512!==0&&(g+=512-c.size%512),o.position(g),u&&(c=this._readNextFile()),this._globalPaxHeader!==null&&this._globalPaxHeader.applyHeader(c),f!==null&&f.applyHeader(c),c}}}.toString().slice(11,-1)],{type:"test/javascript"}));function bg(r){if(typeof Promise!="function")throw new Error("Promise implementation not available in this environment.");var e=[],t=[];function n(a){for(var o=0,c=e.length;o<c;++o)e[o](a);t.push(a)}var i=new Promise(function(a,o){r(a,o,n)});i.progress=function(a){if(typeof a!="function")throw new Error("cb is not a function.");for(var o=0,c=t.length;o<c;++o)a(t[o]);return e.push(a),i};var s=i.then;return i.then=function(a,o,c){return s.call(i,a,o),c!==void 0&&i.progress(c),i},i}var Zu=window||void 0,Tg=Zu.URL||Zu.webkitURL;function xh(r){if(!(r instanceof ArrayBuffer))throw new TypeError("arrayBuffer is not an instance of ArrayBuffer.");if(!Zu.Worker)throw new Error("Worker implementation is not available in this environment.");return new bg(function(e,t,n){var i=new Worker(Ag),s=[];i.onerror=function(a){t(a)},i.onmessage=function(a){switch(a=a.data,a.type){case"log":console[a.data.level]("Worker: "+a.data.msg);break;case"extract":var o=Og(a.data);s.push(o),n(o);break;case"complete":i.terminate(),e(s);break;case"error":i.terminate(),t(new Error(a.data.message));break;default:i.terminate(),t(new Error("Unknown message from worker: "+a.type));break}},i.postMessage({type:"extract",buffer:r},[r])})}var Cg={blob:{get:function(){return this._blob||(this._blob=new Blob([this.buffer]))}},getBlobUrl:{value:function(){return this._blobUrl||(this._blobUrl=Tg.createObjectURL(this.blob))}},readAsString:{value:function(){for(var r=this.buffer,e=r.byteLength,t=1,n=e*t,i=new DataView(r),s=[],a=0;a<e;++a){var o=i.getUint8(a*t,!0);s.push(o)}return this._string=String.fromCharCode.apply(null,s)}},readAsJSON:{value:function(){return JSON.parse(this.readAsString())}}};function Og(r){return Object.defineProperties(r,Cg),r}var Wg="/dev/initr.kfifo",xg="/dev/initw.kfifo",Xa=class{fifow;fifor;tfs;async initialize(e){this.tfs=e;let t;return t=await e.open(xg,1,0,0,Rr,Rr),t.err!==0||(this.fifor=t.desc,t=await e.open(Wg,1,0,0,Fr,Fr),t.err!==0)?t.err:(this.fifow=t.desc,0)}async spawn(e,t){let n=new TextEncoder().encode(JSON.stringify({Spawn:{cmd:e,args:t,kern:!0}}));await this.fifow.write(n.buffer);let{err:i,buffer:s}=await this.fifor.read(64);if(i!==0)throw new Error("Could not spawn process");let a=new TextDecoder().decode(s).split(" "),o=Number(a[0]),c=Number(a[1]),u=await this.tfs.open(`/dev/spawn_stdin.${o}`,0,0,0,Fr);if(u.err!==0)throw new Error("Could not open stdin descriptor");let f=u.desc;if(u=await this.tfs.open(`/dev/spawn_stdout.${o}`,0,0,0,Rr),u.err!==0)throw new Error("Could not open stdout descriptor");let h=u.desc;if(u=await this.tfs.open(`/dev/spawn_stderr.${o}`,0,0,0,Rr),u.err!==0)throw new Error("Could not open stderr descriptor");let p=u.desc;return{stdin:f,stdout:h,stderr:p,pid:c}}};var tf=class{processManager;topLevelFs;driverManager;deviceFilesystem;devFsPromise;jsInterface;__printk(e){try{this.driverManager.getDriver(1).terminals[0].terminal.io.println(Gf(e))}catch{}}constructor(){this.driverManager=new Ka,this.topLevelFs=new Ra,this.processManager=new Ti(bf,this.topLevelFs,this.driverManager),this.devFsPromise=wh(this.driverManager,this.processManager).then(e=>{this.deviceFilesystem=e}),this.jsInterface=new Xa}async attachDevice(e,t){return await this.devFsPromise,this.driverManager.attachDevice(e,t)}async tearDown(e){e("Starting purge...");let t=await navigator.storage.getDirectory();e("Cleaning storage...");for await(let n of t.keys())e(`Removing ${n}...`),await t.removeEntry(n,{recursive:!0});e("Cleaning metadata..."),await new Promise(n=>{window.indexedDB.databases().then(i=>{Promise.all(i.map(s=>{window.indexedDB.deleteDatabase(s.name)})).then(n)})}),e("Purge complete")}async init(e,t=!0){if(await this.devFsPromise,!navigator.storage.getDirectory){this.__printk("Your browser doesn't support File System Access API yet."),this.__printk("We recommend using Chrome for the time being.");return}if(t&&(this.__printk("Registering service worker"),!await Ng())){this.__printk("Service Worker registration failed");return}if(typeof SharedArrayBuffer>"u"){t?(this.__printk("SharedArrayBuffer undefined, reloading page"),window.location.href=window.location.href):this.__printk("SharedArrayBuffer undefined, aborting");return}e==null&&(this.__printk("Reading kernel config"),e=await Lg(this.topLevelFs)),await kh(this.topLevelFs,e.mountConfig)!==0&&this.__printk("Failed to mount root filesystem"),this.__printk("Reading init system");let{err:n}=await this.topLevelFs.open(e.init,1);if(n!==0){this.__printk("Init system not present"),this.__printk("Starting rootfs initialization");let o=e.rootfs;o===void 0&&(this.__printk("Rootfs image not configured in kernel config, using default"),o="https://antmicro.github.io/jswasi-rootfs/rootfs.tar.gz");let c=await fetch(o),u=c.headers.get("Content-Encoding"),f=c.body;if(u==="gzip")f=Rh(f);else if(!u){let h=c.headers.get("Content-Type");(h==="application/gzip"||h==="application/x-gzip")&&(f=Rh(f))}if(n===56){this.__printk("Root filesystem corrupted, attempting recovery mode"),this.topLevelFs.removeMount("/");let h=Fg;await kh(this.topLevelFs,h),this.__printk("VirtualFilesystem mounted on /"),await Fh(this.topLevelFs,await new Response(f).arrayBuffer()),await kg(this.topLevelFs)}else await Fh(this.topLevelFs,await new Response(f).arrayBuffer());this.__printk("Rootfs initialized")}await this.topLevelFs.createDir("/dev"),this.__printk("Mounting device filesystem"),await this.topLevelFs.addMountFs("/dev",this.deviceFilesystem),await this.topLevelFs.createDir("/proc"),this.__printk("Mounting proc filesystem"),await this.topLevelFs.addMountFs("/proc",new Ma(this.processManager)),await this.topLevelFs.createDir("/tmp"),this.__printk("Mounting temp filesystem"),await this.topLevelFs.addMount(void 0,"",void 0,"/tmp","vfs",0n,{});let i=await this.topLevelFs.open("/");if(i.err){this.__printk("Could not open root file descriptor for the init system");return}let a=(await this.topLevelFs.open("/dev/ttyH0")).err===0?{maj:1,min:0}:null;this.__printk("Starting init"),await this.processManager.spawnProcess(null,null,e.init,new Pr({3:new Xt(i.desc)}),e.initArgs,Ns,!1,dn,a)}},Rg="fsa0",ef="/config.json",Fg={fsType:"vfs",opts:{}};async function kg(r){let{err:e,desc:t}=await r.open("/etc/motd",1,je|Nn);if(e!==0)return;let n=new TextEncoder().encode(`
[WARNING] Could not mount filesystem, volatile filesystem used as root for recovery
`);await t.write(n.buffer),await t.close()}async function Dg(r,e,t,n=!0){let{err:i,desc:s}=await r.open(e,1,je);if(i!==0)return console.warn(`Unable to resolve path for ${e}`),i;if(n||(await s.getFilestat()).filestat.size===0n){await s.truncate(0n);let a=await fetch(t);if(a.status!=200)return 44;{let{err:o,stream:c}=await s.writableStream();if(o!=0)return o;await a.body?.pipeTo(c)}}return await s.close(),0}function Rh(r){let e=new DecompressionStream("gzip");return r.pipeThrough(e)}async function Fh(r,e){let t=await xh(e);for(let n of t)switch(n.type){case"":case"0":{let{err:i,desc:s}=await r.open(n.name,0,je);if(i!==0)throw Error("Corrupted rootfs image");let a=(await s.writableStream()).stream;await n.blob.stream().pipeTo(a),await s.close();break}case"5":{if(await r.createDir(n.name)!==0)throw Error("Corrupted rootfs image");break}case"2":{if(await r.addSymlink(n.linkname,n.name)!==0)throw Error("Corrupted rootfs image");break}}}function Ng(){return new Promise(r=>{navigator.serviceWorker.register("jswasi.js").then(e=>{e!==void 0&&(e.onupdatefound=()=>r(!0),e.active&&r(!0))},e=>r(!1))})}async function Lg(r){await r.addMount(void 0,"",void 0,"/","fsa",0n,{name:Rg,create:"true",keepMetadata:"false"});let e,{err:t,desc:n}=await r.open(ef);if(t===0){let{err:i,content:s}=await n.read_str();if(i===0)try{e=JSON.parse(s)}catch{}await n.close()}else{await Dg(r,ef,"resources/config.json");let{desc:i}=await r.open(ef),{content:s}=await i.read_str();e=JSON.parse(s)}return r.removeMount("/"),e}function kh(r,e){return r.addMount(void 0,"",void 0,"/",e.fsType,0n,e.opts)}Object.defineProperty(window,"Jswasi",{value:tf,writable:!1});
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/**
 * @license BitSet.js v5.0.3 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */
}
